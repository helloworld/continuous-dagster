{"version":3,"sources":["WebsocketStatus.tsx","CustomAlertProvider.tsx","plan/DisplayEvent.tsx","plan/DisplayEvents.tsx","Util.tsx","plan/ReexecuteButton.tsx","types/globalTypes.ts","runs/RunContext.tsx","DirectGraphQLSubscription.ts","plan/ComputeLogModal.tsx","plan/ExecutionPlanBox.tsx","plan/AnimatedEllipsis.tsx","plan/ExecutionPlanHiddenStepsBox.tsx","plan/ExecutionPlan.tsx","PythonErrorInfo.tsx","InfoModal.tsx","execute/RunPreview.tsx","SplitPanelChildren.tsx","graph/SVGViewport.tsx","graph/PipelineColorScale.ts","graph/SVGComponents.tsx","graph/SolidTags.tsx","graph/SolidConfigPort.tsx","graph/highlighting.ts","graph/SolidIOBox.tsx","graph/SolidNode.tsx","graph/SolidLinks.tsx","graph/ExternalConnectionNode.tsx","graph/MappingLine.tsx","graph/ParentSolidNode.tsx","graph/PipelineGraph.tsx","graph/layout.ts","graph/getFullSolidLayout.ts","ShortcutHandler.tsx","SolidQueryInput.tsx","SolidQueryImpl.ts","execute/SolidSelector.tsx","configeditor/codemirror-yaml/lint.js","configeditor/codemirror-yaml/mode.tsx","configeditor/ConfigEditor.tsx","execute/ConfigEditorConfigPicker.tsx","execute/ConfigEditorModePicker.tsx","configeditor/ConfigEditorUtils.tsx","ConfigTypeSchema.tsx","execute/ConfigEditorHelp.tsx","PipelineNamesContext.tsx","PipelineJumpComponents.tsx","execute/ExecutionStartButton.tsx","runs/RunUtils.tsx","execute/PipelineExecutionButtonGroup.tsx","execute/ExecutionSessionContainer.tsx","LocalStorage.tsx","execute/ExecutionTabs.tsx","execute/PipelineExecutionRoot.tsx","execute/PipelineExecutionSetupRoot.tsx","Loading.tsx","graph/PipelineGraphContainer.tsx","SidebarComponents.tsx","Description.tsx","typeexplorer/TypeExplorer.tsx","typeexplorer/TypeExplorerContainer.tsx","TypeWithTooltip.tsx","typeexplorer/TypeList.tsx","typeexplorer/TypeListContainer.tsx","runs/MetadataEntry.tsx","runs/CellTruncationProvider.tsx","runs/LogsRowStructuredContent.tsx","runs/LogsRow.tsx","runs/LogsScrollingTableHeader.tsx","runs/LogsScrollingTable.tsx","runs/LogsToolbar.tsx","runs/RunStatusToPageAttributes.tsx","runs/Run.tsx","runs/LogsProvider.tsx","runs/LogsRowComponents.tsx","SidebarSolidHelpers.tsx","SidebarSolidInvocation.tsx","plugins/ipynb.tsx","HighlightedCodeBlock.tsx","plugins/sql.tsx","plugins/generic.tsx","plugins/index.ts","SolidTypeSignature.tsx","SidebarSolidDefinition.tsx","SidebarSolidContainer.tsx","SidebarPipelineInfo.tsx","SidebarTabbedContainer.tsx","PipelineExplorer.tsx","PipelineExplorerRoot.tsx","runs/RunRoot.tsx","ListComponents.tsx","runs/RunTable.tsx","TokenizingField.tsx","runs/RunsRoot.tsx","solids/SolidCard.tsx","solids/SolidsRoot.tsx","schedules/ScheduleRow.tsx","schedules/SchedulesRoot.tsx","schedules/ScheduleRoot.tsx","ProcessStatus.tsx","LeftNav.tsx","App.tsx","AppCache.tsx","AppError.tsx","index.tsx","plan/ExecutionStateDot.tsx","plan/ComputeLogContent.tsx","RunMetadataProvider.tsx","workers/dagre_layout.worker.ts","images/nav-logo-icon.png","images/icon-file.svg","images/icon-link.svg","DomUtils.tsx","images/icon-dependency-arrow.svg"],"names":["WebsocketStatusContext","React","WebSocket","CONNECTING","WS_EVENTS","WebsocketStatusProvider","state","status","unlisteners","this","map","eventName","props","websocket","on","setState","forEach","u","Provider","value","children","Circle","styled","div","CurrentAlert","setCustomAlert","alert","document","dispatchEvent","CustomEvent","showCustomAlert","opts","Object","assign","body","title","CustomAlertProvider","bodyRef","addEventListener","icon","undefined","usePortal","onClose","style","width","maxWidth","isOpen","Body","ref","className","Classes","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","autoFocus","onClick","e","copyElement","copySelector","current","querySelector","copyValue","textContent","intent","Colors","WHITE","LIGHT_GRAY3","DisplayEventItem","action","actionText","actionValue","text","actionEl","DisplayEventLink","href","target","whiteSpace","DisplayEventItemContainer","DisplayEvent","event","DisplayEventContainer","LabelColumn","IconComponents","items","item","idx","key","a","word","minimal","marginRight","none","file","flexShrink","alignSelf","src","require","alt","link","DisplayEvents","expectationsExpanded","materializationsExpanded","expectationResults","materializations","nPassed","filter","IExpectationResultStatus","PASSED","length","nFailed","FAILED","DisplayEventsContainer","display","alignItems","DisclosureTriangle","expanded","fontWeight","ExpectationsTag","Intent","SUCCESS","NONE","DANGER","BLACK","Tag","DEFAULT_RESULT_NAME","unixTimestampToString","unix","Date","toLocaleString","twoDigit","v","formatElapsedTime","msec","Math","ceil","sec","round","min","floor","hours","breakOnUnderscores","str","replace","titleOfIO","i","solid","name","definition","assertUnreachable","_","Error","ReexecuteButton","onReexecuteStep","executionArtifactsPersisted","stepKey","IStepState","SUCCEEDED","includes","ReExecuteContainer","border","IconNames","PLAY","iconSize","DISABLE","ComputeIOType","EvaluationErrorReason","LogLevel","ObjectStoreOperationType","PipelineRunStatus","ScheduleAttemptStatus","ScheduleStatus","StepKind","RunContext","DirectGraphQLSubscription","query","variables","onFlushMessages","messageQueue","messagesReceived","closed","handleBeforeUnload","close","handleRetry","setTimeout","readyState","CLOSED","open","handleEvent","msg","type","push","payload","data","flushUpdates","debounce","ws","WEBSOCKET_URI","JSON","parse","send","stringify","id","extensions","print","window","removeEventListener","ComputeLogLink","runState","setOpen","run","runId","WAITING","SKIPPED","LogLink","stopPropagation","height","margin","padding","borderRadius","onRequestClose","LoadingContainer","size","ComputeLogModal","maxBytes","isLoading","stdout","stderr","ComputeLogContent","ComputeLogsProvider","_stdout","_stderr","onStdout","messages","onMessages","onStderr","ioType","computeLogs","subscription","merge","subscribe","unsubscribe","prevProps","COMPUTE_LOGS_SUBSCRIPTION","STDOUT","cursor","STDERR","b","__typename","path","downloadUrl","slice","s","fragments","gql","ComputeLogContentFragment","ExecutionPlanBox","timer","ensureTimer","clearTimeout","start","RUNNING","nextMs","now","onTick","nextProps","nextState","finish","delay","onApplyStepFilter","onShowStateDetails","elapsed","ExecutionPlanRowContainer","ExecutionPlanBoxContainer","transitionDelay","ExecutionFinishedFlash","success","ExecutionStateWrap","ExecutionStateDot","toUpperCase","substr","ExecutionPlanBoxName","ExecutionTime","ExecutionTimeContainer","minWidth","GRAY3","LIGHT_GRAY2","DARK_GRAY3","LIGHT_GRAY4","AnimatedEllipsis","AnimatedEllipsisContainer","span","ExecutionPlanHiddenStepsBox","numberStepsSkipped","DARK_GRAY4","LIGHT_GRAY1","EMPTY_RUN_METADATA","steps","EMPTY_STEP_METADATA","transitionedAt","ExecutionPlan","skippedCount","haveRun","runMetadata","executionPlan","stepKeysToExecute","stepsOrderedByTransitionTime","keys","sort","startDone","startText","startingProcessAt","processId","startedPipelineAt","initFailed","pipeline","stepsSkippedCount","prevSkippedCount","ExecutionPlanContainer","ExecutionPlanContainerInner","ExecutionTimeline","ExecutionTimelineMessage","ExecutionTimelineDot","completed","step","indexOf","metadata","renderSkippedSteps","artifactsPersisted","exitedAt","startedProcessAt","ExecutionPlanFragment","GRAY1","PythonErrorInfo","message","error","stack","cause","Wrapper","centered","ErrorWrapperCentered","ErrorWrapper","context","contextMsg","ErrorHeader","Trace","join","CauseHeader","showReload","location","reload","PythonErrorFragment","h3","DIALOG_BODY","RunPreview","showErrorModal","plan","validation","pythonError","errors","textDecoration","NonIdealWrap","SEND_TO_GRAPH","description","ErrorsWrap","ErrorRow","paddingRight","color","RED4","InfoModal","RunPreviewConfigValidationFragment","RunPreviewExecutionPlanResultFragment","SplitPanelChildren","onChangeWidth","vw","localStorage","setItem","identifier","Number","getItem","isNaN","leftInitialPercent","leftMinWidth","left","right","Split","axis","onMove","PanelDivider","down","onMouseDown","onMouseMove","clientX","innerWidth","clientY","innerHeight","onMouseUp","DividerWrapper","HitArea","DividerHitArea","horizontal","p","GRAY5","vertical","DETAIL_ZOOM","PanAndZoomInteractor","viewport","_animation","cancel","element","HTMLElement","closest","getOffsetXY","lastX","x","lastY","y","offset","delta","onUp","onWheel","cursorPosition","targetScale","scale","deltaY","max","adjustZoomRelativeToScreenPoint","render","ZoomSliderContainer","marginBottom","stepSize","labelRenderer","onChange","clientWidth","clientHeight","SVGViewport","panzoom","_lastWheelTime","_lastWheelDir","minScale","onZoomAndCenter","screenToSVGCoords","abs","smoothZoomToSVGCoords","autocenter","animate","el","ownerRect","dw","graphWidth","dh","graphHeight","desiredScale","boundedScale","smoothZoom","getBoundingClientRect","top","nextScale","point","centerSVGCoord","to","from","done","onKeyDown","onDoubleClick","interactor","backgroundColor","SVGViewportStyles","tabIndex","transformOrigin","transform","Interactors","PanAndZoom","position","overflow","userSelect","PipelineColorScale","scaleOrdinal","domain","range","TURQUOISE5","TURQUOISE3","TURQUOISE1","BLUE3","BLUE1","ORANGE5","SVGEllipseInRect","rest","rx","ry","cx","cy","clipToLength","len","SVGMonospaceText","allowTwoLines","lineChars","line1","line2","parts","split","shift","line1Y","font","pointerEvents","dominantBaseline","SVGFlowLayoutRect","spacing","layout","computeLayout","finalWidth","grouped","childLayouts","l","compressionPriority","priorities","parseInt","passLayouts","passWidth","reduce","sum","cl","ratio","childLayout","acc","arranged","clone","flattened","appendChildren","arr","Array","reactChildrenToArray","intrinsicSizeForProps","console","dim","SVGFlowLayoutFiller","tags","minified","fill","stroke","tag","hue","c","charCodeAt","n","hueForTag","label","strokeWidth","SolidConfigPort","pathLength","strokeDasharray","isHighlighted","edges","some","h","PARENT_IN","PARENT_OUT","SolidIOBox","jumpTargetSolid","highlightedEdges","colorKey","onHighlightEdges","showText","highlighted","onMouseEnter","onMouseLeave","displayName","metadataForCompositeParentIO","parentDefinition","others","inputMappings","mappedInput","outputMappings","mappedOutput","metadataForIO","invocation","inputs","find","dependsOn","o","outputs","dependedBy","SELECTED_STYLE","dashed","FOCUSED_STYLE","SolidNode","handleClick","preventDefault","handleDoubleClick","handleEnterComposite","onEnterComposite","handleKindClicked","requestAnimationFrame","Event","selected","focused","boundingBox","outputDefinitions","composite","configField","kind","m","opacity","renderSurroundingBox","renderSolidCompositeIndicator","renderSolid","inputDefinitions","SolidNodeInvocationFragment","SolidNodeDefinitionFragment","ParentSolidNodeDefinitionFragment","buildSVGPath","pathVerticalDiagonal","source","buildSVGPaths","fn","cache","WeakMap","arg","has","get","r","set","weakmapMemoize","connections","solids","solidName","edgeName","port","SolidLinks","onHighlight","StyledPath","d","ExternalConnectionNode","labelAttachment","onDoubleClickLabel","textProps","textSize","textOrigin","BackingRect","MappingLine","leftEdgeX","edge","strokeLinecap","ParentSolidNode","def","parentLayout","parent","mappingLeftEdge","mappingLeftSpacing","highlightingProps","onClickSolid","SVGLabeledParentRect","LIGHT_GRAY5","destination","sourcePort","trgtPort","input","invocationInput","iidx","output","invocationOutput","rect","NoOp","PipelineGraphContents","focusSolids","parentSolid","parentHandleID","onDoubleClickSolid","onEnterCompositeSolid","highlightedSolids","selectedSolid","selectedHandleID","invocationBoundingBox","EmptyHighlightedArray","PipelineGraph","viewportEl","resolveSolidPosition","cb","lastName","solidLayout","centerSolid","focusOnSolid","closestSolidInDirection","dir","center","score","dx","dy","NaN","pop","nodeName","37","38","39","40","keyCode","nextSolid","unfocus","unfocusOutsideContainer","onLeaveCompositeSolid","cancelAnimations","pipelineName","onClickBackground","SVGContainer","PipelineGraphSolidFragment","PipelineGraphParentSolidFragment","svg","MAX_PER_ROW_ENABLED","MAX_PER_ROW","SOLID_WIDTH","SOLID_BASE_HEIGHT","IO_HEIGHT","IO_INSET","IO_MINI_WIDTH","IO_THRESHOLD_FOR_MINI","PORT_INSET_X","PORT_INSET_Y","PARENT_DEFINITION_PADDING","PARENT_INVOCATION_PADDING","EXTERNAL_DEPENDENCY_PADDING","flattenIO","arrays","array","values","layoutExternalConnections","links","layoutWidth","inset","insetWidth","baseX","yShift","result","shiftDirection","layoutSolid","root","accY","inputsLayouts","buildIOSmallLayout","count","centeringOffsetX","buildIOLayout","outputLayouts","_layoutCacheKey","solidKey","parentKey","getDagrePipelineLayout","hashFn","hashSize","LRU","memoize","pipelineSolids","g","dagre","Graph","parentIOPadding","marginy","marginx","setGraph","rankdir","setDefaultEdgeLabel","solidNamesPresent","setNode","dep","setEdge","w","weight","nodesBySolid","nodes","node","nodesInRows","rows","firstRow","firstRowCenterX","ii","rowKey","rowNodes","desiredCount","newRowNodes","maxHeight","totalWidth","shifted","shiftedMaxHeight","jj","minX","MAX_SAFE_INTEGER","conn","points","boundingBottom","layoutParentCompositeSolid","asyncDagrePipelineLayout","async","Promise","resolve","asyncMemoize","worker","LayoutWorker","terminate","postMessage","MODIFIER_KEYCODES","SHORTCUT_VISIBILITY_EVENT_TYPE","shortcutsVisible","shortcutsTimer","setShortcutsVisible","hideShortcuts","ShortcutHandler","previewPosition","onShortcutVisiblityChange","ReactDOM","findDOMNode","onGlobalKeydown","altKey","ctrlKey","metaKey","onGlobalKeyDown","onShortcut","shortcutFilter","activeElement","blur","shortcutLabel","ShortcutAnnotation","placeholderTextForSolids","seed","placeholder","ranked","incount","outcount","example","SolidQueryInput","active","setActive","setFocused","pendingValue","setPendingValue","lastClause","exec","menu","prefix","lastSolidName","suffix","suggestions","startsWith","onConfirmSuggestion","suggestion","preceding","index","StyledMenu","StyledMenuItem","pos","findIndex","nextIdx","nextText","SolidQueryInputContainer","content","SolidQueryInputField","leftIcon","onFocus","onBlur","ArrowDown","ArrowUp","onKeyUp","SolidQueryInputSolidFragment","InputGroup","Menu","MenuItem","MAX_RENDERED_FOR_EMPTY_QUERY","SolidGraphTraverser","solidNameMap","depth","results","next","traverse","callback","solidNamed","expansionDepthForClause","clause","filterSolidsByQuery","all","focus","traverser","Set","clauses","trim","parentsClause","descendentsClause","solidsMatching","upDepth","downDepth","add","fetchUpstream","other","fetchDownstream","SolidSelectorModalContainer","useQuery","SOLID_SELECTOR_QUERY","justifyContent","SolidSelectorModal","graphRef","handleSetQuery","handleSave","queryResultSolids","solidSubset","queryInvalid","bottom","disabled","buttonText","subsetError","WARNING_SIGN","WARNING","GUTTER_ID","rm","elt","parentNode","removeChild","showTooltipFor","tooltip","tt","createElement","nodeRect","appendChild","cloneNode","showTooltip","hide","CodeMirror","off","poll","setInterval","nodeType","host","clearInterval","clearMarks","cm","lint","hasGutter","clearGutter","marked","clear","makeMarker","labels","severity","multiple","tooltips","marker","inner","annotationTooltip","ann","tip","messageHTML","innerHTML","createTextNode","updateLinting","annotationsNotSorted","options","annotations","lines","line","groupByLine","anns","maxSeverity","tipLabel","createDocumentFragment","formatAnnotation","markText","__annotation","setGutterMarker","onUpdateLinting","startLinting","passOptions","getAnnotations","getHelper","Pos","waitingFor","abort","getValue","arg2","operation","lintAsync","then","issues","timeout","onMouseOver","box","srcElement","coordsChar","spans","findMarksAt","docs","getDocs","docsEl","paddingBottom","borderBottom","popupTooltip","LintState","defineOption","val","old","Init","lintOnChange","getWrapperElement","gutters","getOption","hasLintGutter","Function","defineExtension","ContainerType","parentsAddingChildKeyAtIndent","parents","indent","immediateParent","childKeys","parentsAddingChildKeyToLast","parentsPoppingItemsDeeperThan","RegExps","KEYWORD","RegExp","DICT_COLON","DICT_KEY","QUOTED_STRING","BLOCKSTART_PIPE_OR_ARROW","NUMBER","VARIABLE","findAutocompletionContext","schema","currentIndent","allConfigTypes","t","rootEnvironmentType","available","fields","closestCompositeType","parentTypeDef","parentConfigType","configTypeKey","childTypeKey","childEntriesUnique","typeParamKeys","nonScalarTypeKey","nonScalarType","availableFields","expandAutocompletionContextAtCursor","editor","searchString","hintOptions","getCursor","token","getTokenAt","prevToken","ch","string","end","findRangeInDocumentFromPath","doc","pathPart","contents","part","nodeAtPath","isHelpContextEqual","prev","lineComment","fold","startState","trailingSpace","escaped","inValue","inBlockLiteral","inlineContainers","lastIndent","stream","peek","wasEscaped","wasTrailingSpace","indentation","eatSpace","sol","skipToEnd","match","Dict","List","eol","keyIndent","list","formatReplacement","field","replacement","isCompositeOrList","isCompOrList","tokenIsColon","repeat","buildSuggestion","innerText","isScalarUnionNewLine","searchWithoutQuotes","givenName","scalarType","scalarTypeKey","scalarSuggestions","nonScalarSuggestions","f","checkConfig","codeMirrorDoc","getDoc","yaml","lints","posFromIndex","json","toJSON","validationResult","isValid","reason","AUTO_COMPLETE_AFTER_KEY","performLint","func","wait","args","timestamp","later","last","apply","newArgs","CodeMirrorShimStyle","createGlobalStyle","CodeMirrorWhitespaceStyle","ConfigEditor","_editor","environmentSchema","performInitialPass","onHelpContextChange","flex","showWhitespace","configCode","mode","theme","lineNumbers","readOnly","indentUnit","smartIndent","showCursorWhenSelecting","completeSingle","closeOnUnfocus","keyMap","extraKeys","showHint","execCommand","Tab","undo","redo","foldGutter","editorDidMount","onBeforeChange","onConfigChange","onCursorActivity","getSelection","test","ConfigGeneratorSelect","Select","ofType","PartitionSelect","ConfigEditorConfigPicker","selectedConfigGenerator","selectedPartition","onSelectConfigGenerator","configGenerator","onSelectPartition","partition","PickerContainer","ConfigEditorConfigGeneratorPicker","onCreateSession","ConfigEditorPartitionPicker","partitionSet","CONFIG_PARTITIONS_QUERY","fetchPolicy","partitionSetName","partitions","partitionSetOrError","itemPredicate","itemRenderer","Item","modifiers","noResults","onItemSelect","environmentConfigYaml","onPartitionSelect","rightIcon","isEqual","CONFIG_PRESETS_QUERY","client","presets","localeCompare","partitionsData","CONFIG_PARTITION_SETS_QUERY","partitionSets","partitionSetsOrError","configGenerators","concat","itemListRenderer","itemsParentRef","renderItem","filteredItems","presetItems","partitionSetItems","renderedPresetItems","renderedPartitionSetItems","ulRef","Divider","selection","preset","updatedPreset","onPresetSelect","ModeSelect","ConfigEditorModePicker","getModeFromProps","modeName","modes","getCurrentMode","onModeChange","currentMode","prevMode","singleMode","valid","modeError","activeItem","filterable","CONFIG_EDITOR_ENVIRONMENT_SCHEMA_FRAGMENT","CONFIG_EDITOR_VALIDATION_FRAGMENT","responseToValidationResult","config","response","entries","entry","listIndex","topLevelKey","ConfigTypeSchema","typesInScope","typeLookup","typeInScope","TypeSchemaContainer","renderTypeRecursive","maxDepth","innerIndent","isSelector","fieldData","DictEntry","DictKey","isOptional","Optional","ofTypeKey","nonScalarTypeMarkup","scalarTypeMarkup","ConfigTypeSchemaFragment","code","DictComment","DictBlockComment","ORANGE2","ConfigEditorHelp","allInnerTypes","Container","ConfigScrollWrap","AutocompletionsNote","PipelineNamesContext","SolidJumpBar","select","activateSelect","StringSelect","BasicStringRenderer","itemListPredicate","BasicStringPredicate","SolidJumpBarFragment","ExecutionButtonStatus","PipelineJumpBar","selectedPipelineName","Consumer","pipelineNames","toLowerCase","btnEl","click","ExecutionStartButton","_mounted","_startButton","starting","small","paddingLeft","websocketStatus","OPEN","ExecutionButtonContainer","role","Disabled","OFFLINE","textAlign","Starting","activeText","Ready","ready","titleForRun","handleExecutionResult","obj","startPipelineExecution","launchPipelineExecution","url","openInNewWindow","log","RunStatus","RunStatusDot","NOT_STARTED","MANAGED","STARTED","GREEN2","FAILURE","RED3","RED5","START_PIPELINE_EXECUTION_MUTATION","LAUNCH_PIPELINE_EXECUTION_MUTATION","DELETE_MUTATION","CANCEL_MUTATION","RUN_LAUNCHER_QUERY","PipelineExecutionButtonGroup","useMutation","getVariables","instance","runLauncher","SEND_TO","YAML_SYNTAX_INVALID","ExecutionSessionContainer","preview","editorHelpContext","mounted","onSaveSession","onSolidSubsetChange","solidSubsetQuery","buildExecutionVariables","currentSession","getPipeline","environmentConfigData","err","executionParams","selector","pipelineOrError","getEnvironmentSchema","environmentSchemaOrError","getModeError","getSubsetError","SplitPanelFlexbox","SessionSettingsBar","SolidSelector","ConfigEditorPresetInsertionContainer","ConfigEditorDisplayOptionsContainer","marginLeft","PREVIEW_CONFIG_QUERY","isPipelineConfigValid","zIndex","ExecutionSessionContainerFragment","EnvironmentSchemaOrErrorFragment","ExecutionSessionContainerError","applySelectSession","applyRemoveSession","sessions","remainingKeys","applyChangesToSession","changes","saved","configChangedSinceRun","applyCreateSession","initial","_data","_dataNamespace","getStorageDataForNamespace","namespace","jsonString","useStorage","version","setVersion","newData","writeStorageDataForNamespace","ExecutionTab","editing","onRemove","unsaved","TabContainer","defaultValue","currentTarget","RemoveButton","CROSS","sessionNamesAndKeysHash","ExecutionTabs","onApply","mutator","onSave","ExecutionTabsContainer","GRAY4","PipelineExecutionRoot","vars","session","PipelineExecutionWrapper","TabBarContainer","PIPELINE_EXECUTION_ROOT_QUERY","partialRefetch","FLOW_BRANCH","ERROR","PipelineExecutionSetupRoot","qs","querystring","search","newSession","pathname","Loading","queryResult","LoadingCentering","ASYNC_LAYOUT_SOLID_COUNT","PipelineGraphContainer","selectedHandle","parentHandle","loading","setLoading","layoutSolidKey","setLayoutSolidKey","setLayout","parentSolidKey","_layout","delegateDagrePipelineLayout","PipelineGraphLoading","handleID","SidebarSection","storageKey","onToggle","true","false","null","collapsedByDefault","CollapsingHeaderBar","DisclosureIcon","CHEVRON_DOWN","CHEVRON_UP","SectionInner","Icon","SidebarTitle","SectionHeader","h4","SectionSmallHeader","SidebarSubhead","SectionItemContainer","removeLeadingSpaces","leadingSpaces","every","Description","_container","hasMore","updateHandleState","sel","createRange","selectNodeContents","removeAllRanges","addRange","Mask","ShowMoreHandle","overflowX","TypeExplorer","inputSchemaType","outputSchemaType","recursiveConfigTypes","TypeExplorerFragment","TypeExplorerContainer","typeName","TYPE_EXPLORER_CONTAINER_QUERY","runtimeTypeName","runtimeTypeOrError","TypeWithTooltip","TypeName","RuntimeTypeWithTooltipFragment","TypeList","types","TypeLI","groups","Custom","isBuiltin","groupTypes","renderTypes","TypeListFragment","li","TypeListContainer","TYPE_LIST_CONTAINER_QUERY","TypeListWrapper","runtimeTypes","MetadataEntries","MetadataEntriesTable","cellPadding","cellSpacing","MetadataEntry","MetadataEntryLink","mdStr","MetadataEntryFragment","MarkdownMetadataLink","isExpanded","onView","MarkdownMetadataExpanded","table","OverflowFade","OverflowBanner","CellTruncationProvider","isOverflowing","contentContainerRef","onExpand","defaultExpand","detectOverflow","child","firstElementChild","scrollHeight","LogsRowStructuredContent","eventType","eventIntent","typeCheck","metadataEntries","expectationResult","materialization","operationResult","op","DefaultContent","fontSize","FailureContent","Structured","onCollapse","StructuredContent","StructuredMemoizedContent","renderExpanded","LogsRowStructuredFragment","Row","level","INFO","time","Unstructured","UnstructuredMemoizedContent","LogsRowUnstructuredFragment","ColumnWidthsStorageKey","ColumnWidths","MIN_COLUMN_WIDTH","ColumnWidthsContext","ColumnWidthsProvider","onWidthsChangedFromContext","columnWidths","onWidthsChanged","Header","isDragging","screenX","evt","onResize","handleSide","isDraggable","HeaderContainer","HeaderDragHandle","side","Headers","widths","HeadersContainer","LogsScrollingTable","didResize","LogsScrollingTableMessageFragment","LogsRow","LogsScrollingTableSized","CellMeasurerCache","defaultHeight","fixedWidth","keyMapper","rowIndex","clientsideKey","isAtBottomOrZero","scrollToBottomObserver","onScroll","scrollTop","atTopAndStarting","atBottom","_onScroll","rowRenderer","noContentRenderer","CONSOLE","attachScrollToBottomObserver","filterKey","recomputeGridSize","disconnect","clearAll","forceUpdate","listEl","lastHeight","MutationObserver","rowgroupEl","observe","attributes","subtree","deferredMeasurementCache","rowCount","rowHeight","overscanRowCount","AutoSizer","resizeObserver","measure","RO","contentRect","FilterSpinner","LogsToolbar","onSetFilter","showSpinner","LogsToolbarContainer","FilterInputGroup","spellCheck","rightElement","SMALL_CROSS","LogsToolbarDivider","textTransform","levels","ERASER","since","rel","getElementsByTagName","FaviconsForStatus","RunStatusToPageAttributes","updatePageAttributes","RunStatusPipelineRunFragment","CancelRunButton","inFlight","setInFlight","STOP","res","cancelPipelineExecution","SharedToaster","show","Run","logsFilter","GetDefaultLogFilter","highlightedError","logs","errorNode","onReexecute","mutation","resumeRetry","stepKeys","retryRunId","reexecuteMutation","isUnknown","hoverOpenDelay","Position","BOTTOM","REPEAT","RunWrapper","filteredNodes","allNodes","LogsContainer","canCancel","renderRetry","RunMetadataProvider","RunFragment","RunPipelineRunEventFragment","RunMetadataProviderMessageFragment","q","dict","DEBUG","LogsProvider","_subscription","onHandleMessages","isFirstResponse","nextNodes","nextPipelineStatus","pipelineRunLogs","syncPipelineStatusToApolloCache","subscribeToRun","unsubscribeFromRun","PIPELINE_RUN_LOGS_SUBSCRIPTION","after","local","readFragment","fragmentName","fragment","PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT","writeFragment","textLower","textStep","textType","CRITICAL","bgcolorForLevel","DARK_GRAY2","GOLD2","SolidColumn","SolidColumnContainer","TimestampColumn","TimestampColumnContainer","toISOString","EventTypeColumn","EventTypeColumnContainer","ShowAllButton","button","TypeWrapper","SolidLink","verticalAlign","textOverflow","Invocation","handlePath","InvocationContainer","DependencyRow","DependencyLocalIOName","DependencyHeaderRow","DependencyHeaderCell","ResourceHeader","ResourceContainer","DependencyTable","td","SidebarSolidInvocation","showingAllInvocations","paddingTop","marginTop","SidebarSolidInvocationFragment","SidebarComponent","notebookPath","ROOT_SERVER_URI","encodeURIComponent","background","seamless","HighlightedCodeBlock","_el","configure","languages","highlightBlock","sql","startCase","plugins","ipynb","snowflake","SolidTypeSignature","inputSide","outputSide","TypeSignature","SolidTypeSignatureFragment","Code","SidebarSolidDefinition","getInvocations","showingSubsolids","onClickInvocation","Plugin","kindMetadata","generic","pluginForMetadata","isComposite","hasRequiredResources","requiredResources","configType","requirement","resourceKey","LAYERS","inputDef","outputDef","invocations","SidebarSolidDefinitionFragment","InvocationList","showAll","setShowAll","displayed","SidebarSolidContainer","SIDEBAR_TABBED_CONTAINER_SOLID_QUERY","solidHandle","SidebarPipelineInfo","resources","resource","ContextResourceContainer","ContextResourceHeader","loggers","logger","ContextLoggerContainer","ContextLoggerHeader","SidebarPipelineInfoFragment","TabInfo","SidebarTabbedContainer","typeExplorer","solidHandleID","parentSolidHandleID","activeTab","Tabs","SidebarTabbedContainerPipelineFragment","COBALT3","GRAY2","PipelineExplorer","pathOverlayEl","handleQueryChange","history","handleAdjustPath","visibleSolidsQuery","handleClickSolid","solidNames","handleEnterCompositeSolid","handleLeaveCompositeSolid","handleClickBackground","handles","solidsQueryEnabled","backgroundTranslucent","Color","fade","toString","PipelinesContainer","PathOverlay","SearchOverlay","SolidHighlightInput","RightInfoPanel","PipelineExplorerFragment","PipelineExplorerSolidHandleFragment","PipelineExplorerParentSolidHandleFragment","LargeDAGNotice","LargeDAGContainer","LargeDAGInstructionBox","PIPELINE_EXPLORER_ROOT_QUERY","PipelineExplorerRoot","params","pipelineSelector","pathSolids","parentNames","selectedName","displayedHandles","solidHandles","parentSolidHandle","definitionName","RunRoot","useApolloClient","RUN_ROOT_QUERY","pipelineRunOrError","Legend","LegendColumn","RowContainer","DARK_GRAY5","RowColumn","ScrollContainer","Details","RunTable","runs","RunTableRunFragment","RunRow","details","stats","stepsSucceeded","stepsFailed","expectations","startTime","endTime","startUnix","endUnix","targetTagName","wrapperTagName","borderRight","RunActionsMenu","RunsQueryVariablesContext","reexecute","refetchQueries","RUNS_ROOT_QUERY","destroy","showToastFor","deletePipelineRun","RunTime","_interval","_timeout","possibleError","successMessage","findProviderByToken","providers","tokenizedValuesFromString","tokenizedValueFromString","stringFromValue","TokenizingField","suggestionProviders","suggestionProvidersFilter","maxValues","useState","typed","setTyped","atMaxValues","filteredSuggestionProviders","lastPart","suggestionMatchesTypedText","availableSuggestionsForProvider","provider","final","useEffect","onConfirmText","endsWith","shouldDismissPopover","StyledTagInput","inputValue","splice","onInputChange","inputProps","onAdd","picked","tagProps","TagInput","runsFilterForSearchTokens","RunsRoot","RouterContext","pipelineRunTags","pipelinesOrError","searchSuggestionsForRuns","RUNS_SEARCH_SPACE_QUERY","cursorStack","setCursorStack","setCursor","queryVars","limit","PAGE_SIZE","pollInterval","Filters","setSearch","tokens","limitedTokens","presentLimitedTokens","pipelineRunsOrError","hasPrevPage","hasNextPage","visibility","ARROW_LEFT","nextStack","popCursor","ARROW_RIGHT","nextCursor","SolidCard","SolidCardContainer","Component","SolidCardSolidDefinitionFragment","flatUniq","arrs","SolidsRoot","route","SOLIDS_ROOT_QUERY","usedSolids","SolidsRootWithData","filtered","filterSolidsWithSearch","onSearch","defName","flexDirection","SolidListScrollContainer","SolidListItem","SolidName","SolidDetailScrollContainer","UsedSolidDetails","USED_SOLID_DETAILS_QUERY","usedSolid","ScheduleRow","schedule","scheduleDefinition","logsPath","attempts","attemptsCount","cronSchedule","executionParamsString","START_SCHEDULE_MUTATION","startSchedule","STOP_SCHEDULE_MUTATION","stopSchedule","useRouteMatch","mostRecentAttempt","mostRecentAttemptLogError","jsonResult","ScheduleName","checked","large","innerLabelChecked","innerLabel","scheduleName","optimisticResponse","stopRunningSchedule","STOPPED","TOOLTIP_INDICATOR","cronstrue","getNaturalLanguageCronString","attempt","AttemptStatus","ErrorTag","ButtonLink","ScheduleRowFragment","pre","GOLD3","SchedulesRoot","SCHEDULES_ROOT_QUERY","scheduler","runningSchedules","sortedRunningSchedules","schedules","ScheduleTable","ScheduleRoot","SCHEDULE_ROOT_QUERY","attemptsLimit","scheduleOrError","attemptList","AttemptsTable","boxShadow","ProcessStatus","apollo","socketState","RELOAD_DAGIT_MUTATION","reloadStatus","setReloadStatus","PROCESS_STATUS_QUERY","resetStore","Label","reloadSupported","info","LeftNav","tab","TABS","LogoContainer","navBarImage","LogoWebsocketStatus","TabLabel","GREEN5","GREEN3","CLOSING","Link","AppRoutes","component","exact","names","ROOT_PIPELINES_QUERY","__schema","fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","AppCache","InMemoryCache","addTypename","cacheRedirects","Query","getCacheKey","generated","dataIdFromObject","object","defaultDataIdFromObject","ErrorToaster","Toaster","create","TOP_RIGHT","AppStackTraceLink","stackTraceContent","stack_trace","instructions","fontFamily","locations","clipboardData","setData","GlobalStyle","websocketClient","SubscriptionClient","reconnect","lazy","ApolloClient","ApolloLink","onError","graphQLErrors","networkError","WebSocketLink","pipelines","extractData","getElementById","SCROLLER_LINK_TIMEOUT_MS","showScrollToTop","onScrollUp","cancelHide","scheduleHide","onScrollDown","_position","scrollToTop","ScrollToast","ScrollToTop","onMouseOut","ARROW_UP","isTruncated","Buffer","byteLength","nextLine","truncated","warning","FileWarning","getDownloadUrl","download","isSelected","FileContent","RelativeContainer","LogContent","logData","FileContainer","FileHeader","renderStatus","aria-label","LinkText","renderScrollToTop","renderContent","FileFooter","container","lastScroll","offsetHeight","scrollToBottom","_props","_state","shouldScroll","outline","ContentContainer","LineNumbers","Content","SolarizedColors","linkify","useClasses","matches","LineNumberContainer","String","IStepDisplayIconType","IStepDisplayActionType","itemsForMetadataEntries","metadataEntry","COPY","SHOW_IN_MODAL","OPEN_IN_TAB","LINK","extractMetadataFromLogs","module","exports","Worker","process","REACT_APP_GRAPHQL_URI","protocol","TOP","remove"],"mappings":"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","file":"static/js/main.10a9186d.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { SubscriptionClient } from \"subscriptions-transport-ws\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\n\nexport const WebsocketStatusContext = React.createContext<number>(\n  WebSocket.CONNECTING\n);\n\nconst WS_EVENTS = [\n  \"connecting\",\n  \"connected\",\n  \"reconnecting\",\n  \"reconnected\",\n  \"disconnected\",\n  \"error\"\n];\n\ninterface IWebsocketStatusProviderProps {\n  websocket: SubscriptionClient;\n}\n\ninterface IWebsocketStatusProviderState {\n  status: number;\n}\n\nexport class WebsocketStatusProvider extends React.Component<\n  IWebsocketStatusProviderProps,\n  IWebsocketStatusProviderState\n> {\n  state = {\n    status: WebSocket.CONNECTING\n  };\n\n  private unlisteners: Function[] = [];\n\n  componentDidMount() {\n    this.unlisteners = WS_EVENTS.map(eventName =>\n      this.props.websocket.on(eventName, () =>\n        this.setState({ status: this.props.websocket.status })\n      )\n    );\n    this.setState({ status: this.props.websocket.status });\n  }\n\n  componentWillUnmount() {\n    this.unlisteners.forEach(u => u());\n  }\n\n  render() {\n    return (\n      <WebsocketStatusContext.Provider value={this.state.status}>\n        {this.props.children}\n      </WebsocketStatusContext.Provider>\n    );\n  }\n}\n\nconst Circle = styled.div`\n  align-self: center;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  border-radius: 7px;\n  border: 1px solid rgba(255, 255, 255, 0.6);\n`;\n\nexport const WebsocketStatus: React.FunctionComponent = props => (\n  <WebsocketStatusContext.Consumer>\n    {status =>\n      ({\n        [WebSocket.CONNECTING]: (\n          <Circle\n            style={{ background: Colors.GREEN5 }}\n            title=\"Connecting...\"\n            {...props}\n          />\n        ),\n        [WebSocket.OPEN]: (\n          <Circle\n            style={{ background: Colors.GREEN3 }}\n            title=\"Connected\"\n            {...props}\n          />\n        ),\n        [WebSocket.CLOSING]: (\n          <Circle\n            style={{ background: Colors.GRAY3 }}\n            title=\"Closing...\"\n            {...props}\n          />\n        )\n      }[status] || (\n        <Circle\n          style={{ background: Colors.GRAY3 }}\n          title=\"Disconnected\"\n          {...props}\n        />\n      ))\n    }\n  </WebsocketStatusContext.Consumer>\n);\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Button, Dialog, Classes, Colors } from \"@blueprintjs/core\";\nimport { copyValue } from \"./DomUtils\";\n\nconst CURRENT_ALERT_CHANGED = \"alert-changed\";\n\ninterface ICustomAlert {\n  body: React.ReactNode | string;\n  title: string;\n  copySelector?: string;\n}\n\nlet CurrentAlert: ICustomAlert | null = null;\n\nexport const setCustomAlert = (alert: ICustomAlert | null) => {\n  CurrentAlert = alert;\n  document.dispatchEvent(new CustomEvent(CURRENT_ALERT_CHANGED));\n};\n\nexport const showCustomAlert = (opts: Partial<ICustomAlert>) => {\n  setCustomAlert(Object.assign({ body: \"\", title: \"Error\" }, opts));\n};\n\nexport default class CustomAlertProvider extends React.Component<\n  {},\n  { alert: ICustomAlert | null }\n> {\n  state = { alert: CurrentAlert };\n\n  bodyRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    document.addEventListener(CURRENT_ALERT_CHANGED, () =>\n      this.setState({ alert: CurrentAlert })\n    );\n  }\n\n  render() {\n    const alert = this.state.alert;\n\n    return (\n      <Dialog\n        icon={alert ? \"info-sign\" : undefined}\n        usePortal={true}\n        onClose={() => setCustomAlert(null)}\n        style={{ width: \"auto\", maxWidth: \"80vw\" }}\n        title={alert ? alert.title : \"\"}\n        isOpen={!!alert}\n      >\n        <Body ref={this.bodyRef}>{alert ? alert.body : undefined}</Body>\n        <div className={Classes.DIALOG_FOOTER}>\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n            <Button\n              autoFocus={false}\n              onClick={(e: React.MouseEvent<any, MouseEvent>) => {\n                const copyElement = alert?.copySelector\n                  ? this.bodyRef.current!.querySelector(alert.copySelector)\n                  : this.bodyRef.current;\n                copyValue(e, copyElement?.textContent || \"\");\n              }}\n            >\n              Copy\n            </Button>\n            <Button\n              intent=\"primary\"\n              autoFocus={true}\n              onClick={() => setCustomAlert(null)}\n            >\n              OK\n            </Button>\n          </div>\n        </div>\n      </Dialog>\n    );\n  }\n}\n\nconst Body = styled.div`\n  white-space: pre-line;\n  font-family: Consolas, Menlo, monospace;\n  font-size: 13px;\n  overflow: scroll;\n  max-height: 500px;\n  background: ${Colors.WHITE};\n  border-top: 1px solid ${Colors.LIGHT_GRAY3};\n  padding: 20px;\n  margin: 0;\n  margin-bottom: 20px;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Tag } from \"@blueprintjs/core\";\nimport { IStepDisplayEvent } from \"../RunMetadataProvider\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport { copyValue } from \"../DomUtils\";\n\ninterface DisplayEventProps {\n  event: IStepDisplayEvent;\n}\n\nconst DisplayEventItem: React.FunctionComponent<IStepDisplayEvent[\"items\"][0]> = ({\n  action,\n  actionText,\n  actionValue,\n  text\n}) => {\n  let actionEl: React.ReactNode = actionText;\n\n  if (action === \"copy\") {\n    actionEl = (\n      <DisplayEventLink\n        title={\"Copy to clipboard\"}\n        onClick={e => copyValue(e, actionValue)}\n      >\n        {actionText}\n      </DisplayEventLink>\n    );\n  }\n  if (action === \"open-in-tab\") {\n    actionEl = (\n      <DisplayEventLink\n        href={actionValue}\n        title={`Open in a new tab`}\n        target=\"__blank\"\n      >\n        {actionText}\n      </DisplayEventLink>\n    );\n  }\n  if (action === \"show-in-modal\") {\n    actionEl = (\n      <DisplayEventLink\n        title=\"Show full value\"\n        onClick={() =>\n          showCustomAlert({\n            body: <div style={{ whiteSpace: \"pre-wrap\" }}>{actionValue}</div>,\n            title: \"Value\"\n          })\n        }\n      >\n        {actionText}\n      </DisplayEventLink>\n    );\n  }\n  return (\n    <DisplayEventItemContainer>\n      {text}: {actionEl}\n    </DisplayEventItemContainer>\n  );\n};\n\nexport const DisplayEvent: React.FunctionComponent<DisplayEventProps> = ({\n  event\n}) => (\n  <DisplayEventContainer>\n    <LabelColumn>\n      {\"status\" in event\n        ? IconComponents[(event as any).icon](\"Expectation\")\n        : IconComponents[event.icon](\"Materialization\")}\n      {event.text}\n    </LabelColumn>\n    {event.items.map((item, idx) => (\n      <DisplayEventItem {...item} key={idx} />\n    ))}\n  </DisplayEventContainer>\n);\n\nconst DisplayEventContainer = styled.div`\n  white-space: pre-wrap;\n  font-size: 12px;\n`;\n\nconst LabelColumn = styled.div`\n  display: flex;\n  align-items: baseline;\n  font-weight: 500;\n`;\n\nconst DisplayEventItemContainer = styled.div`\n  display: block;\n  padding-left: 15px;\n`;\n\nconst DisplayEventLink = styled.a`\n  text-decoration: underline;\n  color: inherit;\n  &:hover {\n    color: inherit;\n  }\n`;\n\nconst IconComponents: { [key: string]: (word: string) => React.ReactNode } = {\n  \"dot-success\": (word: string) => (\n    <Tag minimal={true} intent={\"success\"} style={{ marginRight: 4 }}>\n      {word}\n    </Tag>\n  ),\n  \"dot-failure\": (word: string) => (\n    <Tag minimal={true} intent={\"danger\"} style={{ marginRight: 4 }}>\n      {word}\n    </Tag>\n  ),\n  \"dot-pending\": (word: string) => (\n    <Tag minimal={true} intent={\"none\"} style={{ marginRight: 4 }}>\n      {word}\n    </Tag>\n  ),\n  none: (word: string) => (\n    <Tag minimal={true} intent={\"none\"} style={{ marginRight: 4 }}>\n      {word}\n    </Tag>\n  ),\n  file: () => (\n    <img\n      style={{ flexShrink: 0, alignSelf: \"center\" }}\n      src={require(\"../images/icon-file.svg\")}\n      alt=\"file icon\"\n    />\n  ),\n  link: () => (\n    <img\n      style={{ flexShrink: 0, alignSelf: \"center\" }}\n      src={require(\"../images/icon-link.svg\")}\n      alt=\"link icon\"\n    />\n  )\n};\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors, Tag, Intent, Divider } from \"@blueprintjs/core\";\nimport { DisplayEvent } from \"./DisplayEvent\";\nimport { DisclosureTriangle } from \"./ExecutionPlanBox\";\nimport {\n  IExpectationResult,\n  IExpectationResultStatus,\n  IMaterialization\n} from \"../RunMetadataProvider\";\n\ninterface IDisplayEventsProps {\n  expectationResults: IExpectationResult[];\n  materializations: IMaterialization[];\n}\n\ninterface IDisplayEventsState {\n  expectationsExpanded: boolean;\n  materializationsExpanded: boolean;\n}\n\nexport class DisplayEvents extends React.Component<\n  IDisplayEventsProps,\n  IDisplayEventsState\n> {\n  state = {\n    expectationsExpanded: false,\n    materializationsExpanded: true\n  };\n\n  render() {\n    const { expectationsExpanded, materializationsExpanded } = this.state;\n    const { expectationResults, materializations } = this.props;\n\n    const nPassed = expectationResults.filter(\n      e => e.status === IExpectationResultStatus.PASSED\n    ).length;\n    const nFailed = expectationResults.filter(\n      e => e.status === IExpectationResultStatus.FAILED\n    ).length;\n\n    return (\n      <DisplayEventsContainer>\n        {expectationResults.length > 0 && (\n          <div>\n            <div\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\"\n              }}\n            >\n              <DisclosureTriangle\n                expanded={expectationsExpanded}\n                onClick={() =>\n                  this.setState({ expectationsExpanded: !expectationsExpanded })\n                }\n              />\n              <div style={{ width: 4 }} />\n              <span style={{ fontWeight: 500 }}> Expectations</span>&nbsp;\n              <ExpectationsTag intent={nPassed ? Intent.SUCCESS : Intent.NONE}>\n                {nPassed} passed\n              </ExpectationsTag>\n              &nbsp;\n              <ExpectationsTag intent={nFailed ? Intent.DANGER : Intent.NONE}>\n                {nFailed} failed\n              </ExpectationsTag>\n            </div>\n            {expectationsExpanded && (\n              <div>\n                {expectationResults.map((e, idx) => (\n                  <DisplayEvent event={e} key={`${idx}`} />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        {expectationResults.length > 0 && materializations.length > 0 && (\n          <Divider />\n        )}\n        {materializations.length > 0 && (\n          <div>\n            <div\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\"\n              }}\n            >\n              <DisclosureTriangle\n                expanded={materializationsExpanded}\n                onClick={() =>\n                  this.setState({\n                    materializationsExpanded: !materializationsExpanded\n                  })\n                }\n              />\n              <div style={{ width: 4 }} />\n              <span style={{ fontWeight: 500 }}> Materializations</span>&nbsp;\n              <ExpectationsTag intent={Intent.NONE}>\n                {materializations.length} materialized values\n              </ExpectationsTag>\n            </div>\n            {materializationsExpanded &&\n              materializations.map((e, idx) => (\n                <DisplayEvent event={e} key={`${idx}`} />\n              ))}\n          </div>\n        )}\n      </DisplayEventsContainer>\n    );\n  }\n}\n\nconst DisplayEventsContainer = styled.div`\n  color: ${Colors.BLACK};\n  border-top: 1px solid rgba(0, 0, 0, 0.15);\n  margin-top: 4px;\n  padding-left: 16px;\n  padding-top: 6px;\n`;\n\nconst ExpectationsTag = styled(Tag)`\n  font-size: 10px;\n  min-height: 10px;\n  min-width: 10px;\n  padding-right: 4px;\n  padding-left: 4px;\n  padding-top: 0;\n  padding-bottom: 0;\n`;\n","import LRU from \"lru-cache\";\nexport const DEFAULT_RESULT_NAME = \"result\";\n\nexport function unixTimestampToString(unix: number | null) {\n  if (!unix) {\n    return null;\n  }\n  return new Date(unix * 1000).toLocaleString();\n}\n\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait = 100\n): T {\n  let timeout: any | null = null;\n  let args: any[] | null = null;\n  let timestamp = 0;\n  let result: ReturnType<T>;\n\n  function later() {\n    const last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      // eslint-disable-next-line\n      result = func.apply(null, args);\n      args = null;\n    }\n  }\n\n  const debounced = function(...newArgs: any[]) {\n    timestamp = Date.now();\n    args = newArgs;\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n    }\n\n    return result;\n  };\n\n  return (debounced as any) as T;\n}\n\nfunction twoDigit(v: number) {\n  return `${v < 10 ? \"0\" : \"\"}${v}`;\n}\n\nexport function formatStepKey(stepKey: string | null | false) {\n  return (stepKey || \"\").replace(/\\.compute$/, \"\");\n}\n\nexport function formatElapsedTime(msec: number) {\n  let text = \"\";\n\n  if (msec < 0) {\n    text = `0 msec`;\n  } else if (msec < 1000) {\n    // < 1 second, show \"X msec\"\n    text = `${Math.ceil(msec)} msec`;\n  } else {\n    // < 1 hour, show \"42:12\"\n    const sec = Math.round(msec / 1000) % 60;\n    const min = Math.floor(msec / 1000 / 60) % 60;\n    const hours = Math.floor(msec / 1000 / 60 / 60);\n\n    if (hours > 0) {\n      text = `${hours}:${twoDigit(min)}:${twoDigit(sec)}`;\n    } else {\n      text = `${min}:${twoDigit(sec)}`;\n    }\n  }\n  return text;\n}\n\nexport function breakOnUnderscores(str: string) {\n  return str.replace(/_/g, \"_\\u200b\");\n}\n\nexport function patchCopyToRemoveZeroWidthUnderscores() {\n  document.addEventListener(\"copy\", event => {\n    event.preventDefault();\n    if (event.clipboardData) {\n      const text = (window.getSelection() || \"\")\n        .toString()\n        .replace(/_\\u200b/g, \"_\");\n      event.clipboardData.setData(\"Text\", text);\n    }\n  });\n}\n\nexport function memoize<T extends object, R>(\n  fn: (arg: T, ...rest: any[]) => R,\n  hashFn?: (arg: T, ...rest: any[]) => any,\n  hashSize?: number\n): (arg: T, ...rest: any[]) => R {\n  const cache = new LRU(hashSize || 50);\n  return (arg: T, ...rest: any[]) => {\n    const key = hashFn ? hashFn(arg, ...rest) : arg;\n    if (cache.has(key)) {\n      return cache.get(key) as R;\n    }\n    const r = fn(arg, ...rest);\n    cache.set(key, r);\n    return r;\n  };\n}\n\nexport function asyncMemoize<T extends object, R>(\n  fn: (arg: T, ...rest: any[]) => PromiseLike<R>,\n  hashFn?: (arg: T, ...rest: any[]) => any,\n  hashSize?: number\n): (arg: T, ...rest: any[]) => Promise<R> {\n  const cache = new LRU(hashSize || 50);\n  return async (arg: T, ...rest: any[]) => {\n    const key = hashFn ? hashFn(arg, ...rest) : arg;\n    if (cache.has(key)) {\n      return Promise.resolve(cache.get(key) as R);\n    }\n    const r = (await fn(arg, ...rest)) as R;\n    cache.set(key, r);\n    return r;\n  };\n}\n\n// Simple memoization function for methods that take a single object argument.\n// Returns a memoized copy of the provided function which retrieves the result\n// from a cache after the first invocation with a given object.\n//\n// Uses WeakMap to tie the lifecycle of the cache to the lifecycle of the\n// object argument.\n//\nexport function weakmapMemoize<T extends object, R>(\n  fn: (arg: T, ...rest: any[]) => R\n): (arg: T, ...rest: any[]) => R {\n  const cache = new WeakMap();\n  return (arg: T, ...rest: any[]) => {\n    if (cache.has(arg)) {\n      return cache.get(arg);\n    }\n    const r = fn(arg, ...rest);\n    cache.set(arg, r);\n    return r;\n  };\n}\n\nexport function titleOfIO(i: {\n  solid: { name: string };\n  definition: { name: string };\n}) {\n  return i.solid.name !== DEFAULT_RESULT_NAME\n    ? `${i.solid.name}:${i.definition.name}`\n    : i.solid.name;\n}\n\nexport function assertUnreachable(_: never): never {\n  throw new Error(\"Didn't expect to get here\");\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Icon } from \"@blueprintjs/core\";\nimport { IStepState } from \"../RunMetadataProvider\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\ninterface ReexecuteButtonProps {\n  stepKey: string;\n  state: IStepState;\n  executionArtifactsPersisted: boolean;\n  onReexecuteStep?: (stepKey: string) => void;\n}\n\nexport function ReexecuteButton(props: ReexecuteButtonProps) {\n  const {\n    onReexecuteStep,\n    state,\n    executionArtifactsPersisted,\n    stepKey\n  } = props;\n\n  // If callback isnt provided, or the step does not fail or succeed - dont render anything\n  if (\n    !(\n      onReexecuteStep &&\n      [IStepState.FAILED, IStepState.SUCCEEDED].includes(state)\n    )\n  ) {\n    return null;\n  }\n\n  // if execution artifacts are not persisted, we can reexecute but we want to communicate\n  // that we could if configuration was changed\n  if (!executionArtifactsPersisted) {\n    return (\n      <ReExecuteContainer\n        className=\"reexecute\"\n        title=\"Use a persisting storage mode such as 'filesystem' to enable single step re-execution\"\n      >\n        <Icon icon={IconNames.DISABLE} iconSize={15} />\n      </ReExecuteContainer>\n    );\n  }\n\n  return (\n    <ReExecuteContainer\n      className=\"reexecute\"\n      title=\"Re-run just this step with existing configuration.\"\n      style={{ border: `1px solid white` }}\n      onClick={() => onReexecuteStep(stepKey)}\n    >\n      <Icon icon={IconNames.PLAY} iconSize={15} />\n    </ReExecuteContainer>\n  );\n}\n\nconst ReExecuteContainer = styled.div`\n  display: inline-block;\n  margin: 0 5px 0 3px;\n  border-radius: 13px;\n  width: 19px;\n  height: 19px;\n  padding: 1px 2px;\n`;\n","// @generated\n/* tslint:disable */\n/* eslint-disable */\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum ComputeIOType {\n  STDERR = \"STDERR\",\n  STDOUT = \"STDOUT\",\n}\n\nexport enum EvaluationErrorReason {\n  FIELDS_NOT_DEFINED = \"FIELDS_NOT_DEFINED\",\n  FIELD_NOT_DEFINED = \"FIELD_NOT_DEFINED\",\n  MISSING_REQUIRED_FIELD = \"MISSING_REQUIRED_FIELD\",\n  MISSING_REQUIRED_FIELDS = \"MISSING_REQUIRED_FIELDS\",\n  RUNTIME_TYPE_MISMATCH = \"RUNTIME_TYPE_MISMATCH\",\n  SELECTOR_FIELD_ERROR = \"SELECTOR_FIELD_ERROR\",\n}\n\nexport enum LogLevel {\n  CRITICAL = \"CRITICAL\",\n  DEBUG = \"DEBUG\",\n  ERROR = \"ERROR\",\n  INFO = \"INFO\",\n  WARNING = \"WARNING\",\n}\n\nexport enum ObjectStoreOperationType {\n  CP_OBJECT = \"CP_OBJECT\",\n  GET_OBJECT = \"GET_OBJECT\",\n  RM_OBJECT = \"RM_OBJECT\",\n  SET_OBJECT = \"SET_OBJECT\",\n}\n\nexport enum PipelineRunStatus {\n  FAILURE = \"FAILURE\",\n  MANAGED = \"MANAGED\",\n  NOT_STARTED = \"NOT_STARTED\",\n  STARTED = \"STARTED\",\n  SUCCESS = \"SUCCESS\",\n}\n\nexport enum ScheduleAttemptStatus {\n  ERROR = \"ERROR\",\n  SKIPPED = \"SKIPPED\",\n  SUCCESS = \"SUCCESS\",\n}\n\nexport enum ScheduleStatus {\n  ENDED = \"ENDED\",\n  RUNNING = \"RUNNING\",\n  STOPPED = \"STOPPED\",\n}\n\nexport enum StepKind {\n  COMPUTE = \"COMPUTE\",\n}\n\nexport interface ExecutionMetadata {\n  runId?: string | null;\n  tags?: ExecutionTag[] | null;\n}\n\nexport interface ExecutionParams {\n  selector: ExecutionSelector;\n  environmentConfigData?: any | null;\n  mode?: string | null;\n  executionMetadata?: ExecutionMetadata | null;\n  stepKeys?: string[] | null;\n  preset?: string | null;\n  retryRunId?: string | null;\n}\n\nexport interface ExecutionSelector {\n  name: string;\n  solidSubset?: string[] | null;\n}\n\nexport interface ExecutionTag {\n  key: string;\n  value: string;\n}\n\nexport interface PipelineRunsFilter {\n  runId?: string | null;\n  pipelineName?: string | null;\n  tags?: ExecutionTag[] | null;\n  status?: PipelineRunStatus | null;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n","import * as React from \"react\";\nimport { RunFragment } from \"./types/RunFragment\";\n\nconst initialContext = undefined;\nexport const RunContext = React.createContext<RunFragment | undefined>(\n  initialContext\n);\n","import { debounce } from \"lodash\";\nimport { print } from \"graphql/language/printer\";\nimport { WEBSOCKET_URI } from \"./DomUtils\";\n\ntype FlushCallback<T> = (messages: T[], isFirstResponse: boolean) => void;\n\n/* DirectGraphQLSubscription opens a WebSocket and sends a single GraphQL subscription\nquery to the Dagit process. When messages are received, it queues / debounces updates\nand calls onFlushMessages. Using this class is significantly faster than Apollo for\nscenarios whre a large number of messages / objects are received.\n\nIf the connection is broken, the client will attempt to re-open a new socket every 500ms.\nWhen the connection is re-opened, the initial subscription query + variables are re-sent, and\nthe next call to onFlushMessages has `isFirstResponse: true`. (This implementation is not\ncursor-aware and does not pick up where it left off - you should use `isFirstResponse` to\nreset state in preparation for receiving messages again.)\n*/\nexport class DirectGraphQLSubscription<T> {\n  private websocket: WebSocket;\n  private messageQueue: T[] = [];\n  private messagesReceived = false;\n  private onFlushMessages: FlushCallback<T>;\n  private closed = false;\n  private query: any;\n  private variables: any;\n\n  constructor(query: any, variables: any, onFlushMessages: FlushCallback<T>) {\n    this.onFlushMessages = onFlushMessages;\n    this.query = query;\n    this.variables = variables;\n    this.open();\n  }\n\n  open() {\n    const ws = new WebSocket(WEBSOCKET_URI);\n    ws.addEventListener(\"message\", e => {\n      this.handleEvent(JSON.parse(e.data));\n    });\n    ws.addEventListener(\"error\", this.handleRetry);\n    ws.addEventListener(\"close\", this.handleRetry);\n    ws.addEventListener(\"open\", () => {\n      ws.send(JSON.stringify({ type: \"connection_init\", payload: {} }));\n      ws.send(\n        JSON.stringify({\n          id: \"1\",\n          type: \"start\",\n          payload: {\n            extensions: {},\n            variables: this.variables,\n            query: print(this.query)\n          }\n        })\n      );\n    });\n\n    window.addEventListener(\"beforeunload\", this.handleBeforeUnload);\n    this.messagesReceived = false;\n    this.websocket = ws;\n    this.closed = false;\n  }\n\n  close() {\n    this.closed = true;\n    window.removeEventListener(\"beforeunload\", this.handleBeforeUnload);\n    this.websocket.close();\n  }\n\n  handleBeforeUnload = () => {\n    this.close();\n  };\n\n  handleRetry = () => {\n    setTimeout(() => {\n      if (this.closed || this.websocket.readyState !== WebSocket.CLOSED) return;\n      this.websocket.close();\n      this.open();\n    }, 500);\n  };\n\n  handleEvent = (msg: any) => {\n    if (msg.type === \"data\") {\n      this.messageQueue.push(msg.payload.data as T);\n      this.flushUpdates();\n    }\n  };\n\n  flushUpdates = debounce(() => {\n    if (this.closed) return;\n    this.onFlushMessages(this.messageQueue, !this.messagesReceived);\n    this.messagesReceived = true;\n    this.messageQueue = [];\n  });\n}\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Dialog, Spinner, Intent } from \"@blueprintjs/core\";\nimport { RunContext } from \"../runs/RunContext\";\nimport { IStepState } from \"../RunMetadataProvider\";\nimport { DirectGraphQLSubscription } from \"../DirectGraphQLSubscription\";\nimport { ComputeLogContent } from \"./ComputeLogContent\";\nimport { ComputeLogsSubscription } from \"./types/ComputeLogsSubscription\";\nimport { ComputeLogsSubscriptionFragment } from \"./types/ComputeLogsSubscriptionFragment\";\nimport { ComputeLogContentFileFragment } from \"./types/ComputeLogContentFileFragment\";\nimport { ComputeIOType } from \"../types/globalTypes\";\n\nconst MAX_STREAMING_LOG_BYTES = 5242880; // 5 MB\n\ninterface IComputeLogLink {\n  children: React.ReactNode;\n  runState: IStepState;\n  stepKey: string;\n}\n\nexport const ComputeLogLink = ({\n  runState,\n  stepKey,\n  children\n}: IComputeLogLink) => {\n  const [isOpen, setOpen] = React.useState(false);\n  const run = React.useContext(RunContext);\n\n  if (\n    !run ||\n    !run.runId ||\n    runState === IStepState.WAITING ||\n    runState === IStepState.SKIPPED\n  ) {\n    return null;\n  }\n\n  const open = (e: React.SyntheticEvent) => {\n    e.stopPropagation();\n    setOpen(true);\n  };\n  const close = () => setOpen(false);\n\n  return (\n    <>\n      <LogLink onClick={open}>{children}</LogLink>\n      <Dialog\n        onClose={close}\n        style={{\n          width: \"100vw\",\n          height: \"100vh\",\n          margin: 0,\n          padding: 0,\n          borderRadius: 0\n        }}\n        usePortal={true}\n        isOpen={isOpen}\n      >\n        {isOpen ? (\n          <ComputeLogModal\n            runId={run.runId}\n            runState={runState}\n            stepKey={stepKey}\n            onRequestClose={close}\n          />\n        ) : (\n          <LoadingContainer>\n            <Spinner intent={Intent.NONE} size={32} />\n          </LoadingContainer>\n        )}\n      </Dialog>\n    </>\n  );\n};\n\ninterface ComputeLogModalProps {\n  runId: string;\n  stepKey: string;\n  runState: IStepState;\n  onRequestClose: () => void;\n}\n\nexport const ComputeLogModal = ({\n  runId,\n  onRequestClose,\n  stepKey,\n  runState\n}: ComputeLogModalProps) => {\n  return (\n    <ComputeLogsProvider\n      runId={runId}\n      stepKey={stepKey}\n      maxBytes={MAX_STREAMING_LOG_BYTES}\n    >\n      {({ isLoading, stdout, stderr, maxBytes }) => {\n        if (isLoading || !stdout || !stderr) {\n          return (\n            <LoadingContainer>\n              <Spinner intent={Intent.NONE} size={32} />\n            </LoadingContainer>\n          );\n        }\n\n        return (\n          <ComputeLogContent\n            runState={runState}\n            onRequestClose={onRequestClose}\n            stdout={stdout}\n            stderr={stderr}\n            maxBytes={maxBytes}\n          />\n        );\n      }}\n    </ComputeLogsProvider>\n  );\n};\n\ninterface IComputeLogsProviderProps {\n  children: (props: {\n    isLoading: boolean;\n    stdout: ComputeLogsSubscriptionFragment | null;\n    stderr: ComputeLogsSubscriptionFragment | null;\n    maxBytes: number;\n  }) => React.ReactChild;\n  runId: string;\n  stepKey: string;\n  maxBytes: number;\n}\ninterface IComputeLogsProviderState {\n  stdout: ComputeLogsSubscriptionFragment | null;\n  stderr: ComputeLogsSubscriptionFragment | null;\n  isLoading: boolean;\n}\n\nexport class ComputeLogsProvider extends React.Component<\n  IComputeLogsProviderProps,\n  IComputeLogsProviderState\n> {\n  static fragments = {\n    subscription: gql`\n      fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n        data\n        cursor\n        ...ComputeLogContentFileFragment\n      }\n      ${ComputeLogContent.fragments.ComputeLogContentFragment}\n    `\n  };\n\n  _stdout: DirectGraphQLSubscription<ComputeLogsSubscription>;\n  _stderr: DirectGraphQLSubscription<ComputeLogsSubscription>;\n  state: IComputeLogsProviderState = {\n    stdout: null,\n    stderr: null,\n    isLoading: true\n  };\n\n  componentDidMount() {\n    this.subscribe();\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  componentDidUpdate(prevProps: IComputeLogsProviderProps) {\n    if (\n      prevProps.runId !== this.props.runId ||\n      prevProps.stepKey !== this.props.stepKey\n    ) {\n      this.unsubscribe();\n      this.subscribe();\n    }\n  }\n\n  subscribe() {\n    const { runId, stepKey } = this.props;\n    this.setState({ isLoading: true });\n    this._stdout = new DirectGraphQLSubscription<ComputeLogsSubscription>(\n      COMPUTE_LOGS_SUBSCRIPTION,\n      { runId, stepKey, ioType: ComputeIOType.STDOUT, cursor: null },\n      this.onStdout\n    );\n    this._stderr = new DirectGraphQLSubscription<ComputeLogsSubscription>(\n      COMPUTE_LOGS_SUBSCRIPTION,\n      { runId, stepKey, ioType: ComputeIOType.STDERR, cursor: null },\n      this.onStderr\n    );\n  }\n\n  unsubscribe() {\n    if (this._stdout) {\n      this._stdout.close();\n    }\n    if (this._stderr) {\n      this._stderr.close();\n    }\n  }\n\n  onStdout = (messages: ComputeLogsSubscription[], _: boolean) => {\n    this.onMessages(\"stdout\", messages);\n  };\n\n  onStderr = (messages: ComputeLogsSubscription[], _: boolean) => {\n    this.onMessages(\"stderr\", messages);\n  };\n\n  onMessages = (ioType: string, messages: ComputeLogsSubscription[]) => {\n    let computeLogs = this.state[ioType];\n    messages.forEach((subscription: ComputeLogsSubscription) => {\n      computeLogs = this.merge(computeLogs, subscription.computeLogs);\n    });\n\n    if (ioType === \"stdout\") {\n      this.setState({ stdout: computeLogs, isLoading: false });\n    } else {\n      this.setState({ stderr: computeLogs, isLoading: false });\n    }\n  };\n\n  merge(\n    a: ComputeLogContentFileFragment | null,\n    b: ComputeLogContentFileFragment | null\n  ) {\n    if (!b) return a;\n    return {\n      __typename: b.__typename,\n      path: b.path,\n      downloadUrl: b.downloadUrl,\n      data: this.slice((a ? a.data : \"\") + b.data),\n      cursor: b.cursor\n    };\n  }\n\n  slice(s: string) {\n    if (s.length < MAX_STREAMING_LOG_BYTES) {\n      return s;\n    }\n    return s.slice(-MAX_STREAMING_LOG_BYTES);\n  }\n\n  render() {\n    const { isLoading, stdout, stderr } = this.state;\n    const { maxBytes } = this.props;\n    return this.props.children({ isLoading, stdout, stderr, maxBytes });\n  }\n}\n\nconst COMPUTE_LOGS_SUBSCRIPTION = gql`\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(\n      runId: $runId\n      stepKey: $stepKey\n      ioType: $ioType\n      cursor: $cursor\n    ) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ${ComputeLogsProvider.fragments.subscription}\n`;\n\nconst LogLink = styled.a`\n  margin-left: 10px;\n`;\nconst LoadingContainer = styled.div`\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors, Spinner, Intent } from \"@blueprintjs/core\";\nimport {\n  IExpectationResult,\n  IMaterialization,\n  IStepState\n} from \"../RunMetadataProvider\";\nimport { DisplayEvents } from \"./DisplayEvents\";\nimport { formatElapsedTime } from \"../Util\";\nimport { ReexecuteButton } from \"./ReexecuteButton\";\nimport { ComputeLogLink } from \"./ComputeLogModal\";\nimport { ExecutionStateDot } from \"./ExecutionStateDot\";\n\nexport interface IExecutionPlanBoxProps {\n  state: IStepState;\n  stepKey: string;\n  start: number | undefined;\n  finish: number | undefined;\n  delay: number;\n  materializations: IMaterialization[];\n  expectationResults: IExpectationResult[];\n  onShowStateDetails?: (stepName: string) => void;\n  onApplyStepFilter?: (stepName: string) => void;\n  executionArtifactsPersisted: boolean;\n  onReexecuteStep?: (stepKey: string) => void;\n}\n\nexport interface IExecutionPlanBoxState {\n  expanded: boolean;\n  v: number;\n}\n\nexport class ExecutionPlanBox extends React.Component<\n  IExecutionPlanBoxProps,\n  IExecutionPlanBoxState\n> {\n  state = {\n    expanded: false,\n    v: 0\n  };\n\n  timer?: NodeJS.Timer;\n\n  shouldComponentUpdate(\n    nextProps: IExecutionPlanBoxProps,\n    nextState: IExecutionPlanBoxState\n  ) {\n    return (\n      nextProps.state !== this.props.state ||\n      nextProps.stepKey !== this.props.stepKey ||\n      nextProps.finish !== this.props.finish ||\n      nextState.expanded !== this.state.expanded ||\n      nextState.v !== this.state.v\n    );\n  }\n\n  componentDidMount() {\n    this.ensureTimer();\n  }\n\n  componentDidUpdate() {\n    this.ensureTimer();\n  }\n\n  componentWillUnmount() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = undefined;\n    }\n  }\n\n  ensureTimer = () => {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = undefined;\n    }\n\n    const { state, start } = this.props;\n\n    // Schedule another update of the component when the elapsed time\n    // since the `start` timestamp crosses another 1s boundary.\n    if (state === IStepState.RUNNING && start) {\n      const nextMs = 1000 - ((Date.now() - start) % 1000);\n      this.timer = setTimeout(this.onTick, nextMs);\n    }\n  };\n\n  onTick = () => {\n    // bogus state change to trigger a re-render\n    this.setState({ v: this.state.v + 1 });\n  };\n\n  render() {\n    const {\n      state,\n      start,\n      finish,\n      stepKey,\n      delay,\n      expectationResults,\n      materializations,\n      onApplyStepFilter,\n      onReexecuteStep,\n      onShowStateDetails,\n      executionArtifactsPersisted\n    } = this.props;\n\n    const { expanded } = this.state;\n\n    let elapsed = start && finish ? finish - start : undefined;\n    if (state === IStepState.RUNNING && start) {\n      elapsed = Math.floor((Date.now() - start) / 1000) * 1000;\n    }\n\n    return (\n      <>\n        <ExecutionPlanRowContainer>\n          <ExecutionPlanBoxContainer\n            state={state}\n            className={state}\n            style={{ transitionDelay: `${delay}ms` }}\n            onClick={() => onApplyStepFilter && onApplyStepFilter(stepKey)}\n          >\n            <ExecutionFinishedFlash\n              style={{ transitionDelay: `${delay}ms` }}\n              success={state === IStepState.SUCCEEDED}\n            />\n            <div\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\"\n              }}\n            >\n              <ExecutionStateWrap\n                onClick={() =>\n                  onShowStateDetails && onShowStateDetails(stepKey)\n                }\n              >\n                {state === IStepState.RUNNING ? (\n                  <Spinner intent={Intent.NONE} size={11} />\n                ) : (\n                  <ExecutionStateDot\n                    state={state}\n                    title={`${state[0].toUpperCase()}${state.substr(1)}`}\n                    style={{ transitionDelay: `${delay}ms` }}\n                  />\n                )}\n                <div style={{ width: 4 }} />\n                {(expectationResults.length > 0 ||\n                  materializations.length > 0) && (\n                  <DisclosureTriangle\n                    onClick={() => this.setState({ expanded: !expanded })}\n                    expanded={expanded}\n                  />\n                )}\n              </ExecutionStateWrap>\n              <ExecutionPlanBoxName title={stepKey}>\n                {stepKey}\n              </ExecutionPlanBoxName>\n              <ComputeLogLink runState={state} stepKey={stepKey}>\n                Logs\n              </ComputeLogLink>\n              {elapsed !== undefined && <ExecutionTime elapsed={elapsed} />}\n            </div>\n            {expanded && (\n              <DisplayEvents\n                materializations={materializations}\n                expectationResults={expectationResults}\n              />\n            )}\n          </ExecutionPlanBoxContainer>\n          <ReexecuteButton\n            onReexecuteStep={onReexecuteStep}\n            state={state}\n            executionArtifactsPersisted={executionArtifactsPersisted}\n            stepKey={stepKey}\n          />\n        </ExecutionPlanRowContainer>\n      </>\n    );\n  }\n}\n\nconst ExecutionStateWrap = styled.div`\n  display: flex;\n  margin-right: 5px;\n  align-items: center;\n`;\n\nexport const DisclosureTriangle = styled.div<{ expanded: boolean }>`\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 8px solid rgba(0, 0, 0, 0.5);\n  transition: transform 150ms linear;\n  transform: ${({ expanded }) =>\n    expanded ? \"rotate(0deg)\" : \"rotate(-90deg)\"};\n`;\n\nconst ExecutionTime = ({ elapsed }: { elapsed: number }) => {\n  const text = formatElapsedTime(elapsed);\n  // Note: Adding a min-width prevents the size of the execution plan box from\n  // shifting /slightly/ as the elapsed time increments.\n  return (\n    <ExecutionTimeContainer style={{ minWidth: text.length * 6.8 }}>\n      {text}\n    </ExecutionTimeContainer>\n  );\n};\n\nconst ExecutionTimeContainer = styled.div`\n  opacity: 0.7;\n  font-size: 0.9em;\n  margin-left: 10px;\n`;\n\nconst ExecutionPlanBoxName = styled.div`\n  font-weight: 500;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst ExecutionFinishedFlash = styled.div<{ success: boolean }>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    111deg,\n    transparent 30%,\n    rgba(255, 255, 255, 0.7) 65%,\n    transparent 68%\n  );\n  background-size: 150px;\n  background-position-x: ${({ success }) =>\n    success ? `calc(100% + 150px)` : `-150px`};\n  background-repeat: no-repeat;\n  pointer-events: none;\n  transition: ${({ success }) =>\n    success ? \"400ms background-position-x linear\" : \"\"};\n`;\n\nconst ExecutionPlanRowContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  .reexecute {\n    opacity: 0;\n  }\n  &:hover {\n    .reexecute {\n      opacity: 0.5;\n    }\n    .reexecute:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst ExecutionPlanBoxContainer = styled.div<{ state: IStepState }>`\n  background: ${({ state }) =>\n    state === IStepState.WAITING ? Colors.GRAY3 : Colors.LIGHT_GRAY2};\n  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);\n  color: ${Colors.DARK_GRAY3};\n  padding: 4px;\n  padding-right: 10px;\n  margin: 3px;\n  margin-left: 12px;\n  border-radius: 3px;\n  min-width: 150px;\n  position: relative;\n  z-index: 2;\n  transition: background 200ms linear;\n  border: 2px solid transparent;\n  &:hover {\n    cursor: default;\n    color: ${Colors.BLACK};\n    border: 2px solid\n      ${({ state }) =>\n        state === IStepState.WAITING ? Colors.LIGHT_GRAY4 : Colors.WHITE};\n  }\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\n\nexport const AnimatedEllipsis = () => {\n  return (\n    <AnimatedEllipsisContainer>\n      <span>.</span>\n      <span>.</span>\n      <span>.</span>\n    </AnimatedEllipsisContainer>\n  );\n};\n\nconst AnimatedEllipsisContainer = styled.span`\n  @keyframes ellipsis-dot {\n    0% {\n      opacity: 0;\n    }\n    50% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 0;\n    }\n  }\n  span {\n    opacity: 0;\n    animation: ellipsis-dot 1s infinite;\n  }\n  span:nth-child(1) {\n    animation-delay: 0s;\n  }\n  span:nth-child(2) {\n    animation-delay: 0.1s;\n  }\n  span:nth-child(3) {\n    animation-delay: 0.2s;\n  }\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { IStepState } from \"../RunMetadataProvider\";\n\nexport interface IExecutionPlanHiddenStepsBoxProps {\n  numberStepsSkipped: number;\n}\n\nexport class ExecutionPlanHiddenStepsBox extends React.Component<\n  IExecutionPlanHiddenStepsBoxProps\n> {\n  shouldComponentUpdate(nextProps: IExecutionPlanHiddenStepsBoxProps) {\n    return nextProps.numberStepsSkipped !== this.props.numberStepsSkipped;\n  }\n\n  render() {\n    const { numberStepsSkipped } = this.props;\n\n    return (\n      <>\n        <ExecutionPlanRowContainer>\n          <ExecutionPlanBoxContainer\n            state={IStepState.SKIPPED}\n            className={IStepState.SKIPPED}\n          >\n            <div\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\"\n              }}\n            >\n              <ExecutionStateWrap>\n                <div style={{ width: 4 }} />\n              </ExecutionStateWrap>\n              <ExecutionPlanBoxName\n                title={`${numberStepsSkipped} steps hidden`}\n              >\n                {`${numberStepsSkipped} steps hidden`}\n              </ExecutionPlanBoxName>\n            </div>\n          </ExecutionPlanBoxContainer>\n        </ExecutionPlanRowContainer>\n      </>\n    );\n  }\n}\n\nconst ExecutionStateWrap = styled.div`\n  display: flex;\n  margin-right: 5px;\n  align-items: center;\n`;\n\nexport const DisclosureTriangle = styled.div<{ expanded: boolean }>`\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 8px solid rgba(0, 0, 0, 0.5);\n  transition: transform 150ms linear;\n  transform: ${({ expanded }) =>\n    expanded ? \"rotate(0deg)\" : \"rotate(-90deg)\"};\n`;\n\nconst ExecutionPlanBoxName = styled.div`\n  font-weight: 500;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst ExecutionPlanRowContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  .reexecute {\n    opacity: 0;\n  }\n  &:hover {\n    .reexecute {\n      opacity: 0.5;\n    }\n    .reexecute:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst ExecutionPlanBoxContainer = styled.div<{ state: IStepState }>`\n  background: ${Colors.DARK_GRAY4};\n  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);\n  color: ${Colors.LIGHT_GRAY1};\n  padding: 4px;\n  padding-right: 10px;\n  margin: 3px;\n  margin-left: 12px;\n  border-radius: 3px;\n  min-width: 150px;\n  position: relative;\n  z-index: 2;\n  transition: background 200ms linear;\n  border: 2px solid transparent;\n  &:hover {\n    cursor: default;\n    color: ${Colors.BLACK};\n    border: 2px solid\n      ${({ state }) =>\n        state === IStepState.WAITING ? Colors.LIGHT_GRAY4 : Colors.WHITE};\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { ExecutionPlanFragment } from \"./types/ExecutionPlanFragment\";\nimport { ExecutionPlanBox } from \"./ExecutionPlanBox\";\nimport { AnimatedEllipsis } from \"./AnimatedEllipsis\";\nimport { ExecutionPlanHiddenStepsBox } from \"./ExecutionPlanHiddenStepsBox\";\nimport {\n  IRunMetadataDict,\n  IStepState,\n  IStepMetadata\n} from \"../RunMetadataProvider\";\nimport { RunFragment } from \"../runs/types/RunFragment\";\nimport { formatElapsedTime } from \"../Util\";\n\nexport interface IExecutionPlanProps {\n  executionPlan: ExecutionPlanFragment;\n  stepKeysToExecute?: (string | null)[] | null;\n  runMetadata?: IRunMetadataDict;\n  run?: RunFragment;\n  onApplyStepFilter?: (step: string) => void;\n  onShowStateDetails?: (step: string) => void;\n  onReexecuteStep?: (step: string) => void;\n}\n\nconst EMPTY_RUN_METADATA: IRunMetadataDict = {\n  steps: {}\n};\n\nconst EMPTY_STEP_METADATA: IStepMetadata = {\n  state: IStepState.WAITING,\n  start: undefined,\n  finish: undefined,\n  transitionedAt: 0,\n  expectationResults: [],\n  materializations: []\n};\n\nexport class ExecutionPlan extends React.PureComponent<IExecutionPlanProps> {\n  static fragments = {\n    ExecutionPlanFragment: gql`\n      fragment ExecutionPlanFragment on ExecutionPlan {\n        steps {\n          key\n          kind\n        }\n        artifactsPersisted\n      }\n    `\n  };\n\n  renderSkippedSteps(skippedCount: number) {\n    if (skippedCount > 0) {\n      return <ExecutionPlanHiddenStepsBox numberStepsSkipped={skippedCount} />;\n    }\n\n    return null;\n  }\n\n  render() {\n    const haveRun = !!this.props.runMetadata;\n    const {\n      onApplyStepFilter,\n      onShowStateDetails,\n      onReexecuteStep,\n      runMetadata = EMPTY_RUN_METADATA,\n      executionPlan,\n      stepKeysToExecute,\n      run\n    } = this.props;\n\n    const stepsOrderedByTransitionTime = Object.keys(runMetadata.steps).sort(\n      (a, b) =>\n        runMetadata.steps[a].transitionedAt -\n        runMetadata.steps[b].transitionedAt\n    );\n\n    let startDone = false;\n    let startText = null;\n\n    if (haveRun) {\n      startText = (\n        <span>\n          {`Loading`}\n          <AnimatedEllipsis />\n        </span>\n      );\n      if (runMetadata.startingProcessAt) {\n        startText = (\n          <span>\n            {`Process starting`}\n            <AnimatedEllipsis />\n          </span>\n        );\n      }\n      if (runMetadata.processId) {\n        startText = (\n          <span>\n            {`Process (PID ${runMetadata.processId})`}\n            <AnimatedEllipsis />\n          </span>\n        );\n      }\n      if (runMetadata.startedPipelineAt) {\n        startDone = true;\n        startText = (\n          <span>\n            {`Process (PID ${runMetadata.processId}) began pipeline execution`}\n          </span>\n        );\n      } else if (runMetadata.initFailed) {\n        startDone = true;\n        startText = (\n          <span>\n            {`Process (PID ${runMetadata.processId}) pipeline initialization failed!`}\n          </span>\n        );\n      }\n      if (\n        run &&\n        run.pipeline &&\n        run.pipeline.__typename === \"UnknownPipeline\"\n      ) {\n        startDone = true;\n        startText = (\n          <span>\n            Could not load execution plan for pipeline {run.pipeline.name}.\n          </span>\n        );\n      }\n    }\n\n    // Keep track of skipped steps that were not part of the current run\n    let stepsSkippedCount = 0;\n    let prevSkippedCount = 0;\n\n    return (\n      <ExecutionPlanContainer>\n        <ExecutionPlanContainerInner>\n          <ExecutionTimeline />\n          <ExecutionTimelineMessage>\n            <ExecutionTimelineDot completed={startDone} /> {startText}\n          </ExecutionTimelineMessage>\n          {executionPlan &&\n            executionPlan.steps.map(step => {\n              const delay =\n                stepsOrderedByTransitionTime.indexOf(step.key) * 100;\n              const metadata =\n                runMetadata.steps[step.key] || EMPTY_STEP_METADATA;\n\n              // If stepKeysToExecute is null, then all steps are being run\n              const isStepPartOfRun =\n                !stepKeysToExecute || stepKeysToExecute.indexOf(step.key) > -1;\n\n              if (!isStepPartOfRun) {\n                stepsSkippedCount++;\n                return null;\n              } else {\n                prevSkippedCount = stepsSkippedCount;\n                stepsSkippedCount = 0;\n              }\n\n              return (\n                <div key={step.key}>\n                  {this.renderSkippedSteps(prevSkippedCount)}\n                  <ExecutionPlanBox\n                    state={metadata.state}\n                    start={metadata.start}\n                    finish={metadata.finish}\n                    key={step.key}\n                    stepKey={step.key}\n                    expectationResults={metadata.expectationResults}\n                    materializations={metadata.materializations}\n                    onShowStateDetails={onShowStateDetails}\n                    onApplyStepFilter={onApplyStepFilter}\n                    onReexecuteStep={onReexecuteStep}\n                    executionArtifactsPersisted={\n                      executionPlan.artifactsPersisted\n                    }\n                    delay={delay}\n                  />\n                </div>\n              );\n            })}\n          {this.renderSkippedSteps(stepsSkippedCount)}\n          {runMetadata.exitedAt && runMetadata.startedProcessAt && (\n            <ExecutionTimelineMessage>\n              <ExecutionTimelineDot completed={startDone} />\n              <span>\n                {`Process exited in ${formatElapsedTime(\n                  runMetadata.exitedAt - runMetadata.startedProcessAt\n                )}`}\n              </span>\n            </ExecutionTimelineMessage>\n          )}\n        </ExecutionPlanContainerInner>\n      </ExecutionPlanContainer>\n    );\n  }\n}\n\nconst ExecutionPlanContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  color: ${Colors.WHITE};\n  background: #232b2f;\n`;\n\nconst ExecutionPlanContainerInner = styled.div`\n  margin-top: 10px;\n  position: relative;\n  margin-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 0.9em;\n`;\n\nconst ExecutionTimelineMessage = styled.div`\n  display: flex;\n  align-items: center;\n  position: relative;\n  color: ${Colors.LIGHT_GRAY2};\n  margin-top: 3px;\n  margin-bottom: 3px;\n  z-index: 2;\n`;\n\nconst ExecutionTimeline = styled.div`\n  border-left: 1px solid ${Colors.GRAY3};\n  position: absolute;\n  top: 12px;\n  left: 23px;\n  bottom: 15px;\n`;\n\nconst ExecutionTimelineDot = styled.div<{ completed: boolean }>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  margin-right: 8px;\n  background: #232b2f;\n  border: 1px solid\n    ${({ completed }) => (completed ? Colors.LIGHT_GRAY2 : Colors.GRAY1)};\n  margin-left: 18px;\n  flex-shrink: 0;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Button } from \"@blueprintjs/core\";\nimport gql from \"graphql-tag\";\nimport { PythonErrorFragment } from \"./types/PythonErrorFragment\";\n\ninterface IPythonErrorInfoProps {\n  showReload?: boolean;\n  centered?: boolean;\n  contextMsg?: string;\n  error: { message: string } | PythonErrorFragment;\n}\n\nexport default class PythonErrorInfo extends React.Component<\n  IPythonErrorInfoProps\n> {\n  static fragments = {\n    PythonErrorFragment: gql`\n      fragment PythonErrorFragment on PythonError {\n        __typename\n        message\n        stack\n        cause {\n          message\n          stack\n        }\n      }\n    `\n  };\n\n  render() {\n    const message = this.props.error.message;\n    const stack = (this.props.error as PythonErrorFragment).stack;\n    const cause = (this.props.error as PythonErrorFragment).cause;\n\n    const Wrapper = this.props.centered ? ErrorWrapperCentered : ErrorWrapper;\n    const context = this.props.contextMsg ? (\n      <ErrorHeader>{this.props.contextMsg}</ErrorHeader>\n    ) : null;\n\n    return (\n      <Wrapper>\n        {context}\n        <ErrorHeader>{message}</ErrorHeader>\n        <Trace>{stack ? stack.join(\"\") : \"No Stack Provided.\"}</Trace>\n        {cause ? (\n          <>\n            <CauseHeader>\n              The above exception was the direct cause of the following\n              exception:\n            </CauseHeader>\n            <ErrorHeader>{cause.message}</ErrorHeader>\n            <Trace>\n              {cause.stack ? cause.stack.join(\"\") : \"No Stack Provided.\"}\n            </Trace>\n          </>\n        ) : null}\n        {this.props.showReload && (\n          <Button icon=\"refresh\" onClick={() => window.location.reload()}>\n            Reload\n          </Button>\n        )}\n      </Wrapper>\n    );\n  }\n}\n\nconst CauseHeader = styled.h3`\n  font-weight: 400;\n  margin: 1em 0 1em;\n`;\n\nconst ErrorHeader = styled.h3`\n  color: #b05c47;\n  font-weight: 400;\n  margin: 0.5em 0 0.25em;\n`;\n\nconst Trace = styled.div`\n  color: rgb(41, 50, 56);\n  font-family: Consolas, Menlo, monospace;\n  font-size: 0.85em;\n  white-space: pre;\n  overflow-x: auto;\n  padding-bottom: 1em;\n`;\n\nconst ErrorWrapper = styled.div`\n  background-color: rgba(206, 17, 38, 0.05);\n  border: 1px solid #d17257;\n  border-radius: 3px;\n  max-width: 90vw;\n  max-height: 80vh;\n  padding: 1em 2em;\n  overflow: auto;\n`;\n\nconst ErrorWrapperCentered = styled(ErrorWrapper)`\n  position: absolute;\n  left: 50%;\n  top: 100px;\n  transform: translate(-50%, 0);\n`;\n","import * as React from \"react\";\nimport { Classes, Dialog } from \"@blueprintjs/core\";\n\ninterface IInfoModalProps {\n  children: React.ReactElement;\n  title?: string;\n  onRequestClose: () => void;\n}\n\nexport default ({ children, title, onRequestClose }: IInfoModalProps) => {\n  return (\n    <Dialog\n      icon=\"info-sign\"\n      onClose={onRequestClose}\n      style={{ width: \"80vw\", maxWidth: 1400 }}\n      title={title || \"Info\"}\n      usePortal={true}\n      isOpen={true}\n    >\n      <div className={Classes.DIALOG_BODY}>{children}</div>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport gql from \"graphql-tag\";\nimport { NonIdealState, Colors, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { ExecutionPlan } from \"../plan/ExecutionPlan\";\nimport { RunPreviewExecutionPlanResultFragment } from \"./types/RunPreviewExecutionPlanResultFragment\";\nimport { RunPreviewConfigValidationFragment } from \"./types/RunPreviewConfigValidationFragment\";\nimport PythonErrorInfo from \"../PythonErrorInfo\";\nimport InfoModal from \"../InfoModal\";\n\ninterface IRunPreviewProps {\n  plan?: RunPreviewExecutionPlanResultFragment;\n  validation?: RunPreviewConfigValidationFragment;\n}\n\ninterface IErrorMessage {\n  message: string | JSX.Element;\n}\n\nexport class RunPreview extends React.Component<IRunPreviewProps> {\n  static fragments = {\n    RunPreviewConfigValidationFragment: gql`\n      fragment RunPreviewConfigValidationFragment on PipelineConfigValidationResult {\n        __typename\n        ... on PipelineConfigValidationInvalid {\n          errors {\n            reason\n            message\n          }\n        }\n      }\n    `,\n    RunPreviewExecutionPlanResultFragment: gql`\n      fragment RunPreviewExecutionPlanResultFragment on ExecutionPlanResult {\n        __typename\n        ... on ExecutionPlan {\n          ...ExecutionPlanFragment\n        }\n        ... on PipelineNotFoundError {\n          message\n        }\n        ... on InvalidSubsetError {\n          message\n        }\n        ...PythonErrorFragment\n      }\n      ${ExecutionPlan.fragments.ExecutionPlanFragment}\n      ${PythonErrorInfo.fragments.PythonErrorFragment}\n    `\n  };\n\n  state = {\n    showErrorModal: false\n  };\n\n  render() {\n    const { plan, validation } = this.props;\n    let pythonError = null;\n    let errors: IErrorMessage[] = [];\n    if (validation?.__typename === \"PipelineConfigValidationInvalid\") {\n      errors = validation.errors;\n    }\n\n    if (plan?.__typename === \"InvalidSubsetError\") {\n      errors = [plan];\n    }\n\n    if (plan?.__typename === \"PythonError\") {\n      pythonError = plan;\n      const message = (\n        <>\n          PythonError{\" \"}\n          <span\n            style={{ cursor: \"pointer\", textDecoration: \"underline\" }}\n            onClick={() => this.setState({ showErrorModal: true })}\n          >\n            click for details\n          </span>\n        </>\n      );\n      errors = [{ message: message }];\n    }\n\n    return plan?.__typename === \"ExecutionPlan\" ? (\n      <ExecutionPlan executionPlan={plan} />\n    ) : (\n      <NonIdealWrap>\n        <NonIdealState\n          icon={IconNames.SEND_TO_GRAPH}\n          title=\"No Execution Plan\"\n          description={\n            errors.length\n              ? `Fix the ${errors.length.toLocaleString()} ${\n                  errors.length === 1 ? \"error\" : \"errors\"\n                } below to preview the execution plan.`\n              : `Provide valid configuration to see an execution plan.`\n          }\n        />\n        <ErrorsWrap>\n          {errors.map((e, idx) => (\n            <ErrorRow key={idx}>\n              <div style={{ paddingRight: 8 }}>\n                <Icon icon=\"error\" iconSize={14} color={Colors.RED4} />\n              </div>\n              {e.message}\n            </ErrorRow>\n          ))}\n        </ErrorsWrap>\n        {pythonError && this.state.showErrorModal && (\n          <InfoModal\n            onRequestClose={() => this.setState({ showErrorModal: false })}\n          >\n            <PythonErrorInfo error={pythonError} />\n          </InfoModal>\n        )}\n      </NonIdealWrap>\n    );\n  }\n}\n\nconst NonIdealWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  padding-top: 12vh;\n  overflow: auto;\n`;\nconst ErrorsWrap = styled.div`\n  padding-top: 2vh;\n  font-size: 0.9em;\n  color: ${Colors.BLACK};\n`;\n\nconst ErrorRow = styled.div`\n  text-align: left;\n  white-space: pre-wrap;\n  word-break: break-word;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  background: #eee;\n  border-radius: 4px;\n  padding: 10px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  margin-bottom: 8px;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\n\ninterface IDividerProps {\n  axis: \"horizontal\" | \"vertical\";\n  onMove: (vw: number) => void;\n}\ninterface IDividerState {\n  down: boolean;\n}\n\ninterface SplitPanelChildrenProps {\n  identifier: string;\n  left: React.ReactNode;\n  leftInitialPercent: number;\n  leftMinWidth?: number;\n  right: React.ReactNode;\n}\ninterface SplitPanelChildrenState {\n  width: number;\n  key: string;\n}\n\nexport class SplitPanelChildren extends React.Component<\n  SplitPanelChildrenProps,\n  SplitPanelChildrenState\n> {\n  constructor(props: SplitPanelChildrenProps) {\n    super(props);\n\n    const key = `dagit.panel-width.${this.props.identifier}`;\n    let width = Number(window.localStorage.getItem(key));\n    if (width === 0 || isNaN(width)) {\n      width = this.props.leftInitialPercent;\n    }\n\n    this.state = { width, key };\n  }\n\n  onChangeWidth = (vw: number) => {\n    this.setState({ width: vw });\n    window.localStorage.setItem(this.state.key, `${vw}`);\n  };\n\n  render() {\n    const { leftMinWidth, left, right } = this.props;\n    const { width } = this.state;\n\n    return (\n      <>\n        <Split width={width} style={{ flexShrink: 0, minWidth: leftMinWidth }}>\n          {left}\n        </Split>\n        <PanelDivider axis=\"horizontal\" onMove={this.onChangeWidth} />\n        <Split>{right}</Split>\n      </>\n    );\n  }\n}\n\nexport class PanelDivider extends React.Component<\n  IDividerProps,\n  IDividerState\n> {\n  state = {\n    down: false\n  };\n\n  onMouseDown = () => {\n    this.setState({ down: true });\n    const onMouseMove = (event: MouseEvent) => {\n      this.props.onMove(\n        this.props.axis === \"horizontal\"\n          ? (event.clientX * 100) / window.innerWidth\n          : (event.clientY * 100) / window.innerHeight\n      );\n    };\n    const onMouseUp = () => {\n      this.setState({ down: false });\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n    };\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n  };\n\n  render() {\n    const Wrapper = DividerWrapper[this.props.axis];\n    const HitArea = DividerHitArea[this.props.axis];\n    return (\n      <Wrapper down={this.state.down}>\n        <HitArea onMouseDown={this.onMouseDown} />\n      </Wrapper>\n    );\n  }\n}\n\nconst DividerWrapper = {\n  horizontal: styled.div<{ down: boolean }>`\n    width: 4px;\n    background: ${Colors.WHITE};\n    border-left: 1px solid ${p => (p.down ? Colors.GRAY5 : Colors.LIGHT_GRAY2)};\n    border-right: 1px solid ${p => (p.down ? Colors.GRAY3 : Colors.GRAY5)};\n    overflow: visible;\n    position: relative;\n  `,\n  vertical: styled.div<{ down: boolean }>`\n    height: 4px;\n    background: ${Colors.WHITE};\n    border-top: 1px solid ${p => (p.down ? Colors.GRAY5 : Colors.LIGHT_GRAY2)};\n    border-bottom: 1px solid ${p => (p.down ? Colors.GRAY3 : Colors.GRAY5)};\n    overflow: visible;\n    position: relative;\n  `\n};\n\nconst DividerHitArea = {\n  horizontal: styled.div`\n    width: 17px;\n    height: 100%;\n    z-index: 2;\n    cursor: ew-resize;\n    position: relative;\n    left: -8px;\n  `,\n  vertical: styled.div`\n    height: 17px;\n    width: 100%;\n    z-index: 2;\n    cursor: ns-resize;\n    position: relative;\n    top: -8px;\n  `\n};\n\nconst Split = styled.div<{ width?: number }>`\n  ${props => (props.width ? `width: ${props.width}vw` : `flex: 1`)};\n  position: relative;\n  flex-direction: column;\n  display: flex;\n  min-width: 0;\n`;\n","import * as React from \"react\";\nimport animate from \"amator\";\nimport styled from \"styled-components\";\nimport { Slider, Icon, Colors } from \"@blueprintjs/core\";\n\nexport interface SVGViewportInteractor {\n  onMouseDown(\n    viewport: SVGViewport,\n    event: React.MouseEvent<HTMLDivElement>\n  ): void;\n  onWheel(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>): void;\n  render?(viewport: SVGViewport): React.ReactElement<any> | null;\n}\n\ninterface SVGViewportProps {\n  graphWidth: number;\n  graphHeight: number;\n  backgroundColor?: string;\n  interactor: SVGViewportInteractor;\n  onDoubleClick: (event: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown: (event: React.KeyboardEvent<HTMLDivElement>) => void;\n  children: (state: SVGViewportState) => React.ReactNode;\n}\n\ninterface SVGViewportState {\n  x: number;\n  y: number;\n  scale: number;\n  minScale: number;\n}\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\nexport const DETAIL_ZOOM = 0.75;\nexport const MAX_AUTOCENTER_ZOOM = 0.39;\nexport const MIN_AUTOCENTER_ZOOM = 0.15;\nexport const MIN_ZOOM = 0.015;\n\nconst PanAndZoomInteractor: SVGViewportInteractor = {\n  onMouseDown(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>) {\n    if (viewport._animation) {\n      viewport._animation.cancel();\n    }\n\n    if (!viewport.element.current) {\n      return;\n    }\n\n    if (\n      event.target instanceof HTMLElement &&\n      event.target.closest(\"#zoom-slider-container\")\n    ) {\n      return;\n    }\n\n    const start = viewport.getOffsetXY(event);\n    let lastX: number = start.x;\n    let lastY: number = start.y;\n\n    const onMove = (e: MouseEvent) => {\n      const offset = viewport.getOffsetXY(e);\n      const delta = { x: offset.x - lastX, y: offset.y - lastY };\n      viewport.setState({\n        x: viewport.state.x + delta.x,\n        y: viewport.state.y + delta.y\n      });\n      lastX = offset.x;\n      lastY = offset.y;\n    };\n\n    const onUp = () => {\n      document.removeEventListener(\"mousemove\", onMove);\n      document.removeEventListener(\"mouseup\", onUp);\n    };\n    document.addEventListener(\"mousemove\", onMove);\n    document.addEventListener(\"mouseup\", onUp);\n    event.stopPropagation();\n  },\n\n  onWheel(viewport: SVGViewport, event: React.WheelEvent<HTMLDivElement>) {\n    const cursorPosition = viewport.getOffsetXY(event);\n    const targetScale = viewport.state.scale * (1 - event.deltaY * 0.0025);\n    const scale = Math.max(MIN_ZOOM, Math.min(DETAIL_ZOOM, targetScale));\n    viewport.adjustZoomRelativeToScreenPoint(scale, cursorPosition);\n  },\n\n  render(viewport: SVGViewport) {\n    return (\n      <ZoomSliderContainer id=\"zoom-slider-container\">\n        <Icon\n          iconSize={17}\n          icon=\"zoom-in\"\n          style={{ color: Colors.LIGHT_GRAY1, marginBottom: 12 }}\n        />\n        <Slider\n          vertical\n          min={MIN_ZOOM}\n          max={DETAIL_ZOOM}\n          stepSize={0.001}\n          value={viewport.state.scale}\n          labelRenderer={false}\n          onChange={(scale: number) => {\n            const x = viewport.element.current!.clientWidth / 2;\n            const y = viewport.element.current!.clientHeight / 2;\n            viewport.adjustZoomRelativeToScreenPoint(scale, { x, y });\n          }}\n        />\n      </ZoomSliderContainer>\n    );\n  }\n};\n\nexport default class SVGViewport extends React.Component<\n  SVGViewportProps,\n  SVGViewportState\n> {\n  static Interactors = {\n    PanAndZoom: PanAndZoomInteractor\n  };\n\n  element: React.RefObject<HTMLDivElement> = React.createRef();\n  panzoom: any;\n\n  _animation: any = null;\n  _lastWheelTime = 0;\n  _lastWheelDir = 0;\n\n  state = {\n    x: 0,\n    y: 0,\n    scale: DETAIL_ZOOM,\n    minScale: 0\n  };\n\n  componentDidMount() {\n    this.autocenter();\n  }\n\n  cancelAnimations() {\n    if (this._animation) {\n      this._animation.cancel();\n    }\n  }\n\n  autocenter(animate = false) {\n    const el = this.element.current!;\n    const ownerRect = { width: el.clientWidth, height: el.clientHeight };\n\n    const dw = ownerRect.width / this.props.graphWidth;\n    const dh = ownerRect.height / this.props.graphHeight;\n    const desiredScale = Math.min(dw, dh);\n    const boundedScale = Math.max(\n      Math.min(desiredScale, MAX_AUTOCENTER_ZOOM),\n      MIN_AUTOCENTER_ZOOM\n    );\n\n    if (\n      this.state.scale < boundedScale &&\n      desiredScale !== boundedScale &&\n      boundedScale === MIN_AUTOCENTER_ZOOM\n    ) {\n      // If the user is zoomed out past where they're going to land, AND where they're going to land\n      // is not a view of the entire DAG but instead a view of some zoomed section, autocentering is\n      // undesirable and should do nothing.\n      return;\n    }\n    const target = {\n      x: -(this.props.graphWidth / 2) * boundedScale + ownerRect.width / 2,\n      y: -(this.props.graphHeight / 2) * boundedScale + ownerRect.height / 2,\n      scale: boundedScale\n    };\n\n    if (animate) {\n      this.smoothZoom(target);\n    } else {\n      this.setState(Object.assign(target, { minScale: boundedScale }));\n    }\n  }\n\n  screenToSVGCoords({ x, y }: Point): Point {\n    const el = this.element.current!;\n    const { width, height } = el.getBoundingClientRect();\n    return {\n      x: (-(this.state.x - width / 2) + x - width / 2) / this.state.scale,\n      y: (-(this.state.y - height / 2) + y - height / 2) / this.state.scale\n    };\n  }\n\n  getOffsetXY(e: MouseEvent | React.MouseEvent): Point {\n    const el = this.element.current!;\n    const ownerRect = el.getBoundingClientRect();\n    return { x: e.clientX - ownerRect.left, y: e.clientY - ownerRect.top };\n  }\n\n  public adjustZoomRelativeToScreenPoint(nextScale: number, point: Point) {\n    const centerSVGCoord = this.screenToSVGCoords(point);\n    const { scale } = this.state;\n    let { x, y } = this.state;\n    x = x + (centerSVGCoord.x * scale - centerSVGCoord.x * nextScale);\n    y = y + (centerSVGCoord.y * scale - centerSVGCoord.y * nextScale);\n    this.setState({ x, y, scale: nextScale });\n  }\n\n  public smoothZoomToSVGCoords(x: number, y: number, scale: number) {\n    const el = this.element.current!;\n    const ownerRect = el.getBoundingClientRect();\n    x = -x * scale + ownerRect.width / 2;\n    y = -y * scale + ownerRect.height / 2;\n\n    this.smoothZoom({ x, y, scale });\n  }\n\n  public smoothZoom(to: { x: number; y: number; scale: number }) {\n    const from = { scale: this.state.scale, x: this.state.x, y: this.state.y };\n\n    if (this._animation) {\n      this._animation.cancel();\n    }\n\n    this._animation = animate(from, to, {\n      step: (v: any) => {\n        this.setState({\n          x: v.x,\n          y: v.y,\n          scale: v.scale\n        });\n      },\n      done: () => {\n        this.setState(to);\n        this._animation = null;\n      }\n    });\n  }\n\n  onZoomAndCenter = (event: React.MouseEvent<HTMLDivElement>) => {\n    const offset = this.screenToSVGCoords(this.getOffsetXY(event));\n    if (Math.abs(DETAIL_ZOOM - this.state.scale) < 0.01) {\n      this.smoothZoomToSVGCoords(offset.x, offset.y, this.state.minScale);\n    } else {\n      this.smoothZoomToSVGCoords(offset.x, offset.y, DETAIL_ZOOM);\n    }\n  };\n\n  render() {\n    const {\n      children,\n      onKeyDown,\n      onDoubleClick,\n      interactor,\n      backgroundColor\n    } = this.props;\n    const { x, y, scale } = this.state;\n\n    return (\n      <div\n        ref={this.element}\n        style={Object.assign({ backgroundColor }, SVGViewportStyles)}\n        onMouseDown={e => interactor.onMouseDown(this, e)}\n        onWheel={e => interactor.onWheel(this, e)}\n        onDoubleClick={onDoubleClick}\n        onKeyDown={onKeyDown}\n        tabIndex={-1}\n      >\n        <div\n          style={{\n            transformOrigin: `top left`,\n            transform: `matrix(${scale}, 0, 0, ${scale}, ${x}, ${y})`\n          }}\n        >\n          {children(this.state)}\n        </div>\n        {interactor.render && interactor.render(this)}\n      </div>\n    );\n  }\n}\n\n/*\nBG: Not using styled-components here because I need a `ref` to an actual DOM element.\nStyled-component with a ref returns a React component we need to findDOMNode to use.\n*/\nconst SVGViewportStyles: React.CSSProperties = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"relative\",\n  overflow: \"hidden\",\n  userSelect: \"none\"\n};\n\nconst ZoomSliderContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 30px;\n  padding: 16px 8px;\n  background: rgba(245, 248, 250, 0.4);\n`;\n","import { Colors } from \"@blueprintjs/core\";\nimport { scaleOrdinal } from \"@vx/scale\";\n\nconst PipelineColorScale = scaleOrdinal({\n  domain: [\n    \"source\",\n    \"input\",\n    \"inputHighlighted\",\n    \"solid\",\n    \"solidComposite\",\n    \"solidDarker\",\n    \"output\",\n    \"outputHighlighted\",\n    \"materializations\"\n  ],\n  range: [\n    Colors.TURQUOISE5,\n    Colors.TURQUOISE3,\n    Colors.TURQUOISE1,\n    \"#DBE6EE\",\n    \"rgb(230, 219, 238)\",\n    \"#7D8C97\",\n    Colors.BLUE3,\n    Colors.BLUE1,\n    Colors.ORANGE5\n  ]\n});\n\nexport default PipelineColorScale;\n","import * as React from \"react\";\n\nconst PX_TO_UNITS = 0.62;\n\ninterface ISize {\n  width: number;\n  height: number;\n  compressionPriority?: number;\n}\n\nexport interface ISVGEllipseInRectProps\n  extends React.SVGProps<SVGEllipseElement> {\n  x?: number;\n  y?: number;\n  width: number;\n  height: number;\n}\n\n/*\nWraps <ellipse>, but takes a width and height rather than center + radius,\nmaking it compatible with SVGFlowLayoutRect (which inspects it's children's widths.)\n*/\nexport class SVGEllipseInRect extends React.PureComponent<\n  ISVGEllipseInRectProps\n> {\n  render() {\n    const { width, height, x, y, ...rest } = this.props;\n    const rx = width / 2;\n    const ry = height / 2;\n    return (\n      <ellipse\n        cx={(x || 0) + rx}\n        cy={(y || 0) + ry}\n        rx={rx}\n        ry={ry}\n        {...rest}\n      />\n    );\n  }\n}\n\nexport interface ISVGMonospaceTextProps {\n  width?: number;\n  size: number;\n  text: string;\n  allowTwoLines?: boolean;\n}\n\nconst LINE_SPACING = 1.25;\n\nconst clipToLength = (str: string, len: number) => {\n  return str.length > len ? str.substr(0, len - 1) + \"…\" : str;\n};\n\n/*\nWraps <text>, exposes an intrinsic size and automatically truncates with ellipsis\nif it's given a fixed width less than the space required for it's text.\n*/\nexport class SVGMonospaceText extends React.PureComponent<\n  ISVGMonospaceTextProps & React.SVGAttributes<SVGElement>\n> {\n  static intrinsicSizeForProps(props: ISVGMonospaceTextProps): ISize {\n    return {\n      width: Math.min(props.text.length * props.size * PX_TO_UNITS),\n      height: props.size\n    };\n  }\n\n  render() {\n    const { y, width, size, text, allowTwoLines, ...rest } = this.props;\n\n    const lineChars = width\n      ? Math.round(width / (size * PX_TO_UNITS))\n      : text.length;\n    let line1 = \"\";\n    let line2 = \"\";\n\n    if (allowTwoLines) {\n      const parts = text.split(\"_\");\n      while (parts.length && line1.length + parts[0].length <= lineChars) {\n        line1 += parts.shift() + (parts.length > 0 ? \"_\" : \"\");\n      }\n      line2 = clipToLength(parts.join(\"_\"), lineChars);\n    } else {\n      line1 = clipToLength(text, lineChars);\n    }\n\n    const line1Y =\n      (Number(y) || 0) -\n      (line2.length > 0 ? (Number(size) * LINE_SPACING) / 2 : 0);\n\n    const style: React.CSSProperties = {\n      font: `${size}px \"Source Code Pro\", monospace`,\n      pointerEvents: \"none\"\n    };\n\n    return (\n      <>\n        <text\n          {...rest}\n          y={line1Y}\n          style={style}\n          width={line1.length * size * PX_TO_UNITS}\n          height={size}\n          dominantBaseline=\"hanging\"\n        >\n          {line1}\n        </text>\n        {line2 && (\n          <text\n            {...rest}\n            y={line1Y + Number(size) * LINE_SPACING}\n            style={style}\n            width={line2.length * size * PX_TO_UNITS}\n            height={size}\n            dominantBaseline=\"hanging\"\n          >\n            {line2}\n          </text>\n        )}\n      </>\n    );\n  }\n}\n\nexport interface ISVGFlowLayoutRectProps {\n  x?: number;\n  y?: number;\n  width?: number;\n  height: number;\n  padding: number;\n  spacing: number;\n  maxWidth?: number;\n}\n\ninterface SVGFlowLayoutChildLayout {\n  el: React.ReactElement<any>;\n  width: number;\n  height: number;\n  compressionPriority: number;\n}\n\nfunction reactChildrenToArray(children: React.ReactNode) {\n  const flattened: React.ReactNodeArray = [];\n\n  const appendChildren = (arr: React.ReactNodeArray) => {\n    arr.forEach(item => {\n      if (!item) {\n        return;\n      }\n      if (item instanceof Array) {\n        appendChildren(item);\n      } else {\n        flattened.push(item);\n      }\n    });\n  };\n\n  appendChildren(children instanceof Array ? children : [children]);\n\n  return flattened;\n}\n/*\nRenders a <rect> and lays out it's children along a horizontal axis using the\ngiven `padding` and inter-item `spacing`. Children must either have a `width`\nprop or implement an `intrinsicSizeForProps` method that returns {width, height}.\nChildren are cloned and receive x, y, and width props from this parent.\n\nIf width or maxWidth is present, the SVGFlowLayoutRect evenly compresses\nchildren that provided an intrinsic width rather than a fixed prop width to fit\nin the available space. (TODO: Variable compression resistance?)\n*/\nexport class SVGFlowLayoutRect extends React.Component<\n  React.SVGAttributes<SVGElement> & ISVGFlowLayoutRectProps\n> {\n  static intrinsicSizeForProps(props: ISVGFlowLayoutRectProps): ISize {\n    return SVGFlowLayoutRect.computeLayout(props);\n  }\n\n  static computeLayout(\n    props: React.SVGAttributes<SVGElement> & ISVGFlowLayoutRectProps\n  ): {\n    width: number;\n    height: number;\n    childLayouts: Array<SVGFlowLayoutChildLayout>;\n  } {\n    const { children, spacing, padding, height } = props;\n\n    const childLayouts = reactChildrenToArray(children).map(\n      (el: React.ReactElement<any>) => {\n        if (el.type && (el.type as any).intrinsicSizeForProps) {\n          return {\n            el,\n            compressionPriority: 1,\n            ...(el.type as any).intrinsicSizeForProps(el.props)\n          };\n        }\n        if (!el.props || el.props.width === undefined) {\n          console.error(el);\n          throw new Error(\n            `SVGFlowLayoutRect children must have a width prop or implement intrinsicSizeForProps`\n          );\n        }\n        return {\n          el: el,\n          compressionPriority: 0,\n          width: el.props.width,\n          height: el.props.height\n        };\n      }\n    );\n\n    return {\n      width:\n        childLayouts.reduce((sum, dim) => sum + dim.width, 0) +\n        padding * 2 +\n        spacing * (childLayouts.length - 1),\n      height: height,\n      childLayouts: childLayouts\n    };\n  }\n\n  render() {\n    const { x, y, spacing, padding, maxWidth, ...rest } = this.props;\n    const layout = SVGFlowLayoutRect.computeLayout(this.props);\n    rest.children = [];\n\n    // Use the explicit width we're given, fall back to our intrinsic layout width\n    const finalWidth = this.props.width\n      ? this.props.width\n      : Math.min(maxWidth || 10000, layout.width);\n\n    // If the intrinsic layout width is greater than our final width, we need to\n    // compress the child layouts to fit in available space. We compress children\n    // with the highest compressionPriority first, distribute compression evenly\n    // among children with that priority, and then work our way down in priority\n    // until we've created enough space.\n    if (layout.width > finalWidth) {\n      const grouped: {\n        [priority: string]: SVGFlowLayoutChildLayout[];\n      } = {};\n\n      // Group child layouts by compression priority\n      layout.childLayouts.forEach(l => {\n        const p = `${l.compressionPriority}`;\n        grouped[p] = grouped[p] || [];\n        grouped[p].push(l);\n      });\n\n      // Sort priority values so we shrink the most compressible nodes first\n      const priorities = Object.keys(grouped).sort(\n        (a, b) => parseInt(b) - parseInt(a)\n      );\n\n      for (let i = 0; i < priorities.length; i++) {\n        const passLayouts = grouped[priorities[i]];\n        const passWidth = passLayouts.reduce((sum, cl) => sum + cl.width, 0);\n        const ratio =\n          Math.max(1, passWidth - (layout.width - finalWidth)) / passWidth;\n        if (ratio >= 0.99) break;\n\n        passLayouts.forEach(childLayout => (childLayout.width *= ratio));\n        layout.width -= passWidth * (1 - ratio);\n      }\n    }\n\n    let acc = padding;\n\n    // Clone our react children, applying `x`, `y`, and `width`, based on our\n    // computed layout and the desired padding + inter-item spacing.\n    const arranged = layout.childLayouts.map((childLayout, idx) => {\n      const clone = React.cloneElement(childLayout.el, {\n        x: (x || 0) + acc,\n        y: (y || 0) + layout.height / 2 - childLayout.height / 2,\n        width: childLayout.width,\n        key: idx\n      });\n\n      acc += childLayout.width;\n      if (idx + 1 < layout.childLayouts.length) {\n        acc += spacing;\n      }\n      return clone;\n    });\n\n    acc += padding;\n\n    return (\n      <>\n        <rect x={x} y={y} width={finalWidth} height={layout.height} {...rest} />\n        {arranged}\n      </>\n    );\n  }\n}\n\nexport class SVGFlowLayoutFiller extends React.PureComponent {\n  static intrinsicSizeForProps(): ISize {\n    return {\n      compressionPriority: 2,\n      width: 1000,\n      height: 1\n    };\n  }\n  render() {\n    return <g />;\n  }\n}\n\ninterface SVGLabeledRectProps {\n  x: number;\n  y: number;\n  minified: boolean;\n  width: number;\n  height: number;\n  label: string;\n  fill: string;\n  className?: string;\n}\n\nexport const SVGLabeledRect: React.FunctionComponent<SVGLabeledRectProps> = ({\n  minified,\n  label,\n  fill,\n  className,\n  ...rect\n}) => (\n  <g>\n    <rect\n      {...rect}\n      fill={fill}\n      stroke=\"#979797\"\n      strokeWidth={1}\n      className={className}\n    />\n    <SVGMonospaceText\n      x={rect.x + (minified ? 10 : 5)}\n      y={rect.y + (minified ? 10 : 5)}\n      height={undefined}\n      size={minified ? 30 : 16}\n      text={label}\n      fill={\"#979797\"}\n    />\n  </g>\n);\n","import * as React from \"react\";\nimport {\n  SVGFlowLayoutRect,\n  SVGFlowLayoutFiller,\n  SVGMonospaceText\n} from \"./SVGComponents\";\n\nexport interface ISolidTag {\n  label: string;\n  onClick: (e: React.MouseEvent) => void;\n}\n\ninterface ISolidTagsProps {\n  x: number;\n  y: number;\n  width: number;\n  minified: boolean;\n  tags: ISolidTag[];\n}\n\nfunction hueForTag(text = \"\") {\n  if (text === \"ipynb\") return 25;\n  if (text === \"snowflake\") return 197;\n  if (text === \"pyspark\" || text === \"spark\") return 30;\n  return (\n    text\n      .split(\"\")\n      .map(c => c.charCodeAt(0))\n      .reduce((n, a) => n + a) % 360\n  );\n}\n\nconst SolidTags: React.FunctionComponent<ISolidTagsProps> = ({\n  tags,\n  x,\n  y,\n  width,\n  minified\n}) => {\n  const height = minified ? 32 : 20;\n  const overhang = 10;\n\n  return (\n    <SVGFlowLayoutRect\n      x={x}\n      y={y - (height - overhang)}\n      width={width}\n      height={height}\n      fill={\"transparent\"}\n      stroke={\"transparent\"}\n      spacing={minified ? 8 : 4}\n      padding={0}\n    >\n      <SVGFlowLayoutFiller />\n      {tags.map(tag => {\n        const hue = hueForTag(tag.label);\n        return (\n          <SVGFlowLayoutRect\n            key={tag.label}\n            rx={0}\n            ry={0}\n            height={height}\n            padding={minified ? 8 : 4}\n            fill={`hsl(${hue}, 10%, 95%)`}\n            stroke={`hsl(${hue}, 75%, 50%)`}\n            onClick={tag.onClick}\n            strokeWidth={1}\n            spacing={0}\n          >\n            <SVGMonospaceText\n              text={tag.label}\n              fill={`hsl(${hue}, 75%, 50%)`}\n              size={minified ? 24 : 14}\n            />\n          </SVGFlowLayoutRect>\n        );\n      })}\n    </SVGFlowLayoutRect>\n  );\n};\n\nexport default React.memo(SolidTags);\n","import * as React from \"react\";\nimport { Colors } from \"@blueprintjs/core\";\nimport PipelineColorScale from \"./PipelineColorScale\";\nimport { SVGEllipseInRect } from \"./SVGComponents\";\n\ninterface ISolidConfigPortProps {\n  x: number;\n  y: number;\n  minified: boolean;\n}\n\nexport const SolidConfigPort: React.SFC<ISolidConfigPortProps> = ({\n  x,\n  y,\n  minified\n}) => {\n  return (\n    <>\n      <SVGEllipseInRect\n        x={x}\n        y={y}\n        width={26}\n        height={26}\n        stroke={Colors.GRAY3}\n        fill={PipelineColorScale(\"solid\")}\n        pathLength={100}\n        strokeWidth={1}\n        strokeDasharray={`0 50 0`}\n      />\n      <SVGEllipseInRect\n        x={x + 3}\n        y={y + 3}\n        width={20}\n        height={20}\n        stroke={Colors.WHITE}\n        fill={PipelineColorScale(\"solidDarker\")}\n        pathLength={100}\n        strokeWidth={2}\n      />\n      {!minified && (\n        <text\n          x={x + 8}\n          y={y + 7.5}\n          style={{ font: `14px \"Arial\", san-serif` }}\n          fill={Colors.WHITE}\n          dominantBaseline=\"hanging\"\n        >\n          C\n        </text>\n      )}\n    </>\n  );\n};\n","export type Edge = { a: string; b: string };\n\nexport const isHighlighted = (edges: Edge[], { a, b }: Edge) =>\n  edges.some(h => (h.a === a && h.b === b) || (h.b === a && h.a === b));\n\nexport const isSolidHighlighted = (edges: Edge[], name: string) =>\n  edges.some(h => h.a.split(\":\")[0] === name || h.b.split(\":\")[0] === name);\n","import * as React from \"react\";\nimport PipelineColorScale from \"./PipelineColorScale\";\nimport { ILayout } from \"./getFullSolidLayout\";\nimport {\n  SolidNodeDefinitionFragment_SolidDefinition_inputDefinitions,\n  SolidNodeDefinitionFragment_SolidDefinition_outputDefinitions\n} from \"./types/SolidNodeDefinitionFragment\";\nimport {\n  SVGEllipseInRect,\n  SVGFlowLayoutRect,\n  SVGMonospaceText\n} from \"./SVGComponents\";\n\nimport { DEFAULT_RESULT_NAME, titleOfIO } from \"../Util\";\nimport { Edge, isHighlighted } from \"./highlighting\";\nimport { SolidNodeInvocationFragment } from \"./types/SolidNodeInvocationFragment\";\nimport { ParentSolidNodeDefinitionFragment } from \"./types/ParentSolidNodeDefinitionFragment\";\n\nexport const PARENT_IN = \"PARENT_IN\";\nexport const PARENT_OUT = \"PARENT_OUT\";\n\ninterface SolidIORenderMetadata {\n  edges: Edge[];\n  jumpTargetSolid: string | null;\n  title: string;\n}\n\ninterface SolidIOBoxProps extends SolidIORenderMetadata {\n  colorKey: \"input\" | \"output\";\n  item:\n    | SolidNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | SolidNodeDefinitionFragment_SolidDefinition_outputDefinitions;\n  layout: ILayout;\n\n  // Passed through from Solid props\n  minified: boolean;\n  highlightedEdges: Edge[];\n  onDoubleClick: (solidName: string) => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nexport const SolidIOBox: React.FunctionComponent<SolidIOBoxProps> = ({\n  minified,\n  title,\n  jumpTargetSolid,\n  edges,\n  highlightedEdges,\n  layout,\n  colorKey,\n  item,\n  onDoubleClick,\n  onHighlightEdges\n}) => {\n  const { x, y, width, height } = layout;\n  const { name, type } = item;\n  const showText = width === 0 && !minified;\n  const highlighted = edges.some(e => isHighlighted(highlightedEdges, e));\n\n  return (\n    <g\n      onMouseEnter={() => onHighlightEdges(edges)}\n      onMouseLeave={() => onHighlightEdges([])}\n      onClick={e => {\n        jumpTargetSolid && onDoubleClick(jumpTargetSolid);\n        e.stopPropagation();\n      }}\n      onDoubleClick={e => e.stopPropagation()}\n    >\n      <title>{title}</title>\n      <SVGFlowLayoutRect\n        x={x}\n        y={y}\n        stroke=\"#979797\"\n        strokeWidth={1}\n        maxWidth={300}\n        fill={\n          highlighted\n            ? PipelineColorScale(`${colorKey}Highlighted`)\n            : PipelineColorScale(colorKey)\n        }\n        padding={8}\n        spacing={7}\n        height={height}\n      >\n        <SVGEllipseInRect\n          width={14}\n          height={14}\n          fill=\"rgba(0, 0, 0, 0.3)\"\n          stroke=\"white\"\n          strokeWidth={1.5}\n        />\n        {showText && name !== DEFAULT_RESULT_NAME && (\n          <SVGMonospaceText text={`${name}:`} fill=\"#FFF\" size={14} />\n        )}\n        {showText && type.displayName && (\n          <SVGFlowLayoutRect\n            rx={4}\n            ry={4}\n            fill=\"#d6ecff\"\n            stroke=\"#2491eb\"\n            strokeWidth={1}\n            height={27}\n            spacing={0}\n            padding={4}\n          >\n            <SVGMonospaceText text={type.displayName} size={14} fill=\"#222\" />\n          </SVGFlowLayoutRect>\n        )}\n      </SVGFlowLayoutRect>\n    </g>\n  );\n};\n\nexport function metadataForCompositeParentIO(\n  parentDefinition: ParentSolidNodeDefinitionFragment,\n  item:\n    | SolidNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | SolidNodeDefinitionFragment_SolidDefinition_outputDefinitions\n): SolidIORenderMetadata {\n  const edges: Edge[] = [];\n  let title = `${item.name}: ${item.type.displayName}`;\n\n  if (parentDefinition.__typename !== \"CompositeSolidDefinition\") {\n    throw new Error(\"Parent solid is not a composite - how did this happen?\");\n  }\n\n  if (item.__typename === \"InputDefinition\") {\n    const others = parentDefinition.inputMappings\n      .filter(i => i.definition.name === item.name)\n      .map(i => i.mappedInput);\n\n    title += `\\n\\nConnected to: ${others.map(titleOfIO).join(\"\\n\")}`;\n    edges.push(\n      ...others.map(i => ({\n        a: `${i.solid.name}:${i.definition.name}`,\n        b: PARENT_IN\n      }))\n    );\n  }\n  if (item.__typename === \"OutputDefinition\") {\n    const others = parentDefinition.outputMappings\n      .filter(i => i.definition.name === item.name)\n      .map(i => i.mappedOutput);\n\n    title += `\\n\\nConnected to: ${others.map(titleOfIO).join(\"\\n\")}`;\n    edges.push(\n      ...others.map(i => ({\n        a: `${i.solid.name}:${i.definition.name}`,\n        b: PARENT_OUT\n      }))\n    );\n  }\n\n  return {\n    edges,\n    title,\n    jumpTargetSolid: edges.length === 1 ? edges[0].a : null\n  };\n}\n\nexport function metadataForIO(\n  item:\n    | SolidNodeDefinitionFragment_SolidDefinition_inputDefinitions\n    | SolidNodeDefinitionFragment_SolidDefinition_outputDefinitions,\n  invocation?: SolidNodeInvocationFragment\n): SolidIORenderMetadata {\n  const edges: Edge[] = [];\n\n  let title = `${item.name}: ${item.type.displayName}`;\n  let jumpTargetSolid: string | null = null;\n\n  if (invocation && item.__typename === \"InputDefinition\") {\n    const others = invocation.inputs.find(i => i.definition.name === item.name)!\n      .dependsOn;\n    if (others.length) {\n      title += `\\n\\nFrom:\\n` + others.map(titleOfIO).join(\"\\n\");\n      jumpTargetSolid = others.length === 1 ? others[0].solid.name : null;\n      edges.push(...others.map(o => ({ a: o.solid.name, b: invocation.name })));\n    }\n    edges.push({ a: `${invocation.name}:${item.name}`, b: PARENT_IN });\n  }\n  if (invocation && item.__typename === \"OutputDefinition\") {\n    const others = invocation.outputs.find(\n      i => i.definition.name === item.name\n    )!.dependedBy;\n    if (others.length) {\n      title += \"\\n\\nUsed By:\\n\" + others.map(o => titleOfIO(o)).join(\"\\n\");\n      jumpTargetSolid = others.length === 1 ? others[0].solid.name : null;\n      edges.push(...others.map(o => ({ a: o.solid.name, b: invocation.name })));\n    }\n    edges.push({ a: `${invocation.name}:${item.name}`, b: PARENT_OUT });\n  }\n\n  return { edges, title, jumpTargetSolid };\n}\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport PipelineColorScale from \"./PipelineColorScale\";\nimport { IFullSolidLayout } from \"./getFullSolidLayout\";\nimport { SolidNodeInvocationFragment } from \"./types/SolidNodeInvocationFragment\";\nimport { SolidNodeDefinitionFragment } from \"./types/SolidNodeDefinitionFragment\";\nimport { SVGFlowLayoutRect, SVGMonospaceText } from \"./SVGComponents\";\n\nimport SolidTags, { ISolidTag } from \"./SolidTags\";\nimport { SolidConfigPort } from \"./SolidConfigPort\";\nimport { SolidIOBox, metadataForIO } from \"./SolidIOBox\";\nimport { Edge } from \"./highlighting\";\n\ninterface ISolidNodeProps {\n  layout: IFullSolidLayout;\n  invocation?: SolidNodeInvocationFragment;\n  definition: SolidNodeDefinitionFragment;\n  highlightedEdges: Edge[];\n  minified: boolean;\n  selected: boolean;\n  focused: boolean;\n  dim: boolean;\n  onClick: () => void;\n  onDoubleClick: () => void;\n  onEnterComposite: () => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nconst SELECTED_STYLE = {\n  stroke: \"rgba(255, 69, 0, 1)\",\n  fill: \"rgba(255, 69, 0, 0.2)\",\n  dashed: true\n};\nconst FOCUSED_STYLE = {\n  stroke: \"rgba(59, 141, 227, 1)\",\n  fill: \"rgba(59, 141, 227, 0.2)\",\n  dashed: false\n};\n\nexport default class SolidNode extends React.Component<ISolidNodeProps> {\n  static fragments = {\n    SolidNodeInvocationFragment: gql`\n      fragment SolidNodeInvocationFragment on Solid {\n        name\n        inputs {\n          definition {\n            name\n          }\n          dependsOn {\n            definition {\n              name\n              type {\n                displayName\n              }\n            }\n            solid {\n              name\n            }\n          }\n        }\n        outputs {\n          definition {\n            name\n          }\n          dependedBy {\n            solid {\n              name\n            }\n            definition {\n              name\n              type {\n                displayName\n              }\n            }\n          }\n        }\n      }\n    `,\n    SolidNodeDefinitionFragment: gql`\n      fragment SolidNodeDefinitionFragment on ISolidDefinition {\n        __typename\n        name\n        metadata {\n          key\n          value\n        }\n        inputDefinitions {\n          name\n          type {\n            displayName\n          }\n        }\n        outputDefinitions {\n          name\n          type {\n            displayName\n          }\n        }\n        ... on SolidDefinition {\n          configField {\n            configType {\n              key\n              description\n            }\n          }\n        }\n      }\n    `,\n    ParentSolidNodeDefinitionFragment: gql`\n      fragment ParentSolidNodeDefinitionFragment on ISolidDefinition {\n        __typename\n        name\n        metadata {\n          key\n          value\n        }\n        inputDefinitions {\n          name\n          type {\n            displayName\n          }\n        }\n        outputDefinitions {\n          name\n          type {\n            displayName\n          }\n        }\n        ... on SolidDefinition {\n          configField {\n            configType {\n              key\n              description\n            }\n          }\n        }\n        ... on CompositeSolidDefinition {\n          inputMappings {\n            definition {\n              name\n            }\n            mappedInput {\n              definition {\n                name\n              }\n              solid {\n                name\n              }\n            }\n          }\n          outputMappings {\n            definition {\n              name\n            }\n            mappedOutput {\n              definition {\n                name\n              }\n              solid {\n                name\n              }\n            }\n          }\n        }\n      }\n    `\n  };\n\n  shouldComponentUpdate(prevProps: ISolidNodeProps) {\n    if (prevProps.dim !== this.props.dim) return true;\n    if (prevProps.selected !== this.props.selected) return true;\n    if (prevProps.focused !== this.props.focused) return true;\n    if (prevProps.minified !== this.props.minified) return true;\n    if (prevProps.highlightedEdges !== this.props.highlightedEdges) return true;\n    if (prevProps.layout !== this.props.layout) return true;\n    if (\n      (prevProps.invocation && prevProps.invocation.name) !==\n      (this.props.invocation && this.props.invocation.name)\n    )\n      return true;\n    return false;\n  }\n\n  handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onClick();\n  };\n\n  handleDoubleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onDoubleClick();\n  };\n\n  handleEnterComposite = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onEnterComposite();\n  };\n\n  handleKindClicked = (e: React.MouseEvent) => {\n    this.handleClick(e);\n    window.requestAnimationFrame(() =>\n      document.dispatchEvent(new Event(\"show-kind-info\"))\n    );\n  };\n\n  renderSurroundingBox(style: {\n    stroke: string;\n    fill: string;\n    dashed: boolean;\n  }) {\n    const { x, y, width, height } = this.props.layout.boundingBox;\n    return (\n      <rect\n        x={x - 10}\n        y={y - 10}\n        width={width + 20}\n        height={\n          height +\n          (this.props.definition.outputDefinitions.length > 0 ? 20 : 30)\n        }\n        stroke={style.stroke}\n        fill={style.fill}\n        strokeWidth={this.props.minified ? 5 : 3}\n        strokeDasharray={\n          style.dashed ? (this.props.minified ? 8 : 4) : undefined\n        }\n      />\n    );\n  }\n\n  renderSolid() {\n    const { invocation, definition, layout, minified } = this.props;\n    const composite = definition.__typename === \"CompositeSolidDefinition\";\n\n    return (\n      <SVGFlowLayoutRect\n        {...layout.solid}\n        fill={PipelineColorScale(composite ? \"solidComposite\" : \"solid\")}\n        stroke=\"#979797\"\n        strokeWidth={1}\n        spacing={0}\n        padding={12}\n      >\n        <SVGMonospaceText\n          size={minified ? 30 : 16}\n          allowTwoLines={!minified}\n          text={invocation ? invocation.name : definition.name}\n          fill={\"#222\"}\n        />\n      </SVGFlowLayoutRect>\n    );\n  }\n\n  public renderSolidCompositeIndicator() {\n    const { x, y, width, height } = this.props.layout.solid;\n    return (\n      <>\n        <rect\n          x={x - 6}\n          y={y - 6}\n          width={width + 12}\n          height={height + 12}\n          fill={PipelineColorScale(\"solidComposite\")}\n          stroke=\"#979797\"\n          strokeWidth={1}\n        />\n        <rect\n          x={x - 3}\n          y={y - 3}\n          width={width + 6}\n          height={height + 6}\n          fill={PipelineColorScale(\"solidComposite\")}\n          stroke=\"#979797\"\n          strokeWidth={1}\n        />\n      </>\n    );\n  }\n\n  public render() {\n    const {\n      definition,\n      invocation,\n      layout,\n      dim,\n      focused,\n      selected,\n      minified\n    } = this.props;\n    const { metadata } = definition;\n    const { x, y, width, height } = layout.solid;\n\n    let configField = null;\n    if (definition.__typename === \"SolidDefinition\") {\n      configField = definition.configField;\n    }\n\n    const tags: ISolidTag[] = [];\n\n    const kind = metadata.find(m => m.key === \"kind\");\n    const composite = definition.__typename === \"CompositeSolidDefinition\";\n\n    if (kind) {\n      tags.push({ label: kind.value, onClick: this.handleKindClicked });\n    }\n    if (composite) {\n      tags.push({ label: \"Expand\", onClick: this.handleEnterComposite });\n    }\n\n    return (\n      <g\n        onClick={this.handleClick}\n        onDoubleClick={this.handleDoubleClick}\n        opacity={dim ? 0.3 : undefined}\n      >\n        {selected\n          ? this.renderSurroundingBox(SELECTED_STYLE)\n          : focused\n          ? this.renderSurroundingBox(FOCUSED_STYLE)\n          : undefined}\n\n        {composite && this.renderSolidCompositeIndicator()}\n\n        {this.renderSolid()}\n\n        {definition.inputDefinitions.map((item, idx) => (\n          <SolidIOBox\n            {...this.props}\n            {...metadataForIO(item, invocation)}\n            key={idx}\n            item={item}\n            layout={layout.inputs[item.name].layout}\n            colorKey=\"input\"\n          />\n        ))}\n\n        {definition.outputDefinitions.map((item, idx) => (\n          <SolidIOBox\n            {...this.props}\n            {...metadataForIO(item, invocation)}\n            key={idx}\n            item={item}\n            layout={layout.outputs[item.name].layout}\n            colorKey=\"output\"\n          />\n        ))}\n\n        {configField && (\n          <SolidConfigPort x={x + width - 33} y={y - 13} minified={minified} />\n        )}\n\n        {tags.length > 0 && (\n          <SolidTags\n            x={x}\n            y={y + height}\n            width={width + 5}\n            minified={minified}\n            tags={tags}\n          />\n        )}\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { pathVerticalDiagonal } from \"@vx/shape\";\nimport {\n  ILayoutConnection,\n  IFullPipelineLayout,\n  IFullSolidLayout\n} from \"./getFullSolidLayout\";\nimport styled from \"styled-components/macro\";\nimport { weakmapMemoize } from \"../Util\";\n\nexport type Edge = { a: string; b: string };\n\nconst buildSVGPath = pathVerticalDiagonal({\n  source: (s: any) => s.source,\n  target: (s: any) => s.target,\n  x: (s: any) => s.x,\n  y: (s: any) => s.y\n});\n\nconst buildSVGPaths = weakmapMemoize(\n  (\n    connections: ILayoutConnection[],\n    solids: { [name: string]: IFullSolidLayout }\n  ) =>\n    connections.map(({ from, to }) => ({\n      path: buildSVGPath({\n        // can also use from.point for the \"Dagre\" closest point on node\n        source: solids[from.solidName].outputs[from.edgeName].port,\n        target: solids[to.solidName].inputs[to.edgeName].port\n      }),\n      from,\n      to\n    }))\n);\n\nexport const SolidLinks = React.memo(\n  (props: {\n    opacity: number;\n    layout: IFullPipelineLayout;\n    connections: ILayoutConnection[];\n    onHighlight: (arr: Edge[]) => void;\n  }) => (\n    <g opacity={props.opacity}>\n      {buildSVGPaths(props.connections, props.layout.solids).map(\n        ({ path, from, to }, idx) => (\n          <g\n            key={idx}\n            onMouseLeave={() => props.onHighlight([])}\n            onMouseEnter={() =>\n              props.onHighlight([{ a: from.solidName, b: to.solidName }])\n            }\n          >\n            <StyledPath d={path} />\n          </g>\n        )\n      )}\n    </g>\n  )\n);\n\nSolidLinks.displayName = \"SolidLinks\";\n\nconst StyledPath = styled(\"path\")`\n  stroke-width: 6;\n  stroke: ${Colors.BLACK};\n  fill: none;\n`;\n","import * as React from \"react\";\nimport { SVGMonospaceText } from \"./SVGComponents\";\nimport { LinkVertical as Link } from \"@vx/shape\";\nimport { IPoint } from \"./getFullSolidLayout\";\nimport { Edge } from \"./SolidLinks\";\nimport { isHighlighted } from \"./highlighting\";\nimport { Colors } from \"@blueprintjs/core\";\nimport styled from \"styled-components/macro\";\n\ninterface ExternalConnectionNodeProps {\n  layout: IPoint;\n  target: IPoint;\n  labelAttachment: \"top\" | \"bottom\";\n  label: string;\n  minified: boolean;\n\n  // Passed through from Solid props\n  edges: Edge[];\n  highlightedEdges: Edge[];\n  onHighlightEdges: (edges: Edge[]) => void;\n  onDoubleClickLabel: () => void;\n}\n\nexport const ExternalConnectionNode: React.FunctionComponent<ExternalConnectionNodeProps> = ({\n  layout,\n  target,\n  edges,\n  label,\n  labelAttachment,\n  minified,\n  highlightedEdges,\n  onHighlightEdges,\n  onDoubleClickLabel\n}) => {\n  const textProps = { width: 0, size: minified ? 24 : 12, text: label };\n  const textSize = SVGMonospaceText.intrinsicSizeForProps(textProps);\n  const highlighted = edges.some(e => isHighlighted(highlightedEdges, e));\n  const color = highlighted ? \"#555\" : \"#C7CBCD\";\n\n  // https://github.com/dagster-io/dagster/issues/1504\n  if (!layout) {\n    return null;\n  }\n\n  const textOrigin = {\n    x: layout.x - textSize.width / 2,\n    y: layout.y + (labelAttachment === \"top\" ? -10 - textSize.height : 10)\n  };\n\n  return (\n    <g\n      onMouseEnter={() => onHighlightEdges(edges)}\n      onMouseLeave={() => onHighlightEdges([])}\n    >\n      <BackingRect\n        {...textSize}\n        {...textOrigin}\n        onClick={e => e.stopPropagation()}\n        onDoubleClick={e => {\n          e.stopPropagation();\n          onDoubleClickLabel();\n        }}\n      />\n      <ellipse cx={layout.x} cy={layout.y} rx={7} ry={7} fill={color} />\n      <SVGMonospaceText {...textProps} {...textSize} {...textOrigin} />\n      <Link\n        style={{ stroke: color, strokeWidth: 6, fill: \"none\" }}\n        data={{ source: layout, target }}\n      />\n    </g>\n  );\n};\n\nconst BackingRect = styled(\"rect\")`\n  stroke-width: 10px;\n  fill: ${Colors.LIGHT_GRAY3};\n  stroke: ${Colors.LIGHT_GRAY3};\n  &:hover {\n    fill: ${Colors.LIGHT_GRAY1};\n    stroke: ${Colors.LIGHT_GRAY1};\n  }\n`;\n","import * as React from \"react\";\nimport { Edge } from \"./SolidLinks\";\nimport { IPoint } from \"./getFullSolidLayout\";\nimport { isHighlighted } from \"./highlighting\";\n\ninterface MappingLineProps {\n  source: IPoint;\n  target: IPoint;\n  leftEdgeX: number;\n  minified: boolean;\n  edge: Edge;\n\n  highlightedEdges: Edge[];\n  onHighlightEdges: (edges: Edge[]) => void;\n}\nexport const MappingLine: React.FunctionComponent<MappingLineProps> = ({\n  source,\n  target,\n  minified,\n  leftEdgeX,\n  edge,\n  highlightedEdges,\n  onHighlightEdges\n}) => {\n  const highlighted = isHighlighted(highlightedEdges, edge);\n\n  return (\n    <g\n      onMouseEnter={() => onHighlightEdges([edge])}\n      onMouseLeave={() => onHighlightEdges([])}\n    >\n      <path\n        d={`M ${source.x} ${source.y} H ${leftEdgeX} V ${target.y} H ${target.x}`}\n        fill=\"none\"\n        strokeWidth={minified ? 6 : 5}\n        strokeLinecap=\"round\"\n        stroke={highlighted ? \"black\" : \"rgb(137, 206, 206)\"}\n      />\n      <path\n        d={`M ${source.x} ${source.y} H ${leftEdgeX} V ${target.y} H ${target.x}`}\n        fill=\"none\"\n        strokeWidth={4}\n        strokeLinecap=\"round\"\n        stroke=\"white\"\n      />\n    </g>\n  );\n};\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { IFullPipelineLayout } from \"./getFullSolidLayout\";\nimport { PipelineGraphParentSolidFragment } from \"./types/PipelineGraphParentSolidFragment\";\nimport { SVGLabeledRect } from \"./SVGComponents\";\nimport { Edge } from \"./highlighting\";\nimport { ExternalConnectionNode } from \"./ExternalConnectionNode\";\nimport { MappingLine } from \"./MappingLine\";\nimport { titleOfIO } from \"../Util\";\nimport { SolidNameOrPath } from \"../PipelineExplorer\";\nimport {\n  SolidIOBox,\n  metadataForCompositeParentIO,\n  PARENT_OUT,\n  PARENT_IN\n} from \"./SolidIOBox\";\n\ninterface ParentSolidNodeProps {\n  layout: IFullPipelineLayout;\n  solid: PipelineGraphParentSolidFragment;\n  minified: boolean;\n\n  highlightedEdges: Edge[];\n  onDoubleClick: (solidName: string) => void;\n  onClickSolid: (arg: SolidNameOrPath) => void;\n  onHighlightEdges: (edges: Edge[]) => void;\n}\n\nexport const ParentSolidNode: React.FunctionComponent<ParentSolidNodeProps> = props => {\n  const { layout, solid, minified } = props;\n\n  const def = props.solid.definition;\n  if (def.__typename !== \"CompositeSolidDefinition\") {\n    throw new Error(\"Parent solid is not a composite - how did this happen?\");\n  }\n\n  const parentLayout = layout.parent;\n  if (!parentLayout) {\n    throw new Error(\"Parent solid rendered when no parent layout is present.\");\n  }\n\n  const { boundingBox, mappingLeftEdge, mappingLeftSpacing } = parentLayout;\n  const highlightingProps = {\n    highlightedEdges: props.highlightedEdges,\n    onHighlightEdges: props.onHighlightEdges,\n    onDoubleClick: props.onDoubleClick,\n    onClickSolid: props.onClickSolid\n  };\n\n  if (boundingBox.height < 0 || boundingBox.width < 0) {\n    return <g />;\n  }\n  return (\n    <>\n      <SVGLabeledParentRect\n        {...boundingBox}\n        label={solid.definition.name}\n        fill={Colors.LIGHT_GRAY5}\n        minified={minified}\n      />\n      {def.inputMappings.map(({ definition, mappedInput }, idx) => {\n        const destination = layout.solids[mappedInput.solid.name];\n        if (!destination) return <g />;\n        const sourcePort = parentLayout.inputs[definition.name].port;\n        const trgtPort = destination.inputs[mappedInput.definition.name].port;\n\n        return (\n          <MappingLine\n            {...highlightingProps}\n            key={`in-${idx}`}\n            target={trgtPort}\n            source={sourcePort}\n            minified={minified}\n            leftEdgeX={mappingLeftEdge - idx * mappingLeftSpacing}\n            edge={{ a: titleOfIO(mappedInput), b: PARENT_IN }}\n          />\n        );\n      })}\n      {def.outputMappings.map(({ definition, mappedOutput }, idx) => {\n        const destination = layout.solids[mappedOutput.solid.name];\n        if (!destination) return <g />;\n        const sourcePort = parentLayout.outputs[definition.name].port;\n        const trgtPort = destination.outputs[mappedOutput.definition.name].port;\n\n        return (\n          <MappingLine\n            {...highlightingProps}\n            key={`out-${idx}`}\n            target={trgtPort}\n            source={sourcePort}\n            minified={minified}\n            leftEdgeX={mappingLeftEdge - idx * mappingLeftSpacing}\n            edge={{ a: titleOfIO(mappedOutput), b: PARENT_OUT }}\n          />\n        );\n      })}\n      {solid.definition.inputDefinitions.map((input, idx) => {\n        const metadata = metadataForCompositeParentIO(solid.definition, input);\n        const invocationInput = solid.inputs.find(\n          i => i.definition.name === input.name\n        )!;\n\n        return (\n          <React.Fragment key={idx}>\n            {invocationInput.dependsOn.map((dependsOn, iidx) => (\n              <ExternalConnectionNode\n                {...highlightingProps}\n                {...metadata}\n                key={iidx}\n                labelAttachment=\"top\"\n                label={titleOfIO(dependsOn)}\n                minified={minified}\n                layout={parentLayout.dependsOn[titleOfIO(dependsOn)]}\n                target={parentLayout.inputs[input.name].port}\n                onDoubleClickLabel={() =>\n                  props.onClickSolid({ path: [\"..\", dependsOn.solid.name] })\n                }\n              />\n            ))}\n            <SolidIOBox\n              {...highlightingProps}\n              {...metadata}\n              minified={minified}\n              colorKey=\"input\"\n              item={input}\n              layout={parentLayout.inputs[input.name].layout}\n            />\n          </React.Fragment>\n        );\n      })}\n      {solid.definition.outputDefinitions.map((output, idx) => {\n        const metadata = metadataForCompositeParentIO(solid.definition, output);\n        const invocationOutput = solid.outputs.find(\n          i => i.definition.name === output.name\n        )!;\n\n        return (\n          <React.Fragment key={idx}>\n            {invocationOutput.dependedBy.map((dependedBy, iidx) => (\n              <ExternalConnectionNode\n                {...highlightingProps}\n                {...metadata}\n                key={iidx}\n                labelAttachment=\"bottom\"\n                label={titleOfIO(dependedBy)}\n                minified={minified}\n                layout={parentLayout.dependedBy[titleOfIO(dependedBy)]}\n                target={parentLayout.outputs[output.name].port}\n                onDoubleClickLabel={() =>\n                  props.onClickSolid({ path: [\"..\", dependedBy.solid.name] })\n                }\n              />\n            ))}\n            <SolidIOBox\n              {...highlightingProps}\n              {...metadata}\n              minified={minified}\n              colorKey=\"output\"\n              item={output}\n              layout={parentLayout.outputs[output.name].layout}\n            />\n          </React.Fragment>\n        );\n      })}\n    </>\n  );\n};\n\nexport const SVGLabeledParentRect = styled(SVGLabeledRect)`\n  transition: x 250ms ease-out, y 250ms ease-out, width 250ms ease-out,\n    height 250ms ease-out;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport SVGViewport, { DETAIL_ZOOM, SVGViewportInteractor } from \"./SVGViewport\";\nimport { SolidNameOrPath } from \"../PipelineExplorer\";\nimport SolidNode from \"./SolidNode\";\nimport { IFullPipelineLayout, IFullSolidLayout } from \"./getFullSolidLayout\";\nimport { PipelineGraphSolidFragment } from \"./types/PipelineGraphSolidFragment\";\nimport { PipelineGraphParentSolidFragment } from \"./types/PipelineGraphParentSolidFragment\";\nimport { SolidLinks } from \"./SolidLinks\";\nimport { Edge, isHighlighted, isSolidHighlighted } from \"./highlighting\";\nimport { ParentSolidNode, SVGLabeledParentRect } from \"./ParentSolidNode\";\n\nconst NoOp = () => {};\n\ninterface IPipelineGraphProps {\n  pipelineName: string;\n  backgroundColor: string;\n  layout: IFullPipelineLayout;\n  solids: PipelineGraphSolidFragment[];\n  focusSolids: PipelineGraphSolidFragment[];\n  parentHandleID?: string;\n  parentSolid?: PipelineGraphParentSolidFragment;\n  selectedHandleID?: string;\n  selectedSolid?: PipelineGraphSolidFragment;\n  highlightedSolids: Array<PipelineGraphSolidFragment>;\n  interactor?: SVGViewportInteractor;\n  onClickSolid?: (arg: SolidNameOrPath) => void;\n  onDoubleClickSolid?: (arg: SolidNameOrPath) => void;\n  onEnterCompositeSolid?: (arg: SolidNameOrPath) => void;\n  onLeaveCompositeSolid?: () => void;\n  onClickBackground?: () => void;\n}\n\ninterface IPipelineContentsProps extends IPipelineGraphProps {\n  minified: boolean;\n  layout: IFullPipelineLayout;\n}\n\ninterface IPipelineContentsState {\n  highlighted: Edge[];\n}\n\nexport class PipelineGraphContents extends React.PureComponent<\n  IPipelineContentsProps,\n  IPipelineContentsState\n> {\n  state: IPipelineContentsState = {\n    highlighted: []\n  };\n\n  onHighlightEdges = (highlighted: Edge[]) => {\n    this.setState({ highlighted });\n  };\n\n  render() {\n    const {\n      layout,\n      minified,\n      solids,\n      focusSolids,\n      parentSolid,\n      parentHandleID,\n      onClickSolid = NoOp,\n      onDoubleClickSolid = NoOp,\n      onEnterCompositeSolid = NoOp,\n      highlightedSolids,\n      selectedSolid,\n      selectedHandleID\n    } = this.props;\n\n    return (\n      <>\n        {parentSolid &&\n          layout.parent &&\n          layout.parent.invocationBoundingBox.width > 0 && (\n            <SVGLabeledParentRect\n              {...layout.parent.invocationBoundingBox}\n              key={`composite-rect-${parentHandleID}`}\n              label={parentSolid.name}\n              fill={Colors.LIGHT_GRAY5}\n              minified={minified}\n            />\n          )}\n        {selectedSolid && (\n          // this rect is hidden beneath the user's selection with a React key so that\n          // when they expand the composite solid React sees this component becoming\n          // the one above and re-uses the DOM node. This allows us to animate the rect's\n          // bounds from the parent layout to the inner layout with no React state.\n          <SVGLabeledParentRect\n            {...layout.solids[selectedSolid.name].solid}\n            key={`composite-rect-${selectedHandleID}`}\n            label={\"\"}\n            fill={Colors.LIGHT_GRAY5}\n            minified={true}\n          />\n        )}\n\n        {parentSolid && (\n          <ParentSolidNode\n            onClickSolid={onClickSolid}\n            onDoubleClick={name => onDoubleClickSolid({ name })}\n            onHighlightEdges={this.onHighlightEdges}\n            highlightedEdges={this.state.highlighted}\n            key={`composite-rect-${parentHandleID}-definition`}\n            minified={minified}\n            solid={parentSolid}\n            layout={layout}\n          />\n        )}\n        <SolidLinks\n          layout={layout}\n          opacity={0.2}\n          connections={layout.connections}\n          onHighlight={this.onHighlightEdges}\n        />\n        <SolidLinks\n          layout={layout}\n          opacity={0.55}\n          onHighlight={this.onHighlightEdges}\n          connections={layout.connections.filter(({ from, to }) =>\n            isHighlighted(this.state.highlighted, {\n              a: from.solidName,\n              b: to.solidName\n            })\n          )}\n        />\n        {solids.map(solid => (\n          <SolidNode\n            key={solid.name}\n            invocation={solid}\n            definition={solid.definition}\n            minified={minified}\n            onClick={() => onClickSolid({ name: solid.name })}\n            onDoubleClick={() => onDoubleClickSolid({ name: solid.name })}\n            onEnterComposite={() => onEnterCompositeSolid({ name: solid.name })}\n            onHighlightEdges={this.onHighlightEdges}\n            layout={layout.solids[solid.name]}\n            selected={selectedSolid === solid}\n            focused={focusSolids.includes(solid)}\n            highlightedEdges={\n              isSolidHighlighted(this.state.highlighted, solid.name)\n                ? this.state.highlighted\n                : EmptyHighlightedArray\n            }\n            dim={\n              highlightedSolids.length > 0 &&\n              highlightedSolids.indexOf(solid) === -1\n            }\n          />\n        ))}\n      </>\n    );\n  }\n}\n\n// This is a specific empty array we pass to represent the common / empty case\n// so that SolidNode can use shallow equality comparisons in shouldComponentUpdate.\nconst EmptyHighlightedArray: never[] = [];\n\nexport default class PipelineGraph extends React.Component<\n  IPipelineGraphProps\n> {\n  static fragments = {\n    PipelineGraphSolidFragment: gql`\n      fragment PipelineGraphSolidFragment on Solid {\n        name\n        ...SolidNodeInvocationFragment\n        definition {\n          name\n          ...SolidNodeDefinitionFragment\n        }\n      }\n      ${SolidNode.fragments.SolidNodeInvocationFragment}\n      ${SolidNode.fragments.SolidNodeDefinitionFragment}\n    `,\n    PipelineGraphParentSolidFragment: gql`\n      fragment PipelineGraphParentSolidFragment on Solid {\n        name\n        ...SolidNodeInvocationFragment\n        definition {\n          name\n          ...ParentSolidNodeDefinitionFragment\n        }\n      }\n      ${SolidNode.fragments.SolidNodeInvocationFragment}\n      ${SolidNode.fragments.ParentSolidNodeDefinitionFragment}\n    `\n  };\n\n  viewportEl: React.RefObject<SVGViewport> = React.createRef();\n\n  resolveSolidPosition = (\n    arg: SolidNameOrPath,\n    cb: (cx: number, cy: number, layout: IFullSolidLayout) => void\n  ) => {\n    const lastName = \"name\" in arg ? arg.name : arg.path[arg.path.length - 1];\n    const solidLayout = this.props.layout.solids[lastName];\n    if (!solidLayout) {\n      return;\n    }\n    const cx = solidLayout.boundingBox.x + solidLayout.boundingBox.width / 2;\n    const cy = solidLayout.boundingBox.y + solidLayout.boundingBox.height / 2;\n    cb(cx, cy, solidLayout);\n  };\n\n  centerSolid = (arg: SolidNameOrPath) => {\n    this.resolveSolidPosition(arg, (cx, cy) => {\n      const viewportEl = this.viewportEl.current!;\n      viewportEl.smoothZoomToSVGCoords(cx, cy, viewportEl.state.scale);\n    });\n  };\n\n  focusOnSolid = (arg: SolidNameOrPath) => {\n    this.resolveSolidPosition(arg, (cx, cy) => {\n      this.viewportEl.current!.smoothZoomToSVGCoords(cx, cy, DETAIL_ZOOM);\n    });\n  };\n\n  closestSolidInDirection = (dir: string): string | undefined => {\n    const { layout, selectedSolid } = this.props;\n    if (!selectedSolid) return;\n\n    const current = layout.solids[selectedSolid.name];\n    const center = (solid: IFullSolidLayout): { x: number; y: number } => ({\n      x: solid.boundingBox.x + solid.boundingBox.width / 2,\n      y: solid.boundingBox.y + solid.boundingBox.height / 2\n    });\n\n    /* Sort all the solids in the graph based on their attractiveness\n    as a jump target. We want the nearest node in the exact same row for left/right,\n    and the visually \"closest\" node above/below for up/down. */\n    const score = (solid: IFullSolidLayout): number => {\n      const dx = center(solid).x - center(current).x;\n      const dy = center(solid).y - center(current).y;\n\n      if (dir === \"left\" && dy === 0 && dx < 0) {\n        return -dx;\n      }\n      if (dir === \"right\" && dy === 0 && dx > 0) {\n        return dx;\n      }\n      if (dir === \"up\" && dy < 0) {\n        return -dy + Math.abs(dx) / 5;\n      }\n      if (dir === \"down\" && dy > 0) {\n        return dy + Math.abs(dx) / 5;\n      }\n      return Number.NaN;\n    };\n\n    const closest = Object.keys(layout.solids)\n      .map(name => ({ name, score: score(layout.solids[name]) }))\n      .filter(e => e.name !== selectedSolid.name && !Number.isNaN(e.score))\n      .sort((a, b) => b.score - a.score)\n      .pop();\n\n    return closest ? closest.name : undefined;\n  };\n\n  onKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.target && (e.target as HTMLElement).nodeName === \"INPUT\") return;\n\n    const dir = { 37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\" }[e.keyCode];\n    if (!dir) return;\n\n    const nextSolid = this.closestSolidInDirection(dir);\n    if (nextSolid && this.props.onClickSolid) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onClickSolid({ name: nextSolid });\n    }\n  };\n\n  unfocus = (e: React.MouseEvent<any>) => {\n    this.viewportEl.current!.autocenter(true);\n    e.stopPropagation();\n  };\n\n  unfocusOutsideContainer = (e: React.MouseEvent<any>) => {\n    if (this.props.parentSolid && this.props.onLeaveCompositeSolid) {\n      this.props.onLeaveCompositeSolid();\n    } else {\n      this.unfocus(e);\n    }\n  };\n\n  componentDidUpdate(prevProps: IPipelineGraphProps) {\n    if (prevProps.parentSolid !== this.props.parentSolid) {\n      this.viewportEl.current!.cancelAnimations();\n      this.viewportEl.current!.autocenter();\n    }\n    if (prevProps.layout !== this.props.layout) {\n      this.viewportEl.current!.autocenter();\n    }\n    if (\n      prevProps.selectedSolid !== this.props.selectedSolid &&\n      this.props.selectedSolid\n    ) {\n      this.centerSolid(this.props.selectedSolid);\n    }\n  }\n\n  render() {\n    const {\n      layout,\n      interactor,\n      pipelineName,\n      backgroundColor,\n      onClickBackground,\n      onDoubleClickSolid\n    } = this.props;\n\n    return (\n      <SVGViewport\n        ref={this.viewportEl}\n        key={pipelineName}\n        interactor={interactor || SVGViewport.Interactors.PanAndZoom}\n        backgroundColor={backgroundColor}\n        graphWidth={layout.width}\n        graphHeight={layout.height}\n        onKeyDown={this.onKeyDown}\n        onDoubleClick={this.unfocusOutsideContainer}\n      >\n        {({ scale }: any) => (\n          <>\n            <SVGContainer\n              width={layout.width}\n              height={layout.height + 200}\n              onClick={onClickBackground}\n              onDoubleClick={this.unfocus}\n            >\n              <PipelineGraphContents\n                layout={layout}\n                minified={scale < DETAIL_ZOOM - 0.01}\n                onDoubleClickSolid={onDoubleClickSolid || this.focusOnSolid}\n                {...this.props}\n              />\n            </SVGContainer>\n          </>\n        )}\n      </SVGViewport>\n    );\n  }\n}\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n","import * as dagre from \"dagre\";\nimport { titleOfIO } from \"../Util\";\n\nexport type IPipelineLayoutParams = {\n  solids: ILayoutSolid[];\n  parentSolid: ILayoutSolid | undefined;\n};\n\nexport type ILayoutConnectionMember = {\n  point: IPoint;\n  solidName: string;\n  edgeName: string;\n};\n\nexport type ILayoutConnection = {\n  from: ILayoutConnectionMember;\n  to: ILayoutConnectionMember;\n};\n\nexport type IFullPipelineLayout = {\n  width: number;\n  height: number;\n  parent: IParentSolidLayout | null;\n  connections: Array<ILayoutConnection>;\n  solids: {\n    [solidName: string]: IFullSolidLayout;\n  };\n};\n\nexport interface IFullSolidLayout {\n  solid: ILayout;\n  boundingBox: ILayout;\n  inputs: {\n    [inputName: string]: {\n      layout: ILayout;\n      port: IPoint;\n    };\n  };\n  outputs: {\n    [outputName: string]: {\n      layout: ILayout;\n      port: IPoint;\n    };\n  };\n}\n\ninterface IParentSolidLayout extends Omit<IFullSolidLayout, \"solid\"> {\n  mappingLeftEdge: number;\n  mappingLeftSpacing: number;\n  dependsOn: { [solidName: string]: IPoint };\n  dependedBy: { [solidName: string]: IPoint };\n  invocationBoundingBox: ILayout;\n}\n\nexport interface ILayoutSolid {\n  name: string;\n  inputs: Array<{\n    definition: {\n      name: string;\n    };\n    dependsOn: Array<{\n      definition: {\n        name: string;\n      };\n      solid: {\n        name: string;\n      };\n    }>;\n  }>;\n  outputs: Array<{\n    definition: {\n      name: string;\n    };\n    dependedBy: Array<{\n      definition: {\n        name: string;\n      };\n      solid: {\n        name: string;\n      };\n    }>;\n  }>;\n}\n\nexport interface ILayout {\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n}\n\nexport interface IPoint {\n  x: number;\n  y: number;\n}\n\nconst MAX_PER_ROW_ENABLED = false;\nconst MAX_PER_ROW = 25;\nconst SOLID_WIDTH = 370;\nconst SOLID_BASE_HEIGHT = 75;\nconst IO_HEIGHT = 36;\nconst IO_INSET = 6;\nconst IO_MINI_WIDTH = 35;\nconst IO_THRESHOLD_FOR_MINI = 4;\nconst PORT_INSET_X = 15;\nconst PORT_INSET_Y = IO_HEIGHT / 2;\nconst PARENT_DEFINITION_PADDING = 70;\nconst PARENT_INVOCATION_PADDING = 70;\nconst EXTERNAL_DEPENDENCY_PADDING = 50;\n\ntype SolidLinkInfo = {\n  solid: { name: string };\n  definition: { name: string };\n};\n\nfunction flattenIO(arrays: SolidLinkInfo[][]) {\n  const map: { [key: string]: SolidLinkInfo } = {};\n  arrays.forEach(array => array.forEach(item => (map[titleOfIO(item)] = item)));\n  return Object.values(map);\n}\n\nexport function layoutPipeline(\n  pipelineSolids: ILayoutSolid[],\n  parentSolid?: ILayoutSolid\n): IFullPipelineLayout {\n  const g = new dagre.graphlib.Graph();\n\n  // First, identify how much space we need to pad the DAG by in order to show the\n  // parent solid AROUND it. We pass this padding in to dagre, and then we have enough\n  // room to add our parent layout around the result.\n  let parentIOPadding = 0;\n  const marginBase = 100;\n  let marginy = marginBase;\n  let marginx = marginBase;\n  if (parentSolid) {\n    parentIOPadding =\n      Math.max(parentSolid.inputs.length, parentSolid.outputs.length) *\n      IO_HEIGHT;\n    marginx = PARENT_DEFINITION_PADDING + PARENT_INVOCATION_PADDING;\n    marginy = marginx + parentIOPadding;\n  }\n\n  // Define a new top-down, left to right graph layout\n  g.setGraph({ rankdir: \"TB\", marginx, marginy });\n  g.setDefaultEdgeLabel(() => ({}));\n\n  const connections: Array<ILayoutConnection> = [];\n  const solidNamesPresent: { [name: string]: boolean } = {};\n\n  pipelineSolids.forEach(solid => {\n    solidNamesPresent[solid.name] = true;\n  });\n  pipelineSolids.forEach(solid => {\n    // Lay out each solid individually to get it's width and height based on it's\n    // inputs and outputs, and then attach it to the graph. Dagre will give us it's\n    // x,y position.\n    const layout = layoutSolid(solid, { x: 0, y: 0 });\n    g.setNode(solid.name, {\n      width: layout.boundingBox.width,\n      height: layout.boundingBox.height\n    });\n\n    // Give Dagre the dependency edges and build a flat set of them so we\n    // can reference them in a single pass later\n    solid.inputs.forEach(input => {\n      input.dependsOn.forEach(dep => {\n        if (\n          solidNamesPresent[dep.solid.name] &&\n          solidNamesPresent[solid.name]\n        ) {\n          g.setEdge({ v: dep.solid.name, w: solid.name }, { weight: 1 });\n\n          connections.push({\n            from: {\n              point: { x: 0, y: 0 },\n              solidName: dep.solid.name,\n              edgeName: dep.definition.name\n            },\n            to: {\n              point: { x: 0, y: 0 },\n              solidName: solid.name,\n              edgeName: input.definition.name\n            }\n          });\n        }\n      });\n    });\n  });\n\n  dagre.layout(g);\n\n  const solids: { [solidName: string]: IFullSolidLayout } = {};\n  const nodesBySolid: { [solidName: string]: dagre.Node } = {};\n  g.nodes().forEach(function(solidName) {\n    const node = g.node(solidName);\n    if (!node) return;\n    nodesBySolid[solidName] = node;\n  });\n\n  if (MAX_PER_ROW_ENABLED) {\n    const nodesInRows: { [key: string]: dagre.Node[] } = {};\n    g.nodes().forEach(function(solidName) {\n      const node = g.node(solidName);\n      if (!node) return;\n      nodesInRows[`${node.y}`] = nodesInRows[`${node.y}`] || [];\n      nodesInRows[`${node.y}`].push(node);\n    });\n\n    // OK! We're going to split the nodes in long (>MAX_PER_ROW) rows into\n    // multiple rows, shift all the subsequent rows down. Note we do this\n    // repeatedly until each row has less than MAX_PER_ROW nodes. There are\n    // a few caveats to this:\n    // - We may end up making the lines betwee nodes and their children\n    //   less direct.\n    // - We may \"compact\" two groups of solids separated by horizontal\n    //   whitespace on the same row into the same block.\n\n    const rows = Object.keys(nodesInRows)\n      .map(a => Number(a))\n      .sort((a, b) => a - b);\n\n    const firstRow = nodesInRows[`${rows[0]}`];\n    const firstRowCenterX = firstRow\n      ? firstRow.reduce((s, n) => s + n.x + n.width / 2, 0) / firstRow.length\n      : 0;\n\n    for (let ii = 0; ii < rows.length; ii++) {\n      const rowKey = `${rows[ii]}`;\n      const rowNodes = nodesInRows[rowKey];\n\n      const desiredCount = Math.ceil(rowNodes.length / MAX_PER_ROW);\n      if (desiredCount === 1) continue;\n\n      for (let r = 0; r < desiredCount; r++) {\n        const newRowNodes = rowNodes.slice(\n          r * MAX_PER_ROW,\n          (r + 1) * MAX_PER_ROW\n        );\n        const maxHeight =\n          Math.max(...newRowNodes.map(n => n.height)) + SOLID_BASE_HEIGHT;\n        const totalWidth = newRowNodes.reduce(\n          (sum, n) => sum + n.width + SOLID_BASE_HEIGHT,\n          0\n        );\n\n        let x = firstRowCenterX - totalWidth / 2;\n\n        // shift the nodes before the split point so they're centered nicely\n        newRowNodes.forEach(n => {\n          n.x = x;\n          x += n.width + SOLID_BASE_HEIGHT;\n        });\n\n        // shift the nodes after the split point downwards\n        const shifted = rowNodes.slice((r + 1) * MAX_PER_ROW);\n        shifted.forEach(n => (n.y += maxHeight));\n\n        // shift all nodes in the graph beneath this row down by\n        // the height of the newly inserted row.\n        const shiftedMaxHeight =\n          Math.max(0, ...shifted.map(n => n.height)) + SOLID_BASE_HEIGHT;\n\n        for (let jj = ii + 1; jj < rows.length; jj++) {\n          nodesInRows[`${rows[jj]}`].forEach(n => (n.y += shiftedMaxHeight));\n        }\n      }\n    }\n    let minX = Number.MAX_SAFE_INTEGER;\n    Object.keys(nodesBySolid).forEach(solidName => {\n      const node = nodesBySolid[solidName];\n      minX = Math.min(minX, node.x - node.width / 2 - marginx);\n    });\n    Object.keys(nodesBySolid).forEach(solidName => {\n      const node = nodesBySolid[solidName];\n      node.x -= minX;\n    });\n  }\n\n  // Due to a bug in Dagre when run without an \"align\" value, we need to calculate\n  // the total width of the graph coordinate space ourselves. We need the height\n  // because we've shifted long single rows into multiple rows.\n  let maxWidth = 0;\n  let maxHeight = 0;\n\n  // Read the Dagre layout and map \"nodes\" back to our solids, but with\n  // X,Y coordinates this time.\n  Object.keys(nodesBySolid).forEach(solidName => {\n    const node = nodesBySolid[solidName];\n    const solid = pipelineSolids.find(({ name }) => name === solidName);\n    if (!solid) return;\n\n    solids[solidName] = layoutSolid(solid, {\n      x: node.x - node.width / 2, // Dagre's x/y is the center, we want top left\n      y: node.y - node.height / 2\n    });\n    maxWidth = Math.max(maxWidth, node.x + node.width);\n    maxHeight = Math.max(maxHeight, node.y + node.height);\n  });\n\n  // Read the Dagre layout and map \"edges\" back to our data model. We don't\n  // currently use the \"closest points on the node\" Dagre suggests (but we could).\n  g.edges().forEach(function(e) {\n    const conn = connections.find(\n      c => c.from.solidName === e.v && c.to.solidName === e.w\n    );\n    const points = g.edge(e).points;\n    if (conn) {\n      conn.from.point = points[0];\n      conn.to.point = points[points.length - 1];\n    }\n  });\n\n  const result: IFullPipelineLayout = {\n    solids,\n    connections,\n    width: maxWidth,\n    height: maxHeight + marginBase,\n    parent: null\n  };\n\n  if (parentSolid) {\n    // Now that we've computed the pipeline layout fully, lay out the\n    // composite solid around the completed DAG.\n    result.parent = layoutParentCompositeSolid(\n      result,\n      parentSolid,\n      parentIOPadding\n    );\n  }\n\n  return result;\n}\n\nfunction layoutParentCompositeSolid(\n  layout: IFullPipelineLayout,\n  solid: ILayoutSolid,\n  parentIOPadding: number\n) {\n  const result: IParentSolidLayout = {\n    invocationBoundingBox: {\n      x: 1,\n      y: 1,\n      width: layout.width - 1,\n      height: layout.height - 1\n    },\n    boundingBox: {\n      x: PARENT_INVOCATION_PADDING,\n      y: PARENT_INVOCATION_PADDING + parentIOPadding,\n      width: layout.width - PARENT_INVOCATION_PADDING * 2,\n      height: layout.height - (PARENT_INVOCATION_PADDING + parentIOPadding) * 2\n    },\n    mappingLeftEdge: PARENT_INVOCATION_PADDING - 20,\n    mappingLeftSpacing: 10,\n    inputs: {},\n    outputs: {},\n    dependsOn: layoutExternalConnections(\n      flattenIO(solid.inputs.map(d => d.dependsOn)),\n      -EXTERNAL_DEPENDENCY_PADDING,\n      layout.width\n    ),\n    dependedBy: layoutExternalConnections(\n      flattenIO(solid.outputs.map(d => d.dependedBy)),\n      layout.height + EXTERNAL_DEPENDENCY_PADDING,\n      layout.width\n    )\n  };\n\n  const boundingBottom = result.boundingBox.y + result.boundingBox.height;\n\n  solid.inputs.forEach((input, idx) => {\n    result.inputs[input.definition.name] = {\n      layout: {\n        x: result.boundingBox.x,\n        y: result.boundingBox.y - idx * IO_HEIGHT - IO_HEIGHT,\n        width: 0,\n        height: IO_HEIGHT\n      },\n      port: {\n        x: result.boundingBox.x + PORT_INSET_X,\n        y: result.boundingBox.y - idx * IO_HEIGHT - IO_HEIGHT / 2\n      }\n    };\n  });\n\n  solid.outputs.forEach((output, idx) => {\n    result.outputs[output.definition.name] = {\n      layout: {\n        x: result.boundingBox.x,\n        y: boundingBottom + idx * IO_HEIGHT,\n        width: 0,\n        height: IO_HEIGHT\n      },\n      port: {\n        x: result.boundingBox.x + PORT_INSET_X,\n        y: boundingBottom + idx * IO_HEIGHT + IO_HEIGHT / 2\n      }\n    };\n  });\n\n  return result;\n}\n\nfunction layoutExternalConnections(\n  links: SolidLinkInfo[],\n  y: number,\n  layoutWidth: number\n) {\n  // fill evenly from 0 to layoutWidth from left to right, then center them if there's overflow.\n  const inset = PARENT_INVOCATION_PADDING + PORT_INSET_X;\n  const insetWidth = layoutWidth - inset * 2;\n  const spacing = Math.max(200, insetWidth / links.length);\n  const baseX = inset + Math.min(0, (insetWidth - links.length * spacing) / 2);\n  const yShift = spacing < 300 ? 20 : 0;\n\n  const result: { [solidName: string]: IPoint } = {};\n  links.forEach((link, idx) => {\n    const shiftDirection = 1 - (idx % 2) * 2; // 1 or -1, alternating\n    result[titleOfIO(link)] = {\n      x: baseX + idx * spacing,\n      y: y + yShift * shiftDirection\n    };\n  });\n  return result;\n}\n\nexport function layoutSolid(\n  solid: ILayoutSolid,\n  root: IPoint\n): IFullSolidLayout {\n  // Starting at the root (top left) X,Y, return the layout information for a solid with\n  // input blocks, then the main block, then output blocks (arranged vertically)\n  let accY = root.y;\n\n  const inputsLayouts: {\n    [inputName: string]: { layout: ILayout; port: IPoint };\n  } = {};\n\n  const buildIOSmallLayout = (idx: number, count: number) => {\n    const centeringOffsetX = (SOLID_WIDTH - IO_MINI_WIDTH * count) / 2;\n    const x = root.x + IO_MINI_WIDTH * idx + centeringOffsetX;\n    return {\n      port: {\n        x: x + PORT_INSET_X,\n        y: accY + PORT_INSET_Y\n      },\n      layout: {\n        x: x,\n        y: accY,\n        width: IO_MINI_WIDTH,\n        height: IO_HEIGHT\n      }\n    };\n  };\n\n  const buildIOLayout = () => {\n    const layout: { layout: ILayout; port: IPoint } = {\n      port: { x: root.x + PORT_INSET_X, y: accY + PORT_INSET_Y },\n      layout: {\n        x: root.x,\n        y: accY,\n        width: 0,\n        height: IO_HEIGHT\n      }\n    };\n    accY += IO_HEIGHT;\n    return layout;\n  };\n\n  solid.inputs.forEach((input, idx) => {\n    inputsLayouts[input.definition.name] =\n      solid.inputs.length > IO_THRESHOLD_FOR_MINI\n        ? buildIOSmallLayout(idx, solid.inputs.length)\n        : buildIOLayout();\n  });\n  if (solid.inputs.length > IO_THRESHOLD_FOR_MINI) {\n    accY += IO_HEIGHT;\n  }\n\n  const solidLayout: ILayout = {\n    x: root.x,\n    y: Math.max(root.y, accY - IO_INSET),\n    width: SOLID_WIDTH,\n    height: SOLID_BASE_HEIGHT + IO_INSET * 2\n  };\n\n  accY += SOLID_BASE_HEIGHT;\n\n  const outputLayouts: {\n    [outputName: string]: {\n      layout: ILayout;\n      port: IPoint;\n    };\n  } = {};\n\n  solid.outputs.forEach((output, idx) => {\n    outputLayouts[output.definition.name] =\n      solid.outputs.length > IO_THRESHOLD_FOR_MINI\n        ? buildIOSmallLayout(idx, solid.outputs.length)\n        : buildIOLayout();\n  });\n  if (solid.outputs.length > IO_THRESHOLD_FOR_MINI) {\n    accY += IO_HEIGHT;\n  }\n\n  return {\n    boundingBox: {\n      x: root.x,\n      y: root.y,\n      width: SOLID_WIDTH,\n      height: accY - root.y\n    },\n    solid: solidLayout,\n    inputs: inputsLayouts,\n    outputs: outputLayouts\n  };\n}\n\nexport function pointsToBox(a: IPoint, b: IPoint): ILayout {\n  return {\n    x: Math.min(a.x, b.x),\n    y: Math.min(a.y, b.y),\n    width: Math.abs(a.x - b.x),\n    height: Math.abs(a.y - b.y)\n  };\n}\n\nexport function layoutsIntersect(a: ILayout, b: ILayout) {\n  return (\n    a.x + a.width >= b.x &&\n    b.x + b.width >= a.x &&\n    a.y + a.height >= b.y &&\n    b.y + b.height >= a.y\n  );\n}\n","import { asyncMemoize, memoize } from \"../Util\";\nimport { layoutPipeline, ILayoutSolid } from \"./layout\";\n\n// Loads the web worker using the Webpack loader `worker-loader`, specifying the import inline.\n// This allows us to use web workers without ejecting from `create-react-app` (in order to use the\n// config).  We need both worker-loader (wraps the worker code) and babel-loader (transpiles from\n// TypeScript to target ES5) in order to keep worker code in sync with our existing libraries.\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport LayoutWorker from \"worker-loader!babel-loader!../workers/dagre_layout.worker\";\n\nconst _layoutCacheKey = (\n  solids: ILayoutSolid[],\n  parentSolid?: ILayoutSolid\n) => {\n  const solidKey = solids.map(x => x.name).join(\"|\");\n  const parentKey = parentSolid?.name;\n  return `${solidKey}:${parentKey}`;\n};\n\nexport const getDagrePipelineLayout = memoize(layoutPipeline, _layoutCacheKey);\n\nconst _asyncDagrePipelineLayout = (\n  solids: ILayoutSolid[],\n  parentSolid?: ILayoutSolid\n) => {\n  return new Promise(resolve => {\n    const worker = new LayoutWorker();\n    worker.addEventListener(\"message\", function(event) {\n      resolve(event.data);\n      worker.terminate();\n    });\n    worker.postMessage({ solids, parentSolid });\n  });\n};\n\nexport const asyncDagrePipelineLayout = asyncMemoize(\n  _asyncDagrePipelineLayout,\n  _layoutCacheKey\n);\n\nexport * from \"./layout\";\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport ReactDOM from \"react-dom\";\n\nconst MODIFIER_KEYCODES = [17, 18, 91, 224];\nconst SHORTCUT_VISIBILITY_EVENT_TYPE = \"shortcut-visibility\";\n\n// Global page state / handling of \"shortcut mode\". Press any modifier key\n// for 400ms to show shortcuts. This code emits a custom event that React\n// components on the page can listen for to update their states and vends\n// the current state via getShortcutsVisible. (Always having a correct\n// \"initial state\" based on previous keyboard events is why this cannot be\n// implemented inside a React component.\n//\nlet shortcutsVisible = false;\nlet shortcutsTimer: NodeJS.Timeout | null = null;\n\nfunction getShortcutsVisible() {\n  return shortcutsVisible;\n}\n\nfunction setShortcutsVisible(state: boolean) {\n  shortcutsVisible = state;\n  window.dispatchEvent(new CustomEvent(SHORTCUT_VISIBILITY_EVENT_TYPE));\n}\n\nfunction hideShortcuts() {\n  if (shortcutsVisible) {\n    setShortcutsVisible(false);\n  }\n  if (shortcutsTimer) {\n    clearTimeout(shortcutsTimer);\n    shortcutsTimer = null;\n  }\n}\n\nwindow.addEventListener(\"keydown\", event => {\n  if (\n    !shortcutsTimer &&\n    !shortcutsVisible &&\n    MODIFIER_KEYCODES.includes(event.keyCode)\n  ) {\n    shortcutsTimer = setTimeout(() => setShortcutsVisible(true), 400);\n  }\n});\nwindow.addEventListener(\"keyup\", event => {\n  if (MODIFIER_KEYCODES.includes(event.keyCode)) {\n    hideShortcuts();\n  }\n});\nwindow.addEventListener(\"blur\", () => {\n  hideShortcuts();\n});\n\ninterface ShortcutHandlerProps {\n  // Optionally pass onGlobalKeyDown to receive every global key event\n  onGlobalKeyDown?: (event: KeyboardEvent) => void;\n\n  // Optionally pass onShortcut and shortcutFilter to receive key events\n  // that match the shortcutFilter test with preventDefault() already called.\n  // This allows you to co-locate the shortcut label and event test code.\n  onShortcut?: (event: KeyboardEvent) => void;\n  shortcutFilter?: (event: KeyboardEvent) => boolean;\n\n  // Pass a shortcutLabel for the item to be highlighted during shortcut preview.\n  shortcutLabel?: string;\n}\n\ninterface ShortcutHandlerState {\n  previewPosition: null | { left: number; top: number };\n}\n\nexport class ShortcutHandler extends React.Component<\n  ShortcutHandlerProps,\n  ShortcutHandlerState\n> {\n  state: ShortcutHandlerState = {\n    previewPosition: null\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onGlobalKeydown);\n    window.addEventListener(\n      SHORTCUT_VISIBILITY_EVENT_TYPE,\n      this.onShortcutVisiblityChange\n    );\n    this.onShortcutVisiblityChange();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onGlobalKeydown);\n    window.removeEventListener(\n      SHORTCUT_VISIBILITY_EVENT_TYPE,\n      this.onShortcutVisiblityChange\n    );\n  }\n\n  onShortcutVisiblityChange = () => {\n    if (getShortcutsVisible()) {\n      // Deprecated one day, but not likely to be soon? Alternative is to React.cloneElement\n      // and attach a ref prop to `children` without wrapping it in another DOM node, but\n      // we can't be sure we get a DOM node and not a React component ref. @BG\n      // https://reactjs.org/docs/refs-and-the-dom.html#exposing-dom-refs-to-parent-components\n      // eslint-disable-next-line react/no-find-dom-node\n      const el = ReactDOM.findDOMNode(this);\n      if (!el || !(el instanceof HTMLElement)) return;\n      const rect = el.getBoundingClientRect();\n      this.setState({\n        previewPosition: {\n          left: rect.left + rect.width,\n          top: rect.top + rect.height\n        }\n      });\n    } else if (this.state.previewPosition !== null) {\n      this.setState({ previewPosition: null });\n    }\n  };\n\n  onGlobalKeydown = (event: KeyboardEvent) => {\n    const { target } = event;\n\n    const inTextInput =\n      target &&\n      ((target as HTMLElement).nodeName === \"INPUT\" ||\n        (target as HTMLElement).nodeName === \"TEXTAREA\");\n\n    if (inTextInput && !(event.altKey || event.ctrlKey || event.metaKey)) {\n      return;\n    }\n\n    this.props.onGlobalKeyDown?.(event);\n\n    if (\n      this.props.onShortcut &&\n      this.props.shortcutFilter &&\n      this.props.shortcutFilter(event)\n    ) {\n      event.preventDefault();\n\n      // Pull the focus out of the currently focused field (if there is one). This better\n      // simulates typical onClick behavior where the button is focused by mousedown before\n      // the click so shortcut activation doesn't need to be  tested separately. It also\n      // ensures the value of the codemirror / text input is \"committed\" before the click.\n      if (document.activeElement instanceof HTMLElement) {\n        document.activeElement.blur();\n      }\n\n      this.props.onShortcut(event);\n    }\n  };\n\n  render() {\n    const { children, shortcutLabel } = this.props;\n    const { previewPosition } = this.state;\n\n    if (shortcutLabel && previewPosition) {\n      return (\n        <>\n          {children}\n          <ShortcutAnnotation\n            style={{ top: previewPosition.top, left: previewPosition.left }}\n          >\n            {shortcutLabel}\n          </ShortcutAnnotation>\n        </>\n      );\n    }\n    return <>{children}</>;\n  }\n}\n\nconst ShortcutAnnotation = styled.div`\n  position: fixed;\n  min-width: 20px;\n  font-size: 12px;\n  font-weight: 600;\n  line-height: 14px;\n  padding: 1px 3px;\n  z-index: 10;\n  letter-spacing: 2px;\n  transform: translate(-90%, -10px);\n  color: ${Colors.BLACK};\n  background: ${Colors.GRAY5};\n  border: 1px solid ${Colors.GRAY3};\n  border-radius: 3px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { MenuItem, Menu, Popover, InputGroup } from \"@blueprintjs/core\";\nimport { SolidQueryInputSolidFragment } from \"./types/SolidQueryInputSolidFragment\";\nimport gql from \"graphql-tag\";\n\ninterface SolidQueryInputProps {\n  solids: SolidQueryInputSolidFragment[];\n  value: string;\n  onChange: (value: string) => void;\n  autoFocus?: boolean;\n}\n\ninterface ActiveSuggestionInfo {\n  text: string;\n  idx: number;\n}\n\n/** Generates placeholder text for the solid query box that includes a\n * practical example from the current DAG by finding the solid with the highest\n * number of immediate input or output connections and randomly highlighting\n * either the ++solid or solid++ or solid+* syntax.\n */\nconst placeholderTextForSolids = (solids: SolidQueryInputSolidFragment[]) => {\n  const seed = solids.length % 3;\n\n  let placeholder = \"Type a Solid Subset\";\n  if (solids.length === 0) return placeholder;\n\n  const ranked = solids.map<{\n    incount: number;\n    outcount: number;\n    name: string;\n  }>(s => ({\n    incount: s.inputs.reduce((sum, o) => sum + o.dependsOn.length, 0),\n    outcount: s.outputs.reduce((sum, o) => sum + o.dependedBy.length, 0),\n    name: s.name\n  }));\n\n  if (seed === 0) {\n    const example = ranked.sort((a, b) => b.outcount - a.outcount)[0];\n    placeholder = `${placeholder} (ex: ${example!.name}+*)`;\n  } else if (seed === 1) {\n    const example = ranked.sort((a, b) => b.outcount - a.outcount)[0];\n    placeholder = `${placeholder} (ex: ${example!.name}+)`;\n  } else if (seed === 2) {\n    const example = ranked.sort((a, b) => b.incount - a.incount)[0];\n    placeholder = `${placeholder} (ex: ++${example!.name})`;\n  }\n  return placeholder;\n};\n\nexport const SolidQueryInput = (props: SolidQueryInputProps) => {\n  const [active, setActive] = React.useState<ActiveSuggestionInfo | null>(null);\n  const [focused, setFocused] = React.useState<boolean>(false);\n  const [pendingValue, setPendingValue] = React.useState<string>(props.value);\n\n  React.useEffect(() => {\n    // props.value is our source of truth, but we hold \"un-committed\" changes in\n    // pendingValue while the field is being edited. Ensure the pending value\n    // is synced whenever props.value changes.\n    setPendingValue(props.value);\n  }, [props.value]);\n\n  const lastClause = /(\\*?\\+*)([\\w\\d_-]+)(\\+*\\*?)$/.exec(pendingValue);\n  let menu: JSX.Element | undefined = undefined;\n\n  const [, prefix, lastSolidName, suffix] = lastClause || [];\n  const suggestions =\n    lastSolidName && !suffix\n      ? props.solids\n          .map(s => s.name)\n          .filter(n => n.startsWith(lastSolidName) && n !== lastSolidName)\n      : [];\n\n  const onConfirmSuggestion = (suggestion: string) => {\n    const preceding = lastClause\n      ? pendingValue.substr(0, lastClause.index)\n      : \"\";\n    setPendingValue(preceding + prefix + suggestion + suffix);\n  };\n\n  if (suggestions.length && focused) {\n    menu = (\n      <StyledMenu>\n        {suggestions.slice(0, 15).map(suggestion => (\n          <StyledMenuItem\n            key={suggestion}\n            text={suggestion}\n            active={active ? active.text === suggestion : false}\n            onMouseDown={(e: React.MouseEvent<any>) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onConfirmSuggestion(suggestion);\n            }}\n          />\n        ))}\n      </StyledMenu>\n    );\n  }\n\n  React.useEffect(() => {\n    if (!active && suggestions.length) {\n      setActive({ text: suggestions[0], idx: 0 });\n      return;\n    }\n    if (!active) {\n      return;\n    }\n    // Relocate the currently active item in the latest suggestions list\n    const pos = suggestions.findIndex(a => a === active.text);\n\n    // The new index is the index of the active item, or whatever item\n    // is now at it's location if it's gone, bounded to the array.\n    let nextIdx = pos !== -1 ? pos : active.idx;\n    nextIdx = Math.max(0, Math.min(suggestions.length - 1, nextIdx));\n    const nextText = suggestions[nextIdx];\n\n    if (nextIdx !== active.idx || nextText !== active.text) {\n      setActive({ text: nextText, idx: nextIdx });\n    }\n  }, [active, suggestions]);\n\n  const onKeyDown = (e: React.KeyboardEvent<any>) => {\n    if (e.key === \"Enter\" || e.key === \"Return\" || e.key === \"Tab\") {\n      if (active && active.text) {\n        onConfirmSuggestion(active.text);\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n\n    // The up/down arrow keys shift selection in the dropdown.\n    // Note: The first down arrow press activates the first item.\n    const shift = { ArrowDown: 1, ArrowUp: -1 }[e.key];\n    if (shift && suggestions.length > 0) {\n      e.preventDefault();\n      let idx = (active ? active.idx : -1) + shift;\n      idx = Math.max(0, Math.min(idx, suggestions.length - 1));\n      setActive({ text: suggestions[idx], idx });\n    }\n  };\n\n  const onKeyUp = (e: React.KeyboardEvent<any>) => {\n    if (\n      e.key === \"Enter\" ||\n      e.key === \"Return\" ||\n      e.key === \"Tab\" ||\n      e.key === \"+\" ||\n      e.key === \" \" ||\n      (e.key === \"*\" && pendingValue.length > 1) ||\n      (e.key === \"Backspace\" && pendingValue.length)\n    ) {\n      props.onChange(pendingValue);\n    }\n  };\n\n  return (\n    <SolidQueryInputContainer>\n      <Popover\n        minimal={true}\n        isOpen={menu !== undefined}\n        position={\"bottom\"}\n        content={menu}\n      >\n        <SolidQueryInputField\n          type=\"text\"\n          value={pendingValue}\n          leftIcon={\"send-to-graph\"}\n          autoFocus={props.autoFocus}\n          placeholder={placeholderTextForSolids(props.solids)}\n          onChange={(e: React.ChangeEvent<any>) =>\n            setPendingValue(e.target.value)\n          }\n          onFocus={() => setFocused(true)}\n          onBlur={() => {\n            setFocused(false);\n            props.onChange(pendingValue);\n          }}\n          onKeyDown={onKeyDown}\n          onKeyUp={onKeyUp}\n        />\n      </Popover>\n    </SolidQueryInputContainer>\n  );\n};\n\nSolidQueryInput.fragments = {\n  SolidQueryInputSolidFragment: gql`\n    fragment SolidQueryInputSolidFragment on Solid {\n      name\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n  `\n};\n\nconst SolidQueryInputContainer = styled.div`\n  z-index: 2;\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\nconst SolidQueryInputField = styled(InputGroup)`\n  width: 30vw;\n  font-size: 14px;\n`;\n\nconst StyledMenu = styled(Menu)`\n  width: 30vw;\n`;\n\nconst StyledMenuItem = styled(MenuItem)`\n  font-size: 13px;\n  line-height: 15px;\n`;\n","import { PipelineExplorerSolidHandleFragment_solid as Solid } from \"./types/PipelineExplorerSolidHandleFragment\";\n\nconst MAX_RENDERED_FOR_EMPTY_QUERY = 100;\n\ntype TraverseStepFunction = (\n  solid: Solid,\n  callback: (nextSolid: Solid) => void\n) => void;\n\nclass SolidGraphTraverser {\n  solidNameMap: { [name: string]: Solid } = {};\n\n  // TODO: One reason doing DFS on the client side is sub optimal.\n  // javascript is tail end recursive tho so we could go for ever without worrying about\n  // stack overflow problems?\n\n  constructor(solids: Solid[]) {\n    solids.forEach(solid => (this.solidNameMap[solid.name] = solid));\n  }\n\n  solidNamed(name: string): Solid | undefined {\n    return this.solidNameMap[name];\n  }\n\n  traverse(solid: Solid, step: TraverseStepFunction, depth: number) {\n    const results: Solid[] = [solid];\n    if (depth > 0) {\n      step(solid, next => {\n        results.push(...this.traverse(next, step, depth - 1));\n      });\n    }\n    return results;\n  }\n\n  fetchUpstream(solid: Solid, depth: number) {\n    const step: TraverseStepFunction = (solid, callback) =>\n      solid.inputs.forEach(input =>\n        input.dependsOn.forEach(d => callback(this.solidNamed(d.solid.name)!))\n      );\n\n    return this.traverse(solid, step, depth);\n  }\n\n  fetchDownstream(solid: Solid, depth: number) {\n    const step: TraverseStepFunction = (solid, callback) =>\n      solid.outputs.forEach(output =>\n        output.dependedBy.forEach(d => callback(this.solidNamed(d.solid.name)!))\n      );\n\n    return this.traverse(solid, step, depth);\n  }\n}\n\nfunction expansionDepthForClause(clause: string) {\n  return clause.includes(\"*\") ? Number.MAX_SAFE_INTEGER : clause.length;\n}\n\nexport function filterSolidsByQuery(solids: Solid[], query: string) {\n  if (query === \"*\") {\n    return { all: solids, focus: [] };\n  }\n  if (query === \"\") {\n    return {\n      all: solids.length < MAX_RENDERED_FOR_EMPTY_QUERY ? solids : [],\n      focus: []\n    };\n  }\n\n  const traverser = new SolidGraphTraverser(solids);\n  const results = new Set<Solid>();\n  const clauses = query.split(/(,| AND | and | )/g);\n  const focus = new Set<Solid>();\n\n  for (const clause of clauses) {\n    const parts = /(\\*?\\+*)([\\w\\d_-]+)(\\+*\\*?)/.exec(clause.trim());\n    if (!parts) continue;\n    const [, parentsClause, solidName, descendentsClause] = parts;\n    const solidsMatching = solids.filter(\n      s =>\n        solidName === s.name ||\n        (solidName.length > 3 && s.name.includes(solidName))\n    );\n\n    for (const solid of solidsMatching) {\n      const upDepth = expansionDepthForClause(parentsClause);\n      const downDepth = expansionDepthForClause(descendentsClause);\n\n      focus.add(solid);\n      results.add(solid);\n      traverser\n        .fetchUpstream(solid, upDepth)\n        .forEach(other => results.add(other));\n      traverser\n        .fetchDownstream(solid, downDepth)\n        .forEach(other => results.add(other));\n    }\n  }\n\n  return {\n    all: Array.from(results),\n    focus: Array.from(focus)\n  };\n}\n","import {\n  Colors,\n  Button,\n  Classes,\n  Dialog,\n  Intent,\n  Spinner\n} from \"@blueprintjs/core\";\nimport * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport PipelineGraph from \"../graph/PipelineGraph\";\nimport { useQuery } from \"react-apollo\";\nimport {\n  SolidSelectorQuery,\n  SolidSelectorQuery_pipeline\n} from \"./types/SolidSelectorQuery\";\nimport { getDagrePipelineLayout } from \"../graph/getFullSolidLayout\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { SubsetError } from \"./ExecutionSessionContainer\";\nimport { ShortcutHandler } from \"../ShortcutHandler\";\nimport { SolidQueryInput } from \"../SolidQueryInput\";\nimport { filterSolidsByQuery } from \"../SolidQueryImpl\";\n\ninterface ISolidSelectorProps {\n  pipelineName: string;\n  subsetError: SubsetError;\n  value: string[] | null;\n  query: string | null;\n  onChange: (value: string[] | null, query: string | null) => void;\n  onRequestClose?: () => void;\n}\n\ninterface ISolidSelectorInnerProps extends ISolidSelectorProps {\n  pipeline: SolidSelectorQuery_pipeline;\n}\n\ninterface ISolidSelectorState {\n  query: string;\n}\n\nconst SolidSelectorModalContainer = (props: ISolidSelectorProps) => {\n  const { data } = useQuery<SolidSelectorQuery>(SOLID_SELECTOR_QUERY, {\n    variables: { name: props.pipelineName }\n  });\n\n  if (data?.pipeline?.__typename !== \"Pipeline\") {\n    return (\n      <div\n        style={{\n          height: `calc(100% - 85px)`,\n          display: \"flex\",\n          justifyContent: \"center\"\n        }}\n      >\n        <div style={{ alignSelf: \"center\" }}>\n          <Spinner size={32} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <SolidSelectorModal pipeline={data.pipeline} {...props} />\n    </>\n  );\n};\n\nclass SolidSelectorModal extends React.PureComponent<\n  ISolidSelectorInnerProps,\n  ISolidSelectorState\n> {\n  state: ISolidSelectorState = {\n    query: \"\"\n  };\n\n  graphRef = React.createRef<PipelineGraph>();\n\n  componentDidMount() {\n    this.handleSetQuery(this.props.query || \"*\");\n  }\n\n  handleSetQuery = (query: string) => {\n    this.setState({ query }, () =>\n      this.graphRef.current?.viewportEl.current?.autocenter()\n    );\n  };\n\n  handleSave = () => {\n    const { pipeline, onChange } = this.props;\n    let { query } = this.state;\n\n    const queryResultSolids = filterSolidsByQuery(pipeline.solids, query);\n    let solidSubset: string[] | null = queryResultSolids.all.map(s => s.name);\n    if (queryResultSolids.all.length === 0) {\n      alert(\n        \"Please type a solid query that matches at least one solid \" +\n          \"or `*` to execute the entire pipeline.\"\n      );\n      return;\n    }\n\n    // If all solids are returned, we set the subset to null rather than sending\n    // a comma separated list of evey solid to the API\n    if (queryResultSolids.all.length === pipeline.solids.length) {\n      solidSubset = null;\n      query = \"*\";\n    }\n\n    onChange(solidSubset, query);\n  };\n\n  render() {\n    const { pipeline } = this.props;\n    const { query } = this.state;\n\n    const queryResultSolids = pipeline\n      ? filterSolidsByQuery(pipeline.solids, query).all\n      : [];\n\n    const queryInvalid = queryResultSolids.length === 0 || query.length === 0;\n\n    return (\n      <>\n        <div\n          className={Classes.DIALOG_BODY}\n          style={{\n            margin: 0,\n            marginBottom: 17,\n            height: `calc(100% - 85px)`,\n            position: \"relative\"\n          }}\n        >\n          <PipelineGraph\n            ref={this.graphRef}\n            backgroundColor={Colors.LIGHT_GRAY5}\n            pipelineName={pipeline ? pipeline.name : \"\"}\n            solids={queryResultSolids}\n            layout={getDagrePipelineLayout(queryResultSolids)}\n            focusSolids={[]}\n            highlightedSolids={[]}\n          />\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: 10,\n              left: \"50%\",\n              transform: \"translateX(-50%)\"\n            }}\n          >\n            <SolidQueryInput\n              solids={pipeline ? pipeline.solids : []}\n              value={query}\n              onChange={this.handleSetQuery}\n              autoFocus={true}\n            />\n          </div>\n        </div>\n        <div className={Classes.DIALOG_FOOTER}>\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n            <Button onClick={this.close}>Cancel</Button>\n            <ShortcutHandler\n              shortcutLabel=\"⌥Enter\"\n              shortcutFilter={e => e.keyCode === 13 && e.altKey}\n              onShortcut={this.handleSave}\n            >\n              <Button\n                intent=\"primary\"\n                onClick={this.handleSave}\n                disabled={queryInvalid}\n                title={\n                  queryInvalid\n                    ? `You must provie a solid query or * to execute the entire pipeline.`\n                    : `Apply solid query`\n                }\n              >\n                Apply\n              </Button>\n            </ShortcutHandler>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  close = () => {\n    this.props.onRequestClose && this.props.onRequestClose();\n  };\n}\n\nexport const SOLID_SELECTOR_QUERY = gql`\n  query SolidSelectorQuery($name: String!) {\n    pipeline(params: { name: $name }) {\n      name\n      solids {\n        name\n        ...PipelineGraphSolidFragment\n      }\n    }\n  }\n  ${PipelineGraph.fragments.PipelineGraphSolidFragment}\n`;\n\nexport default (props: ISolidSelectorProps) => {\n  const { subsetError, query } = props;\n  const [open, setOpen] = React.useState(false);\n\n  const onRequestClose = () => setOpen(false);\n\n  let buttonText;\n  if (subsetError) {\n    buttonText = \"Invalid Solid Selection\";\n  } else {\n    buttonText = query;\n  }\n\n  return (\n    <ShortcutHandler\n      shortcutLabel={\"⌥S\"}\n      shortcutFilter={e => e.keyCode === 83 && e.altKey}\n      onShortcut={() => setOpen(true)}\n    >\n      <div>\n        <Dialog\n          icon=\"info-sign\"\n          onClose={() => setOpen(false)}\n          style={{ width: \"80vw\", maxWidth: 1400, height: \"80vh\" }}\n          title={\"Specify Solids to Execute\"}\n          usePortal={true}\n          isOpen={open}\n        >\n          <SolidSelectorModalContainer\n            {...props}\n            onRequestClose={onRequestClose}\n            onChange={(value, query) => {\n              props.onChange(value, query);\n              onRequestClose();\n            }}\n          />\n        </Dialog>\n        <Button\n          icon={subsetError ? IconNames.WARNING_SIGN : undefined}\n          intent={subsetError ? Intent.WARNING : Intent.NONE}\n          onClick={() => setOpen(true)}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </ShortcutHandler>\n  );\n};\n","// Patched lint mode that won't constantly lint\nimport CodeMirror from \"codemirror\";\n\nconst GUTTER_ID = \"CodeMirror-lint-markers\";\n\nfunction showTooltip(e, content, node) {\n  const tt = document.createElement(\"div\");\n  const nodeRect = node.getBoundingClientRect();\n\n  tt.className = \"CodeMirror-lint-tooltip\";\n  tt.appendChild(content.cloneNode(true));\n  document.body.appendChild(tt);\n  tt.style.top = nodeRect.top - tt.clientHeight - 5 + \"px\";\n  tt.style.left = nodeRect.left + 5 + \"px\";\n  if (tt.style.opacity != null) tt.style.opacity = 1;\n  return tt;\n}\nfunction rm(elt) {\n  if (elt.parentNode) elt.parentNode.removeChild(elt);\n}\nfunction hideTooltip(tt) {\n  if (!tt.parentNode) return;\n  if (tt.style.opacity == null) rm(tt);\n  tt.style.opacity = 0;\n  setTimeout(function() {\n    rm(tt);\n  }, 600);\n}\n\nfunction showTooltipFor(e, content, node) {\n  let tooltip = showTooltip(e, content, node);\n  function hide() {\n    CodeMirror.off(node, \"mouseout\", hide);\n    if (tooltip) {\n      hideTooltip(tooltip);\n      tooltip = null;\n    }\n  }\n  const poll = setInterval(function() {\n    if (tooltip)\n      for (let n = node; ; n = n.parentNode) {\n        if (n && n.nodeType === 11) n = n.host;\n        if (n === document.body) return;\n        if (!n) {\n          hide();\n          break;\n        }\n      }\n    if (!tooltip) return clearInterval(poll);\n  }, 400);\n  CodeMirror.on(node, \"mouseout\", hide);\n}\n\nfunction parseOptions(_cm, options) {\n  if (options instanceof Function) return { getAnnotations: options };\n  if (!options || options === true) options = {};\n  return options;\n}\n\nfunction clearMarks(cm) {\n  const state = cm.state.lint;\n  if (state.hasGutter) cm.clearGutter(GUTTER_ID);\n  for (let i = 0; i < state.marked.length; ++i) state.marked[i].clear();\n  state.marked.length = 0;\n}\n\nfunction makeMarker(labels, severity, multiple, tooltips) {\n  const marker = document.createElement(\"div\");\n  let inner = marker;\n  marker.className = \"CodeMirror-lint-marker-\" + severity;\n  if (multiple) {\n    inner = marker.appendChild(document.createElement(\"div\"));\n    inner.className = \"CodeMirror-lint-marker-multiple\";\n  }\n\n  if (tooltips !== false) {\n    CodeMirror.on(inner, \"mouseover\", function(e) {\n      showTooltipFor(e, labels, inner);\n    });\n  }\n  return marker;\n}\n\nfunction getMaxSeverity(a, b) {\n  if (a === \"error\") return a;\n  else return b;\n}\n\nfunction groupByLine(annotations) {\n  const lines = [];\n  for (let i = 0; i < annotations.length; ++i) {\n    const ann = annotations[i],\n      line = ann.from.line;\n    (lines[line] || (lines[line] = [])).push(ann);\n  }\n  return lines;\n}\n\nfunction annotationTooltip(ann) {\n  let severity = ann.severity;\n  if (!severity) severity = \"error\";\n  const tip = document.createElement(\"div\");\n  tip.className = \"CodeMirror-lint-message-\" + severity;\n  if (typeof ann.messageHTML != \"undefined\") {\n    tip.innerHTML = ann.messageHTML;\n  } else {\n    tip.appendChild(document.createTextNode(ann.message));\n  }\n  return tip;\n}\n\nfunction updateLinting(cm, annotationsNotSorted) {\n  clearMarks(cm);\n  const state = cm.state.lint,\n    options = state.options;\n\n  const annotations = groupByLine(annotationsNotSorted);\n\n  for (let line = 0; line < annotations.length; ++line) {\n    const anns = annotations[line];\n    if (!anns) continue;\n\n    let maxSeverity = null;\n    const tipLabel = state.hasGutter && document.createDocumentFragment();\n\n    for (let i = 0; i < anns.length; ++i) {\n      let ann = anns[i];\n      let severity = ann.severity;\n      if (!severity) severity = \"error\";\n      maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n      if (options.formatAnnotation) ann = options.formatAnnotation(ann);\n      if (state.hasGutter) tipLabel.appendChild(annotationTooltip(ann));\n\n      if (ann.to)\n        state.marked.push(\n          cm.markText(ann.from, ann.to, {\n            className: \"CodeMirror-lint-mark-\" + severity,\n            __annotation: ann\n          })\n        );\n    }\n\n    if (state.hasGutter)\n      cm.setGutterMarker(\n        line,\n        GUTTER_ID,\n        makeMarker(\n          tipLabel,\n          maxSeverity,\n          anns.length > 1,\n          state.options.tooltips\n        )\n      );\n  }\n  if (options.onUpdateLinting)\n    options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n}\n\nfunction lintAsync(cm, getAnnotations, passOptions) {\n  const state = cm.state.lint;\n  let id = ++state.waitingFor;\n  function abort() {\n    id = -1;\n    cm.off(\"change\", abort);\n  }\n  cm.on(\"change\", abort);\n  getAnnotations(\n    cm.getValue(),\n    function(annotations, arg2) {\n      cm.off(\"change\", abort);\n      if (state.waitingFor !== id) return;\n      if (arg2 && annotations instanceof CodeMirror) annotations = arg2;\n      cm.operation(function() {\n        updateLinting(cm, annotations);\n      });\n    },\n    passOptions,\n    cm\n  );\n}\n\nfunction startLinting(cm) {\n  const state = cm.state.lint,\n    options = state.options;\n  /*\n   * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n   * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n   */\n  const passOptions = options.options || options;\n  const getAnnotations =\n    options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), \"lint\");\n  if (!getAnnotations) return;\n  if (options.async || getAnnotations.async) {\n    lintAsync(cm, getAnnotations, passOptions);\n  } else {\n    const annotations = getAnnotations(cm.getValue(), passOptions, cm);\n    if (!annotations) return;\n    if (annotations.then)\n      annotations.then(function(issues) {\n        cm.operation(function() {\n          updateLinting(cm, issues);\n        });\n      });\n    else\n      cm.operation(function() {\n        updateLinting(cm, annotations);\n      });\n  }\n}\n\nfunction onChange(cm) {\n  const state = cm.state.lint;\n  if (!state) return;\n  clearTimeout(state.timeout);\n  state.timeout = setTimeout(function() {\n    startLinting(cm);\n  }, state.options.delay || 500);\n}\n\nfunction popupTooltip(docs, annotations, e) {\n  const target = e.target || e.srcElement;\n\n  const tooltip = document.createDocumentFragment();\n\n  if (docs) {\n    const docsEl = document.createElement(\"div\");\n    docsEl.textContent = docs;\n    tooltip.appendChild(docsEl);\n    if (annotations.length) {\n      docsEl.style.paddingBottom = \"4px\";\n      docsEl.style.marginBottom = \"4px\";\n      docsEl.style.borderBottom = \"1px solid rgba(0,0,0,0.25)\";\n    }\n  }\n\n  for (let i = 0; i < annotations.length; i++) {\n    const ann = annotations[i];\n    tooltip.appendChild(annotationTooltip(ann));\n  }\n  showTooltipFor(e, tooltip, target);\n}\n\nfunction onMouseOver(cm, e) {\n  const target = e.target || e.srcElement;\n  const box = target.getBoundingClientRect(),\n    x = (box.left + box.right) / 2,\n    y = (box.top + box.bottom) / 2;\n  const pos = cm.coordsChar({ left: x, top: y }, \"client\");\n  const spans = cm.findMarksAt(pos);\n\n  const getDocs = cm.getHelper(CodeMirror.Pos(0, 0), \"dagster-docs\");\n  const docs = getDocs(cm, pos);\n\n  const annotations = [];\n  for (let i = 0; i < spans.length; ++i) {\n    const ann = spans[i].__annotation;\n    if (ann) annotations.push(ann);\n  }\n\n  if (docs || annotations.length) {\n    popupTooltip(docs, annotations, e);\n  }\n}\n\nfunction LintState(cm, options, hasGutter) {\n  this.marked = [];\n  this.options = options;\n  this.timeout = null;\n  this.hasGutter = hasGutter;\n  this.onMouseOver = function(e) {\n    onMouseOver(cm, e);\n  };\n  this.waitingFor = 0;\n}\n\nCodeMirror.defineOption(\"lint\", false, function(cm, val, old) {\n  if (old && old !== CodeMirror.Init) {\n    clearMarks(cm);\n    if (cm.state.lint.options.lintOnChange !== false)\n      cm.off(\"change\", onChange);\n    CodeMirror.off(\n      cm.getWrapperElement(),\n      \"mouseover\",\n      cm.state.lint.onMouseOver\n    );\n    clearTimeout(cm.state.lint.timeout);\n    delete cm.state.lint;\n  }\n\n  if (val) {\n    const gutters = cm.getOption(\"gutters\");\n    let hasLintGutter = false;\n    for (let i = 0; i < gutters.length; ++i)\n      if (gutters[i] === GUTTER_ID) hasLintGutter = true;\n    const state = (cm.state.lint = new LintState(\n      cm,\n      parseOptions(cm, val),\n      hasLintGutter\n    ));\n    if (state.options.lintOnChange !== false) cm.on(\"change\", onChange);\n    if (state.options.tooltips !== false && state.options.tooltips !== \"gutter\")\n      CodeMirror.on(cm.getWrapperElement(), \"mouseover\", state.onMouseOver);\n  }\n});\n\nCodeMirror.defineExtension(\"performLint\", function() {\n  if (this.state.lint) startLinting(this);\n});\n","import * as CodeMirror from \"codemirror\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/addon/search/search\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/dialog/dialog\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport * as yaml from \"yaml\";\nimport { ConfigEditorEnvironmentSchemaFragment } from \"../types/ConfigEditorEnvironmentSchemaFragment\";\n\ninterface IParseStateParent {\n  key: string;\n  indent: number;\n  childKeys: string[];\n}\n\nenum ContainerType {\n  Dict = \"dict\",\n  List = \"list\"\n}\n\ninterface IParseState {\n  trailingSpace: boolean;\n  inlineContainers: ContainerType[];\n  escaped: boolean;\n  inValue: boolean;\n  inBlockLiteral: boolean;\n  lastIndent: number;\n  parents: IParseStateParent[];\n}\n\n// Helper methods that mutate parser state. These must return new JavaScript objects.\n//\nfunction parentsPoppingItemsDeeperThan(\n  parents: IParseStateParent[],\n  indent: number\n) {\n  while (parents.length > 0 && parents[parents.length - 1].indent >= indent) {\n    parents = parents.slice(0, parents.length - 1);\n  }\n  return parents;\n}\n\nfunction parentsAddingChildKeyToLast(\n  parents: IParseStateParent[],\n  key: string\n) {\n  if (parents.length === 0) return [];\n\n  const immediateParent = parents[parents.length - 1];\n  return [\n    ...parents.slice(0, parents.length - 1),\n    {\n      key: immediateParent.key,\n      indent: immediateParent.indent,\n      childKeys: [...immediateParent.childKeys, key]\n    }\n  ];\n}\n\nfunction parentsAddingChildKeyAtIndent(\n  parents: IParseStateParent[],\n  key: string,\n  indent: number\n) {\n  parents = parentsPoppingItemsDeeperThan(parents, indent);\n  parents = parentsAddingChildKeyToLast(parents, key);\n  parents = [...parents, { key, indent: indent, childKeys: [] }];\n  return parents;\n}\n\nconst Constants = [\"true\", \"false\", \"on\", \"off\", \"yes\", \"no\"];\n\nexport const RegExps = {\n  KEYWORD: new RegExp(\"\\\\b((\" + Constants.join(\")|(\") + \"))$\", \"i\"),\n  DICT_COLON: /^:\\s*/,\n  // eslint-disable-next-line no-useless-escape\n  DICT_KEY: /^\\s*(?:[,\\[\\]{}&*!|>'\"%@`][^\\s'\":]|[^,\\[\\]{}#&*!|>'\"%@`])[^# ,]*?(?=\\s*:)/,\n  QUOTED_STRING: /^('([^']|\\\\.)*'?|\"([^\"\\\\]|\\\\.)*\"?)/,\n  // eslint-disable-next-line no-useless-escape\n  BLOCKSTART_PIPE_OR_ARROW: /^\\s*(\\||\\>)\\s*/,\n  // eslint-disable-next-line no-useless-escape\n  NUMBER: /^\\s*-?[0-9\\.]+(?![0-9\\.]*[^0-9.\\s])\\s?/,\n  // eslint-disable-next-line no-useless-escape\n  VARIABLE: /^\\s*(\\&|\\*)[a-z0-9\\._-]+\\b/i\n};\n\nCodeMirror.defineMode(\"yaml\", () => {\n  return {\n    lineComment: \"#\",\n    fold: \"indent\",\n    startState: (): IParseState => {\n      return {\n        trailingSpace: false,\n        escaped: false,\n        inValue: false,\n        inBlockLiteral: false,\n        inlineContainers: [],\n        lastIndent: 0,\n        parents: []\n      };\n    },\n    token: (stream, state: IParseState) => {\n      const ch = stream.peek();\n\n      // reset escape, indent and trailing\n      const wasEscaped = state.escaped;\n      const wasTrailingSpace = state.trailingSpace;\n      const lastIndent = state.lastIndent;\n      state.lastIndent = stream.indentation();\n      state.escaped = false;\n      state.trailingSpace = false;\n\n      // whitespace\n      const trailingSpace = stream.eatSpace();\n      if (trailingSpace) {\n        state.trailingSpace = true;\n        return \"whitespace\";\n      }\n      // escape\n      if (ch === \"\\\\\") {\n        state.escaped = true;\n        stream.next();\n        return null;\n      }\n\n      // comments\n      // either beginning of the line or had whitespace before\n      if (ch === \"#\" && (stream.sol() || wasTrailingSpace)) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n\n      if (state.inBlockLiteral) {\n        // continuation of a literal string that was started on a previous line\n        if (stream.indentation() > lastIndent) {\n          stream.skipToEnd();\n          return \"string\";\n        }\n        state.inBlockLiteral = false;\n      }\n\n      // array list item, value to follow\n      if (stream.match(/-/)) {\n        state.inValue = true;\n        return \"meta\";\n      }\n\n      // doc start / end\n      if (stream.sol()) {\n        state.inValue = false;\n        state.parents = [];\n\n        if (stream.match(/---/) || stream.match(/\\.\\.\\./)) {\n          return \"def\";\n        }\n      }\n\n      // Handle inline objects and arrays. These can be nested arbitrarily but we\n      // don't currently support them spanning multiple lines.\n      if (stream.match(/^(\\{|\\}|\\[|\\])/)) {\n        if (ch === \"{\") {\n          state.inlineContainers = [\n            ...state.inlineContainers,\n            ContainerType.Dict\n          ];\n          state.inValue = false;\n        } else if (ch === \"}\") {\n          state.inlineContainers = state.inlineContainers.slice(\n            0,\n            state.inlineContainers.length - 1\n          );\n          state.parents = state.parents.slice(0, state.parents.length - 1);\n          state.inValue = state.inlineContainers.length > 0;\n        } else if (ch === \"[\") {\n          state.inlineContainers = [\n            ...state.inlineContainers,\n            ContainerType.List\n          ];\n        } else if (ch === \"]\") {\n          state.inlineContainers = state.inlineContainers.slice(\n            0,\n            state.inlineContainers.length - 1\n          );\n          state.inValue = state.inlineContainers.length > 0;\n        }\n        state.trailingSpace = false;\n        return \"meta\";\n      }\n\n      // Handle inline separators. For dictionaries, we pop from value parsing state back to\n      // key parsing state after a comma and unwind the parent stack.\n      if (state.inlineContainers && !wasEscaped && ch === \",\") {\n        const current =\n          state.inlineContainers[state.inlineContainers.length - 1];\n        if (current === ContainerType.Dict) {\n          state.parents = state.parents.slice(0, state.parents.length - 1);\n          state.inValue = false;\n        }\n        stream.next();\n        return \"meta\";\n      }\n\n      // A `:` fragment starts value parsing mode if it is not the last character on the line\n      if (stream.match(RegExps.DICT_COLON)) {\n        state.inValue = !stream.eol();\n        return \"meta\";\n      }\n\n      // general strings\n      if (stream.match(RegExps.QUOTED_STRING)) {\n        return \"string\";\n      }\n\n      // Handle dict key fragments. May be the first element on a line or nested within an inline\n      // (eg: {a: 1, b: 2}). We add the new key to the current `parent` and push a new parent\n      // in case the dict key has subkeys.\n      if (!state.inValue) {\n        const match = stream.match(RegExps.DICT_KEY);\n        if (match) {\n          const key = match[0];\n          const keyIndent = stream.pos - key.length;\n          state.parents = parentsAddingChildKeyAtIndent(\n            state.parents,\n            key,\n            keyIndent\n          );\n          return \"atom\";\n        }\n      }\n\n      if (state.inValue) {\n        let result = null;\n\n        if (stream.match(RegExps.QUOTED_STRING)) {\n          result = \"string\";\n        }\n        if (stream.match(RegExps.BLOCKSTART_PIPE_OR_ARROW)) {\n          state.inBlockLiteral = true;\n          result = \"meta\";\n        }\n        if (stream.match(RegExps.VARIABLE)) {\n          result = \"variable-2\";\n        }\n        if (stream.match(RegExps.NUMBER)) {\n          result = \"number\";\n        }\n        if (stream.match(RegExps.KEYWORD)) {\n          result = \"keyword\";\n        }\n\n        // Child dicts can start within a value if the user is creating a list\n        const match = stream.match(RegExps.DICT_KEY);\n        if (match) {\n          const key = match[0];\n          const keyIndent = stream.pos - key.length;\n          state.inValue = false;\n          state.parents = parentsAddingChildKeyAtIndent(\n            state.parents,\n            key,\n            keyIndent\n          );\n          result = \"atom\";\n        }\n\n        stream.eatSpace();\n\n        // If after consuming the value and trailing spaces we're at the end of the\n        // line, terminate the value and look for another key on the following line.\n        if (stream.eol() && !state.inBlockLiteral) {\n          state.inValue = false;\n        }\n\n        // If we can't identify the value, bail out and abort parsing the line\n        if (!result) {\n          stream.skipToEnd();\n          state.inValue = false;\n        }\n\n        return result;\n      }\n\n      stream.skipToEnd();\n\n      return null;\n    }\n  };\n});\n\n// TODO\n// Uniquity of keys\n// add colon\n// add colon and return for composites\n\ntype CodemirrorLocation = {\n  line: number;\n  ch: number;\n};\n\ntype CodemirrorHint = {\n  render: (el: Element, self: any, data: any) => void;\n  text: string;\n  from: CodemirrorLocation;\n  to: CodemirrorLocation;\n};\n\ntype CodemirrorToken = {\n  string: string;\n  start: number;\n  end: number;\n  type: string;\n  state: IParseState;\n};\n\ntype FoundHint = {\n  text: string;\n  displayText: string;\n};\n\nCodeMirror.registerHelper(\n  \"hint\",\n  \"yaml\",\n  (\n    editor: any,\n    options: {\n      schema?: ConfigEditorEnvironmentSchemaFragment;\n    }\n  ): { list: Array<CodemirrorHint> } => {\n    if (!options.schema) return { list: [] };\n\n    const {\n      cursor,\n      context,\n      token,\n      start,\n      searchString,\n      prevToken\n    } = expandAutocompletionContextAtCursor(editor);\n    if (!context) {\n      return { list: [] };\n    }\n\n    // Since writing meaningful tests for this functionality is difficult given a) no jsdom\n    // support for APIs that codemirror uses (and so no way to use snapshot tests) and b) no\n    // appetite (yet) for writing Selenium tests, we record here the manual tests used to verify\n    // this logic. In what follows, | represents the position of the cursor and -> the transition\n    // on accepting an autocomplete suggestion for `storage: filesystem:\n\n    // st|\n    // ->\n    // storage:\n    //   |\n\n    // storage:|\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage: |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage:  |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    // storage:\n    //   |\n    // ->\n    // storage:\n    //   filesystem:\n    //     |\n\n    const isCompOrList = (key: string): boolean => {\n      if (!options.schema) {\n        return false;\n      }\n      // Using a lookup table here seems like a good idea\n      // https://github.com/dagster-io/dagster/issues/1966\n      const type = options.schema.allConfigTypes.find(t => t.key === key);\n      if (!type) {\n        return false;\n      }\n      return (\n        type.__typename === \"ArrayConfigType\" ||\n        type.__typename === \"CompositeConfigType\"\n      );\n    };\n\n    const formatReplacement = (\n      field: any,\n      start: any,\n      token: CodemirrorToken,\n      prevToken: CodemirrorToken\n    ) => {\n      let replacement = `${field.name}`;\n\n      const isCompositeOrList = isCompOrList(field.configTypeKey);\n\n      const tokenIsColon = token.string.startsWith(\":\");\n\n      if (isCompositeOrList && tokenIsColon) {\n        replacement = `\\n${\" \".repeat(prevToken.start + 2)}${\n          field.name\n        }:\\n${\" \".repeat(prevToken.start + 4)}`;\n      } else if (isCompositeOrList) {\n        replacement = `${field.name}:\\n${\" \".repeat(start + 2)}`;\n      } else if (tokenIsColon) {\n        replacement = `\\n${\" \".repeat(prevToken.start + 2)}${field.name}`;\n      }\n      return replacement;\n    };\n\n    const buildSuggestion = (\n      display: string,\n      replacement: string,\n      description: string | null\n    ): CodemirrorHint => ({\n      text: replacement,\n      render: el => {\n        const div = document.createElement(\"div\");\n        div.textContent = display;\n        if (description) {\n          const docs = document.createElement(\"div\");\n          docs.innerText =\n            description.length < 90\n              ? description\n              : description.substr(0, 87) + \"...\";\n          docs.style.opacity = \"0.5\";\n          docs.style.overflow = \"hidden\";\n          docs.style.maxHeight = \"33px\";\n          docs.style.maxWidth = \"360px\";\n          docs.style.whiteSpace = \"normal\";\n          div.appendChild(docs);\n        }\n        el.appendChild(div);\n      },\n      from: { line: cursor.line, ch: start },\n      to: { line: cursor.line, ch: token.end }\n    });\n\n    // Calculate if this is on a new-line child of a scalar union type, as an indication that we\n    // should autocomplete the selector fields of the scalar union\n    const isScalarUnionNewLine =\n      context.type.__typename === \"ScalarUnionConfigType\" && !prevToken.end;\n\n    // The context will have available fields if the type is a composite config type OR a scalar\n    // union type\n    if (\n      context.availableFields.length &&\n      (context.type.__typename === \"CompositeConfigType\" ||\n        isScalarUnionNewLine)\n    ) {\n      return {\n        list: context.availableFields\n          .filter(field => field.name.startsWith(searchString))\n          .map(field =>\n            buildSuggestion(\n              field.name,\n              formatReplacement(field, start, token, prevToken),\n              field.description\n            )\n          )\n      };\n    }\n\n    // Completion of enum field values\n    if (context.type.__typename === \"EnumConfigType\") {\n      const searchWithoutQuotes = searchString.startsWith('\"')\n        ? searchString.substr(1)\n        : searchString;\n      return {\n        list: context.type.values\n          .filter(val => val.value.startsWith(searchWithoutQuotes))\n          .map(val => buildSuggestion(val.value, `\"${val.value}\"`, null))\n      };\n    }\n\n    // Completion of boolean field values\n    if (\n      context.type.__typename === \"RegularConfigType\" &&\n      context.type.givenName === \"Bool\"\n    ) {\n      return {\n        list: [\"True\", \"False\"]\n          .filter(val => val.startsWith(searchString))\n          .map(val => buildSuggestion(val, val, null))\n      };\n    }\n\n    // Completion of Scalar Union field values, the union of the scalar suggestions and the\n    // non-scalar suggestions\n    const type = context.type;\n    if (type.__typename === \"ScalarUnionConfigType\") {\n      const scalarType = options.schema.allConfigTypes.find(\n        x => x.key === type.scalarTypeKey\n      );\n      const nonScalarType = options.schema.allConfigTypes.find(\n        x => x.key === type.nonScalarTypeKey\n      );\n      let scalarSuggestions: CodemirrorHint[] = [];\n      if (\n        scalarType &&\n        scalarType.__typename === \"RegularConfigType\" &&\n        scalarType.givenName === \"Bool\"\n      ) {\n        scalarSuggestions = [\"True\", \"False\"]\n          .filter(val => val.startsWith(searchString))\n          .map(val => buildSuggestion(val, val, null));\n      }\n      let nonScalarSuggestions: CodemirrorHint[] = [];\n      if (nonScalarType && nonScalarType.__typename === \"CompositeConfigType\") {\n        nonScalarSuggestions = nonScalarType.fields\n          .filter(field => field.name.startsWith(searchString))\n          .map(field =>\n            buildSuggestion(\n              field.name,\n              formatReplacement(field, start, token, prevToken),\n              field.description\n            )\n          );\n      }\n\n      return { list: [...scalarSuggestions, ...nonScalarSuggestions] };\n    }\n\n    return { list: [] };\n  }\n);\n\n/** Takes the pipeline schema and the YAML tokenizer state and returns the\n * type in scope and available (yet-to-be-used) fields\n * if it is a composite type.\n */\nfunction findAutocompletionContext(\n  schema: ConfigEditorEnvironmentSchemaFragment | null,\n  parents: IParseStateParent[],\n  currentIndent: number\n) {\n  parents = parents.filter(({ indent }) => currentIndent > indent);\n  const immediateParent = parents[parents.length - 1];\n\n  if (!schema) {\n    // Schema may still be loading\n    return;\n  }\n\n  let type = schema.allConfigTypes.find(\n    t => t.key === schema.rootEnvironmentType.key\n  );\n  if (!type || type.__typename !== \"CompositeConfigType\") {\n    return null;\n  }\n\n  let available = type.fields;\n  let closestCompositeType = type;\n\n  if (available && parents.length > 0) {\n    for (const parent of parents) {\n      const parentTypeDef = available.find(({ name }) => parent.key === name);\n      if (!parentTypeDef) {\n        return null;\n      }\n\n      // The current composite type's available \"fields\" each only have a configType key.\n      // The rest of the configType's information is in the top level schema.allConfigTypes\n      // to avoid superlinear GraphQL response size.\n      const parentConfigType = schema.allConfigTypes.find(\n        t => t.key === parentTypeDef.configTypeKey\n      )!;\n      let childTypeKey = parentConfigType.key;\n      let childEntriesUnique = true;\n\n      if (parentConfigType.__typename === \"ArrayConfigType\") {\n        childTypeKey = parentConfigType.typeParamKeys[0];\n        childEntriesUnique = false;\n      }\n\n      type = schema.allConfigTypes.find(t => t.key === childTypeKey);\n      if (!type) {\n        return null;\n      }\n\n      if (type.__typename === \"ScalarUnionConfigType\") {\n        available = [];\n        const nonScalarTypeKey = type.nonScalarTypeKey;\n        const nonScalarType = schema.allConfigTypes.find(\n          x => x.key === nonScalarTypeKey\n        );\n        if (\n          nonScalarType &&\n          nonScalarType.__typename === \"CompositeConfigType\"\n        ) {\n          available = nonScalarType.fields;\n        }\n      } else if (type.__typename === \"CompositeConfigType\") {\n        closestCompositeType = type;\n        available = type.fields;\n\n        if (parent === immediateParent && childEntriesUnique) {\n          available = available.filter(\n            item => immediateParent.childKeys.indexOf(item.name) === -1\n          );\n        }\n      } else {\n        available = [];\n      }\n    }\n  }\n\n  return { type, closestCompositeType, availableFields: available };\n}\n\n// Find context for a fully- or partially- typed key or value in the YAML document\nexport function expandAutocompletionContextAtCursor(editor: any) {\n  const schema: ConfigEditorEnvironmentSchemaFragment =\n    editor.options.hintOptions.schema;\n\n  const cursor = editor.getCursor();\n  const token: CodemirrorToken = editor.getTokenAt(cursor);\n  const prevToken: CodemirrorToken = editor.getTokenAt({\n    line: cursor.line,\n    ch: token.start\n  });\n\n  let searchString: string;\n  let start: number;\n  if (token.type === \"whitespace\" || token.string.startsWith(\":\")) {\n    searchString = \"\";\n    start = token.end;\n  } else {\n    searchString = token.string;\n    start = token.start;\n  }\n\n  // Takes the schema and the YAML tokenizer state and returns the\n  // type in scope and available (yet-to-be-used) fields\n  // if it is a composite type.\n  return {\n    start,\n    cursor,\n    searchString,\n    token,\n    prevToken,\n    context: findAutocompletionContext(schema, token.state.parents, start)\n  };\n}\n\ntype CodemirrorLintError = {\n  message: string;\n  severity: \"error\" | \"warning\" | \"information\" | \"hint\";\n  type: \"validation\" | \"syntax\" | \"deprecation\";\n  from: CodemirrorLocation;\n  to: CodemirrorLocation;\n};\n\nexport type ValidationResult =\n  | {\n      isValid: true;\n    }\n  | {\n      isValid: false;\n      errors: Array<ValidationError>;\n    };\n\nexport type LintJson = (json: object) => Promise<ValidationResult>;\n\ntype ValidationError = {\n  message: string;\n  path: Array<string>;\n  reason: string;\n};\n\nCodeMirror.registerHelper(\"dagster-docs\", \"yaml\", (editor: any, pos: any) => {\n  const token = editor.getTokenAt(pos);\n\n  const schema: ConfigEditorEnvironmentSchemaFragment =\n    editor.options.hintOptions.schema;\n\n  if (token.type !== \"atom\") {\n    return null;\n  }\n\n  const context = findAutocompletionContext(\n    schema,\n    token.state.parents,\n    token.start\n  );\n  const match =\n    context &&\n    context.type.__typename === \"CompositeConfigType\" &&\n    context.type.fields.find(f => f.name === token.string);\n\n  if (match && match.description) {\n    return match.description;\n  }\n\n  return null;\n});\n\nCodeMirror.registerHelper(\n  \"lint\",\n  \"yaml\",\n  async (\n    text: string,\n    { checkConfig }: { checkConfig: LintJson },\n    editor: any\n  ): Promise<Array<CodemirrorLintError>> => {\n    const codeMirrorDoc = editor.getDoc();\n    const docs = yaml.parseAllDocuments(text);\n    if (docs.length === 0) {\n      return [];\n    }\n    // Assumption\n    const doc = docs[0];\n    const lints: Array<CodemirrorLintError> = [];\n    doc.errors.forEach(error => {\n      lints.push({\n        message: error.message,\n        severity: \"error\",\n        type: \"syntax\",\n        from: codeMirrorDoc.posFromIndex(\n          error.source.range ? error.source.range.start : 0\n        ) as any,\n        to: codeMirrorDoc.posFromIndex(\n          error.source.range ? error.source.range.end : Number.MAX_SAFE_INTEGER\n        ) as any\n      });\n    });\n\n    if (doc.errors.length === 0) {\n      const json = doc.toJSON() || {};\n      const validationResult = await checkConfig(json);\n      if (!validationResult.isValid) {\n        validationResult.errors.forEach(error => {\n          const part =\n            error.reason === \"RUNTIME_TYPE_MISMATCH\" ? \"value\" : \"key\";\n          const range = findRangeInDocumentFromPath(doc, error.path, part);\n          lints.push({\n            message: error.message,\n            severity: \"error\",\n            type: \"syntax\",\n            from: codeMirrorDoc.posFromIndex(range ? range.start : 0) as any,\n            to: codeMirrorDoc.posFromIndex(\n              range ? range.end : Number.MAX_SAFE_INTEGER\n            ) as any\n          });\n        });\n      }\n    }\n\n    return lints;\n  }\n);\n\nfunction findRangeInDocumentFromPath(\n  doc: yaml.ast.Document,\n  path: Array<string>,\n  pathPart: \"key\" | \"value\"\n): { start: number; end: number } | null {\n  let node: any = nodeAtPath(doc, path);\n  if (!node) return null;\n\n  if (node.type && node.type === \"PAIR\" && pathPart === \"value\" && node.value) {\n    node = node.value;\n  } else {\n    node = node.key;\n  }\n\n  if (node && node.range) {\n    return {\n      start: node.range[0],\n      end: node.range[1]\n    };\n  } else {\n    return null;\n  }\n}\n\nfunction nodeAtPath(\n  doc: yaml.ast.Document,\n  path: Array<string>\n): yaml.ast.Node | yaml.ast.Pair | null {\n  let node: any = doc.contents;\n  for (let i = 0; i < path.length; i++) {\n    const part = path[i];\n    if (node && node.type && node.type === \"PAIR\") {\n      node = node.value;\n    }\n\n    if (\n      node &&\n      node.type &&\n      (node.type === \"SEQ\" || node.type === \"FLOW_SEQ\")\n    ) {\n      const index = Number.parseInt(part);\n      if (!Number.isNaN(index)) {\n        node = node.items[index];\n      } else {\n        return null;\n      }\n    } else if (\n      node &&\n      node.type &&\n      (node.type === \"FLOW_MAP\" || node.type === \"MAP\")\n    ) {\n      const item = node.items.find(\n        ({ key }: { key: any }) => key.value === part\n      );\n      if (item && item.type && item.type === \"PAIR\") {\n        node = item;\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  return node;\n}\n","import * as React from \"react\";\nimport { createGlobalStyle } from \"styled-components/macro\";\nimport \"codemirror\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/addon/hint/show-hint.css\";\nimport \"codemirror/addon/comment/comment\";\nimport \"codemirror/addon/fold/foldgutter\";\nimport \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/indent-fold\";\nimport \"codemirror/addon/search/search\";\nimport \"codemirror/addon/search/searchcursor\";\nimport \"codemirror/addon/search/jump-to-line\";\nimport \"codemirror/addon/dialog/dialog\";\nimport \"./codemirror-yaml/lint\"; // Patch lint\nimport \"codemirror/addon/lint/lint.css\";\nimport \"codemirror/keymap/sublime\";\nimport { Controlled as CodeMirrorReact } from \"react-codemirror2\";\nimport { Editor } from \"codemirror\";\nimport {\n  ConfigEditorEnvironmentSchemaFragment,\n  ConfigEditorEnvironmentSchemaFragment_allConfigTypes\n} from \"./types/ConfigEditorEnvironmentSchemaFragment\";\nimport \"./codemirror-yaml/mode\";\nimport {\n  LintJson as YamlModeLintJson,\n  expandAutocompletionContextAtCursor\n} from \"./codemirror-yaml/mode\";\nimport { debounce } from \"../Util\";\n\nexport function isHelpContextEqual(\n  prev: ConfigEditorHelpContext | null,\n  next: ConfigEditorHelpContext | null\n) {\n  return (prev && prev.type.key) === (next && next.type.key);\n}\n\ninterface ConfigEditorProps {\n  checkConfig: YamlModeLintJson;\n  configCode: string;\n  onConfigChange: (newValue: string) => void;\n  onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;\n  environmentSchema?: ConfigEditorEnvironmentSchemaFragment;\n  readOnly: boolean;\n  showWhitespace: boolean;\n}\n\nconst AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;\nconst performLint = debounce((editor: any) => {\n  editor.performLint();\n}, 1000);\n\nconst CodeMirrorShimStyle = createGlobalStyle`\n  .react-codemirror2 {\n    height: 100%;\n    flex: 1;\n    position: relative;\n  }\n  .react-codemirror2 .CodeMirror {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: initial;\n  }\n`;\nconst CodeMirrorWhitespaceStyle = createGlobalStyle`\n.cm-whitespace {\n  /*\n    Note: background is a 16x16px PNG containing a semi-transparent gray dot. 8.4px\n    is the exact width of a character in Codemirror's monospace font. It's consistent\n    in Firefox and Chrome and doesn't change on zoom in / out, but may need to be\n    modified if we change the Codemirror font.\n  */\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n.cm-whitespace.CodeMirror-lint-mark-error {\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n`;\n\nexport interface ConfigEditorHelpContext {\n  type: ConfigEditorEnvironmentSchemaFragment_allConfigTypes;\n}\n\nexport class ConfigEditor extends React.Component<ConfigEditorProps> {\n  _editor?: Editor;\n\n  componentDidUpdate(prevProps: ConfigEditorProps) {\n    if (!this._editor) return;\n    if (prevProps.environmentSchema === this.props.environmentSchema) return;\n    this.performInitialPass();\n  }\n\n  performInitialPass() {\n    // update the gutter and redlining\n    performLint(this._editor);\n\n    // update the contextual help based on the environmentSchema and content\n    const { context } = expandAutocompletionContextAtCursor(this._editor);\n    this.props.onHelpContextChange(\n      context ? { type: context.closestCompositeType } : null\n    );\n  }\n\n  render() {\n    // Unfortunately, CodeMirror is too intense to be simulated in the JSDOM \"virtual\" DOM.\n    // Until we run tests against something like selenium, trying to render the editor in\n    // tests have to stop here.\n    if (process.env.NODE_ENV === \"test\") {\n      return <span />;\n    }\n\n    return (\n      <div style={{ flex: 1, position: \"relative\" }}>\n        <CodeMirrorShimStyle />\n        {this.props.showWhitespace ? <CodeMirrorWhitespaceStyle /> : null}\n        <CodeMirrorReact\n          value={this.props.configCode}\n          options={\n            {\n              mode: \"yaml\",\n              theme: \"default\",\n              lineNumbers: true,\n              readOnly: this.props.readOnly,\n              indentUnit: 2,\n              smartIndent: true,\n              showCursorWhenSelecting: true,\n              lintOnChange: false,\n              lint: {\n                checkConfig: this.props.checkConfig,\n                lintOnChange: false,\n                onUpdateLinting: false\n              },\n              hintOptions: {\n                completeSingle: false,\n                closeOnUnfocus: false,\n                schema: this.props.environmentSchema\n              },\n              keyMap: \"sublime\",\n              extraKeys: {\n                \"Cmd-Space\": (editor: any) =>\n                  editor.showHint({\n                    completeSingle: true\n                  }),\n                \"Ctrl-Space\": (editor: any) =>\n                  editor.showHint({\n                    completeSingle: true\n                  }),\n                \"Alt-Space\": (editor: any) =>\n                  editor.showHint({\n                    completeSingle: true\n                  }),\n                \"Shift-Space\": (editor: any) =>\n                  editor.showHint({\n                    completeSingle: true\n                  }),\n                \"Shift-Tab\": (editor: any) => editor.execCommand(\"indentLess\"),\n                Tab: (editor: any) => editor.execCommand(\"indentMore\"),\n                // Persistent search box in Query Editor\n                \"Cmd-F\": \"findPersistent\",\n                \"Ctrl-F\": \"findPersistent\",\n                \"Cmd-Z\": (editor: any) => editor.undo(),\n                \"Cmd-Y\": (editor: any) => editor.redo()\n              },\n              gutters: [\n                \"CodeMirror-foldgutter\",\n                \"CodeMirror-lint-markers\",\n                \"CodeMirror-linenumbers\"\n              ],\n              foldGutter: true\n            } as any\n          }\n          editorDidMount={editor => {\n            this._editor = editor;\n            this.performInitialPass();\n          }}\n          onBeforeChange={(editor, data, value) => {\n            this.props.onConfigChange(value);\n          }}\n          onCursorActivity={(editor: any) => {\n            if (editor.getSelection().length) {\n              this.props.onHelpContextChange(null);\n            } else {\n              const { context } = expandAutocompletionContextAtCursor(editor);\n              this.props.onHelpContextChange(\n                context ? { type: context.closestCompositeType } : null\n              );\n            }\n          }}\n          onChange={(editor: any) => {\n            performLint(editor);\n          }}\n          onBlur={(editor: any) => {\n            performLint(editor);\n          }}\n          onKeyUp={(editor, event: KeyboardEvent) => {\n            if (AUTO_COMPLETE_AFTER_KEY.test(event.key)) {\n              editor.execCommand(\"autocomplete\");\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { Button, Menu, MenuItem, Icon } from \"@blueprintjs/core\";\n\nimport { Select } from \"@blueprintjs/select\";\nimport { useQuery } from \"react-apollo\";\nimport {\n  ConfigPresetsQuery,\n  ConfigPresetsQuery_pipeline_presets\n} from \"./types/ConfigPresetsQuery\";\nimport {\n  ConfigPartitionsQuery,\n  ConfigPartitionsQuery_partitionSetOrError_PartitionSet_partitions\n} from \"./types/ConfigPartitionsQuery\";\nimport {\n  ConfigPartitionSetsQuery,\n  ConfigPartitionSetsQuery_partitionSetsOrError_PartitionSets_results\n} from \"./types/ConfigPartitionSetsQuery\";\nimport gql from \"graphql-tag\";\nimport { IExecutionSession } from \"../LocalStorage\";\nimport ApolloClient from \"apollo-client\";\nimport { isEqual } from \"apollo-utilities\";\nimport styled from \"styled-components\";\n\ntype Preset = ConfigPresetsQuery_pipeline_presets;\ntype PartitionSet = ConfigPartitionSetsQuery_partitionSetsOrError_PartitionSets_results;\ntype Partition = ConfigPartitionsQuery_partitionSetOrError_PartitionSet_partitions;\ntype ConfigGenerator = Preset | PartitionSet;\n\nconst ConfigGeneratorSelect = Select.ofType<ConfigGenerator>();\nconst PartitionSelect = Select.ofType<Partition>();\n\ninterface ConfigEditorConfigPickerProps {\n  pipelineName: string;\n  solidSubset: string[] | null;\n  onCreateSession: (initial: Partial<IExecutionSession>) => void;\n}\n\ninterface ConfigEditorConfigPickerState {\n  selectedConfigGenerator: ConfigGenerator | null;\n  selectedPartition: Partition | null;\n}\n\ninterface ConfigEditorConfigGeneratorPickerProps {\n  pipelineName: string;\n  solidSubset: string[] | null;\n  selectedConfigGenerator: ConfigGenerator | null;\n  onCreateSession: (initial: Partial<IExecutionSession>) => void;\n  onSelectConfigGenerator: (configGenerator: ConfigGenerator) => void;\n}\n\nexport class ConfigEditorConfigPicker extends React.Component<\n  ConfigEditorConfigPickerProps\n> {\n  state: Readonly<ConfigEditorConfigPickerState> = {\n    selectedConfigGenerator: null,\n    selectedPartition: null\n  };\n\n  onSelectConfigGenerator = (configGenerator: ConfigGenerator) => {\n    this.setState({ selectedConfigGenerator: configGenerator });\n    this.setState({ selectedPartition: null });\n  };\n\n  onSelectPartition = (partition: Partition) => {\n    this.setState({ selectedPartition: partition });\n  };\n\n  render() {\n    const { selectedConfigGenerator } = this.state;\n\n    return (\n      <PickerContainer>\n        <ConfigEditorConfigGeneratorPicker\n          pipelineName={this.props.pipelineName}\n          solidSubset={this.props.solidSubset}\n          onCreateSession={this.props.onCreateSession}\n          selectedConfigGenerator={this.state.selectedConfigGenerator}\n          onSelectConfigGenerator={this.onSelectConfigGenerator}\n        />\n        {selectedConfigGenerator &&\n          selectedConfigGenerator.__typename === \"PartitionSet\" && (\n            <>\n              <Icon icon=\"chevron-right\" style={{ padding: \"0 10px\" }} />\n              <ConfigEditorPartitionPicker\n                pipelineName={this.props.pipelineName}\n                partitionSet={selectedConfigGenerator}\n                selectedPartition={this.state.selectedPartition}\n                onSelectPartition={this.onSelectPartition}\n                onCreateSession={this.props.onCreateSession}\n              />\n            </>\n          )}\n      </PickerContainer>\n    );\n  }\n}\n\ninterface ConfigEditorPartitionPickerProps {\n  pipelineName: string;\n  partitionSet: PartitionSet;\n  selectedPartition: Partition | null;\n  onSelectPartition: (partition: Partition) => void;\n  onCreateSession: (initial: Partial<IExecutionSession>) => void;\n}\n\nexport const ConfigEditorPartitionPicker: React.FunctionComponent<ConfigEditorPartitionPickerProps> = React.memo(\n  props => {\n    const {\n      pipelineName,\n      partitionSet,\n      onCreateSession,\n      onSelectPartition,\n      selectedPartition\n    } = props;\n\n    const onPartitionSelect = async (partition: Partition) => {\n      onCreateSession({\n        name: partition.name,\n        pipeline: pipelineName,\n        environmentConfigYaml: partition.environmentConfigYaml || \"\",\n        solidSubset: partition.solidSubset,\n        mode: partition.mode\n      });\n      onSelectPartition(partition);\n    };\n\n    const { data } = useQuery<ConfigPartitionsQuery>(CONFIG_PARTITIONS_QUERY, {\n      fetchPolicy: \"network-only\",\n      variables: { partitionSetName: partitionSet.name }\n    });\n\n    const partitions: Partition[] =\n      (data &&\n        data.partitionSetOrError.__typename === \"PartitionSet\" &&\n        data.partitionSetOrError.partitions) ||\n      [];\n\n    return (\n      <div>\n        <PartitionSelect\n          items={partitions}\n          itemPredicate={(query, partition) =>\n            query.length === 0 || partition.name.includes(query)\n          }\n          itemRenderer={(partition, props) => (\n            <Menu.Item\n              active={props.modifiers.active}\n              onClick={props.handleClick}\n              key={partition.name}\n              text={partition.name}\n            />\n          )}\n          noResults={<Menu.Item disabled={true} text=\"No presets.\" />}\n          onItemSelect={partition => onPartitionSelect(partition)}\n        >\n          <Button\n            text={selectedPartition ? selectedPartition.name : \"\"}\n            icon=\"insert\"\n            rightIcon=\"caret-down\"\n          />\n        </PartitionSelect>\n      </div>\n    );\n  },\n  isEqual\n);\n\nexport const ConfigEditorConfigGeneratorPicker: React.FunctionComponent<ConfigEditorConfigGeneratorPickerProps> = React.memo(\n  props => {\n    const { pipelineName, onCreateSession, onSelectConfigGenerator } = props;\n\n    const onPresetSelect = async (\n      preset: Preset,\n      pipelineName: string,\n      client: ApolloClient<any>\n    ) => {\n      const { data } = await client.query({\n        query: CONFIG_PRESETS_QUERY,\n        variables: { pipelineName },\n        fetchPolicy: \"network-only\"\n      });\n      let updatedPreset = preset;\n      for (const p of data.pipeline.presets) {\n        if (p.name === preset.name) {\n          updatedPreset = p;\n          break;\n        }\n      }\n      onCreateSession({\n        name: updatedPreset.name,\n        pipeline: pipelineName,\n        environmentConfigYaml: updatedPreset.environmentConfigYaml || \"\",\n        solidSubset: updatedPreset.solidSubset,\n        mode: updatedPreset.mode\n      });\n      onSelectConfigGenerator(updatedPreset);\n    };\n\n    const onPartitionSetSelect = async (partitionSet: PartitionSet) => {\n      onSelectConfigGenerator(partitionSet);\n    };\n\n    const { data, client } = useQuery<ConfigPresetsQuery>(\n      CONFIG_PRESETS_QUERY,\n      {\n        fetchPolicy: \"network-only\",\n        variables: { pipelineName }\n      }\n    );\n\n    const presets: Preset[] = (\n      (data &&\n        data.pipeline &&\n        data.pipeline.__typename === \"Pipeline\" &&\n        data.pipeline.presets) ||\n      []\n    ).sort((a, b) => a.name.localeCompare(b.name));\n\n    const { data: partitionsData } = useQuery<ConfigPartitionSetsQuery>(\n      CONFIG_PARTITION_SETS_QUERY,\n      {\n        fetchPolicy: \"network-only\",\n        variables: { pipelineName }\n      }\n    );\n\n    const partitionSets: PartitionSet[] =\n      (partitionsData &&\n        partitionsData.partitionSetsOrError.__typename === \"PartitionSets\" &&\n        partitionsData.partitionSetsOrError.results) ||\n      [];\n\n    // This is done in two steps because we can't do\n    // presets.concat(partitionsSets) since they are different types\n    let configGenerators: ConfigGenerator[] = presets;\n    configGenerators = configGenerators.concat(partitionSets);\n\n    return (\n      <div>\n        <ConfigGeneratorSelect\n          items={configGenerators}\n          itemPredicate={(query, configGenerator) =>\n            query.length === 0 || configGenerator.name.includes(query)\n          }\n          itemListRenderer={({ itemsParentRef, renderItem, filteredItems }) => {\n            const presetItems = filteredItems.filter(\n              item => item.__typename === \"PipelinePreset\"\n            );\n\n            const partitionSetItems = filteredItems.filter(\n              item => item.__typename === \"PartitionSet\"\n            );\n\n            const renderedPresetItems = presetItems\n              .map(renderItem)\n              .filter(item => item != null);\n\n            const renderedPartitionSetItems = partitionSetItems\n              .map(renderItem)\n              .filter(item => item != null);\n\n            return (\n              <Menu ulRef={itemsParentRef}>\n                {renderedPresetItems.length > 0 && (\n                  <>\n                    <MenuItem disabled={true} text={`Presets`} />\n                    {renderedPresetItems}\n                  </>\n                )}\n                {renderedPresetItems.length > 0 &&\n                  renderedPartitionSetItems.length > 0 && <Menu.Divider />}\n                {renderedPartitionSetItems.length > 0 && (\n                  <>\n                    <MenuItem disabled={true} text={`Partitions`} />\n                    {renderedPartitionSetItems}\n                  </>\n                )}\n              </Menu>\n            );\n          }}\n          itemRenderer={(configGenerator, props) => (\n            <Menu.Item\n              active={props.modifiers.active}\n              onClick={props.handleClick}\n              key={configGenerator.name}\n              text={configGenerator.name}\n            />\n          )}\n          noResults={<Menu.Item disabled={true} text=\"No presets.\" />}\n          onItemSelect={selection => {\n            selection.__typename === \"PipelinePreset\"\n              ? onPresetSelect(selection, pipelineName, client)\n              : onPartitionSetSelect(selection);\n          }}\n        >\n          <Button\n            text={\n              props.selectedConfigGenerator\n                ? props.selectedConfigGenerator.name\n                : \"\"\n            }\n            icon=\"insert\"\n            rightIcon=\"caret-down\"\n          />\n        </ConfigGeneratorSelect>\n      </div>\n    );\n  },\n  isEqual\n);\n\nconst PickerContainer = styled.div`\n  display: flex;\n  justify: space-between;\n  align-items: center;\n`;\n\nexport const CONFIG_PRESETS_QUERY = gql`\n  query ConfigPresetsQuery($pipelineName: String!) {\n    pipeline(params: { name: $pipelineName }) {\n      name\n      presets {\n        __typename\n        name\n        solidSubset\n        environmentConfigYaml\n        mode\n      }\n    }\n  }\n`;\n\nexport const CONFIG_PARTITION_SETS_QUERY = gql`\n  query ConfigPartitionSetsQuery($pipelineName: String!) {\n    partitionSetsOrError(pipelineName: $pipelineName) {\n      __typename\n      ... on PartitionSets {\n        results {\n          name\n        }\n      }\n    }\n  }\n`;\n\nexport const CONFIG_PARTITIONS_QUERY = gql`\n  query ConfigPartitionsQuery($partitionSetName: String!) {\n    partitionSetOrError(partitionSetName: $partitionSetName) {\n      __typename\n      ... on PartitionSet {\n        partitions {\n          name\n          solidSubset\n          environmentConfigYaml\n          mode\n        }\n      }\n    }\n  }\n`;\n","import * as React from \"react\";\nimport { Button, Intent, Menu } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { Select } from \"@blueprintjs/select\";\nimport { PipelineDetailsFragment_modes } from \"./types/PipelineDetailsFragment\";\nimport { ModeNotFoundError } from \"./ExecutionSessionContainer\";\n\ninterface ConfigEditorModePickerProps {\n  modes: PipelineDetailsFragment_modes[];\n  modeError?: ModeNotFoundError;\n  modeName: string | null;\n  onModeChange: (mode: string) => void;\n}\n\ninterface Mode {\n  name: string;\n}\n\nconst ModeSelect = Select.ofType<Mode>();\n\nexport class ConfigEditorModePicker extends React.PureComponent<\n  ConfigEditorModePickerProps\n> {\n  getModeFromProps = (props: ConfigEditorModePickerProps) => {\n    return props.modeName\n      ? props.modes.find(m => m.name === props.modeName)\n      : props.modes[0];\n  };\n\n  getCurrentMode = () => {\n    return this.getModeFromProps(this.props);\n  };\n\n  componentDidMount() {\n    const currentMode = this.getCurrentMode();\n    if (currentMode) {\n      this.props.onModeChange && this.props.onModeChange(currentMode.name);\n    }\n  }\n\n  componentDidUpdate(prevProps: ConfigEditorModePickerProps) {\n    const currentMode = this.getCurrentMode();\n    const prevMode = this.getModeFromProps(prevProps);\n\n    if (currentMode && currentMode !== prevMode) {\n      this.props.onModeChange && this.props.onModeChange(currentMode.name);\n    }\n  }\n\n  render() {\n    const singleMode = this.props.modes.length === 1;\n    const currentMode = this.getCurrentMode();\n    const valid = !this.props.modeError;\n\n    return (\n      <ModeSelect\n        activeItem={currentMode}\n        filterable={true}\n        disabled={singleMode && valid}\n        items={this.props.modes}\n        itemPredicate={(query, mode) =>\n          query.length === 0 || mode.name.includes(query)\n        }\n        itemRenderer={(mode, props) => (\n          <Menu.Item\n            active={props.modifiers.active}\n            key={mode.name}\n            text={mode.name}\n            onClick={props.handleClick}\n          />\n        )}\n        onItemSelect={this.onItemSelect}\n      >\n        <Button\n          icon={valid ? \"insert\" : IconNames.WARNING_SIGN}\n          intent={valid ? Intent.NONE : Intent.WARNING}\n          text={\n            valid\n              ? currentMode\n                ? `Mode: ${currentMode.name}`\n                : \"Select Mode\"\n              : \"Invalid Mode Selection\"\n          }\n          disabled={singleMode && valid}\n          rightIcon=\"caret-down\"\n        />\n      </ModeSelect>\n    );\n  }\n\n  private onItemSelect = (mode: Mode) => {\n    this.props.onModeChange && this.props.onModeChange(mode.name);\n  };\n}\n","import gql from \"graphql-tag\";\nimport { ValidationResult } from \"./codemirror-yaml/mode\";\nimport { ConfigEditorValidationFragment } from \"./types/ConfigEditorValidationFragment\";\n\nexport const CONFIG_EDITOR_ENVIRONMENT_SCHEMA_FRAGMENT = gql`\n  fragment ConfigEditorEnvironmentSchemaFragment on EnvironmentSchema {\n    rootEnvironmentType {\n      key\n    }\n    allConfigTypes {\n      __typename\n      key\n      description\n      isSelector\n      typeParamKeys\n      ... on RegularConfigType {\n        givenName\n      }\n      ... on EnumConfigType {\n        givenName\n        values {\n          value\n          description\n        }\n      }\n      ... on CompositeConfigType {\n        fields {\n          name\n          description\n          isOptional\n          configTypeKey\n        }\n      }\n      ... on ScalarUnionConfigType {\n        key\n        scalarTypeKey\n        nonScalarTypeKey\n      }\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_VALIDATION_FRAGMENT = gql`\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on PipelineConfigValidationInvalid {\n      errors {\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              field {\n                name\n              }\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport async function responseToValidationResult(\n  config: object,\n  response: ConfigEditorValidationFragment\n): Promise<ValidationResult> {\n  if (response.__typename !== \"PipelineConfigValidationInvalid\") {\n    return { isValid: true };\n  }\n\n  const errors = response.errors.map(({ message, reason, stack }) => ({\n    message: message,\n    reason: reason,\n    path: stack.entries.map(entry =>\n      entry.__typename === \"EvaluationStackPathEntry\"\n        ? entry.field.name\n        : `${entry.listIndex}`\n    )\n  }));\n\n  // Errors at the top level have no stack path because they are not within any\n  // dicts. To avoid highlighting the entire editor, associate them with the first\n  // element of the top dict.\n  const topLevelKey = Object.keys(config);\n  errors.forEach(error => {\n    if (error.path.length === 0 && topLevelKey.length) {\n      error.path = [topLevelKey[0]];\n    }\n  });\n\n  return { isValid: false, errors: errors };\n}\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\n\ntype ConfigTypeSchemaTheme = \"dark\" | \"light\";\n\ninterface ConfigTypeSchemaProps {\n  type: TypeData;\n  typesInScope: TypeData[];\n  theme?: ConfigTypeSchemaTheme;\n  maxDepth?: number;\n}\n\ninterface FieldData {\n  name: string;\n  description: string | null;\n  isOptional: boolean;\n  configTypeKey: string;\n}\n\ninterface CommonTypeData {\n  key: string;\n  description: string | null;\n}\n\ninterface CompositeTypeData extends CommonTypeData {\n  __typename: \"CompositeConfigType\";\n  isSelector: boolean;\n  fields: FieldData[];\n}\n\ninterface ListTypeData extends CommonTypeData {\n  __typename: \"ArrayConfigType\";\n  typeParamKeys: string[];\n}\n\ninterface NullableTypeData extends CommonTypeData {\n  __typename: \"NullableConfigType\";\n  typeParamKeys: string[];\n}\n\ninterface EnumTypeData extends CommonTypeData {\n  __typename: \"EnumConfigType\";\n  givenName: string;\n}\n\ninterface RegularTypeData extends CommonTypeData {\n  __typename: \"RegularConfigType\";\n  givenName: string;\n}\n\ninterface ScalarUnionTypeData extends CommonTypeData {\n  __typename: \"ScalarUnionConfigType\";\n  nonScalarTypeKey: string;\n  scalarTypeKey: string;\n}\n\nexport type TypeData =\n  | CompositeTypeData\n  | ListTypeData\n  | NullableTypeData\n  | RegularTypeData\n  | EnumTypeData\n  | ScalarUnionTypeData;\n\nfunction renderTypeRecursive(\n  type: TypeData,\n  typeLookup: { [typeName: string]: TypeData },\n  depth: number,\n  props: ConfigTypeSchemaProps\n): React.ReactElement<HTMLElement> {\n  if (\n    type.__typename === \"CompositeConfigType\" &&\n    props.maxDepth &&\n    depth === props.maxDepth\n  ) {\n    return <span>...</span>;\n  }\n  if (type.__typename === \"CompositeConfigType\") {\n    const innerIndent = \"  \".repeat(depth + 1);\n    return (\n      <>\n        {`{`}\n        {type.isSelector && (\n          <DictBlockComment\n            indent={innerIndent}\n            content={`One of the following:`}\n          />\n        )}\n        {type.fields.map(fieldData => (\n          <DictEntry key={fieldData.name}>\n            <DictBlockComment\n              indent={innerIndent}\n              content={fieldData.description}\n            />\n            {innerIndent}\n            <DictKey theme={props.theme}>{fieldData.name}</DictKey>\n            {fieldData.isOptional && Optional}\n            {`: `}\n            {renderTypeRecursive(\n              typeLookup[fieldData.configTypeKey],\n              typeLookup,\n              depth + 1,\n              props\n            )}\n          </DictEntry>\n        ))}\n        {\"  \".repeat(depth) + \"}\"}\n      </>\n    );\n  }\n  if (type.__typename === \"ArrayConfigType\") {\n    const ofTypeKey = type.typeParamKeys[0];\n    return (\n      <>\n        [{renderTypeRecursive(typeLookup[ofTypeKey], typeLookup, depth, props)}]\n      </>\n    );\n  }\n  if (type.__typename === \"NullableConfigType\") {\n    const ofTypeKey = type.typeParamKeys[0];\n    return (\n      <>\n        {renderTypeRecursive(typeLookup[ofTypeKey], typeLookup, depth, props)}\n        {Optional}\n      </>\n    );\n  }\n\n  if (type.__typename === \"ScalarUnionConfigType\") {\n    const nonScalarTypeMarkup = renderTypeRecursive(\n      typeLookup[type.nonScalarTypeKey],\n      typeLookup,\n      depth,\n      props\n    );\n    const scalarTypeMarkup = renderTypeRecursive(\n      typeLookup[type.scalarTypeKey],\n      typeLookup,\n      depth,\n      props\n    );\n\n    return (\n      <span>\n        {scalarTypeMarkup} | {nonScalarTypeMarkup}\n      </span>\n    );\n  }\n\n  return <span>{type.givenName}</span>;\n}\n\nexport class ConfigTypeSchema extends React.PureComponent<\n  ConfigTypeSchemaProps\n> {\n  static fragments = {\n    ConfigTypeSchemaFragment: gql`\n      fragment ConfigTypeSchemaFragment on ConfigType {\n        ... on EnumConfigType {\n          givenName\n        }\n        ... on RegularConfigType {\n          givenName\n        }\n        key\n        description\n        isSelector\n        typeParamKeys\n        ... on CompositeConfigType {\n          fields {\n            name\n            description\n            isOptional\n            configTypeKey\n          }\n        }\n        ... on ScalarUnionConfigType {\n          scalarTypeKey\n          nonScalarTypeKey\n        }\n      }\n    `\n  };\n\n  public render() {\n    const { type, typesInScope } = this.props;\n\n    const typeLookup = {};\n    for (const typeInScope of typesInScope) {\n      typeLookup[typeInScope.key] = typeInScope;\n    }\n\n    return (\n      <TypeSchemaContainer>\n        <DictBlockComment content={type.description} indent=\"\" />\n        {renderTypeRecursive(type, typeLookup, 0, this.props)}\n      </TypeSchemaContainer>\n    );\n  }\n}\n\nconst TypeSchemaContainer = styled.code`\n  color: ${Colors.GRAY3};\n  display: block;\n  white-space: pre-wrap;\n  font-size: smaller;\n  line-height: 18px;\n`;\n\nconst DictEntry = styled.div``;\n\nconst DictKey = styled.span<{ theme: ConfigTypeSchemaTheme | undefined }>`\n  color: ${({ theme }) => (theme === \"dark\" ? Colors.WHITE : Colors.BLACK)};\n`;\n\nconst DictComment = styled.div`\n  /* This allows long comments to wrap as nice indented blocks, while\n     copy/pasting as a single line with space-based indentation. */\n  text-indent: -1.85em;\n  padding-left: 1.85em;\n  white-space: initial;\n`;\n\nconst DictBlockComment = ({\n  indent = \"\",\n  content\n}: {\n  indent: string;\n  content: string | null;\n}) =>\n  content !== null && content !== \"\" ? (\n    <DictComment>{`${indent.replace(\n      / /g,\n      \"\\u00A0\"\n    )}/* ${content} */`}</DictComment>\n  ) : null;\n\nconst Optional = (\n  <span style={{ fontWeight: 500, color: Colors.ORANGE2 }}>?</span>\n);\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport {\n  ConfigEditorHelpContext,\n  isHelpContextEqual\n} from \"../configeditor/ConfigEditor\";\nimport { ConfigTypeSchema, TypeData } from \"../ConfigTypeSchema\";\n\ninterface ConfigEditorHelpProps {\n  context: ConfigEditorHelpContext | null;\n  allInnerTypes: TypeData[];\n}\n\nexport const ConfigEditorHelp: React.FunctionComponent<ConfigEditorHelpProps> = React.memo(\n  ({ context, allInnerTypes }) => {\n    if (!context) {\n      return <span />;\n    }\n    return (\n      <Container>\n        <ConfigScrollWrap>\n          <ConfigTypeSchema\n            type={context.type}\n            typesInScope={allInnerTypes}\n            maxDepth={2}\n          />\n        </ConfigScrollWrap>\n        <AutocompletionsNote>\n          Ctrl+Space to show auto-completions inline.\n        </AutocompletionsNote>\n      </Container>\n    );\n  },\n  (prev, next) => isHelpContextEqual(prev.context, next.context)\n);\n\nexport const ConfigEditorHelpConfigTypeFragment = gql`\n  fragment ConfigEditorHelpConfigTypeFragment on ConfigType {\n    ...ConfigTypeSchemaFragment\n  }\n  ${ConfigTypeSchema.fragments.ConfigTypeSchemaFragment}\n`;\n\nconst AutocompletionsNote = styled.div`\n  font-size: 0.75rem;\n  text-align: center;\n  padding: 4px;\n  border-top: 1px solid ${Colors.LIGHT_GRAY1};\n  background: rgba(0, 0, 0, 0.07);\n  color: rgba(0, 0, 0, 0.7);\n`;\n\nconst ConfigScrollWrap = styled.div`\n  padding: 8px;\n  max-height: calc(100vh - 230px);\n  overflow-y: auto;\n`;\n\nconst Container = styled.div`\n  width: 300px;\n  top: 54px;\n  right: 10px;\n  color: black;\n  background-color: #e1e8edd1;\n  position: absolute;\n  align-items: center;\n  z-index: 3;\n`;\n","import * as React from \"react\";\n\nexport const PipelineNamesContext = React.createContext<string[]>([]);\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Select } from \"@blueprintjs/select\";\nimport { Button, MenuItem } from \"@blueprintjs/core\";\nimport gql from \"graphql-tag\";\nimport { SolidJumpBarFragment_solids } from \"./types/SolidJumpBarFragment\";\nimport { PipelineNamesContext } from \"./PipelineNamesContext\";\nimport { ShortcutHandler } from \"./ShortcutHandler\";\n\ninterface PipelineJumpBarProps {\n  selectedPipelineName: string | undefined;\n  onChange: (pipelineName: string) => void;\n}\n\ninterface SolidJumpBarProps {\n  solids: Array<SolidJumpBarFragment_solids>;\n  selectedSolid: SolidJumpBarFragment_solids | undefined;\n  onChange: (solid: SolidJumpBarFragment_solids) => void;\n}\n\nexport class SolidJumpBar extends React.Component<SolidJumpBarProps> {\n  static fragments = {\n    SolidJumpBarFragment: gql`\n      fragment SolidJumpBarFragment on Pipeline {\n        solids {\n          name\n        }\n      }\n    `\n  };\n\n  select: React.RefObject<Select<string>> = React.createRef();\n\n  render() {\n    const { solids, selectedSolid, onChange } = this.props;\n\n    return (\n      <ShortcutHandler\n        onShortcut={() => activateSelect(this.select.current)}\n        shortcutLabel={`⌥S`}\n        shortcutFilter={e => e.keyCode === 83 && e.altKey}\n      >\n        <StringSelect\n          ref={this.select}\n          items={solids.map(s => s.name)}\n          itemRenderer={BasicStringRenderer}\n          itemListPredicate={BasicStringPredicate}\n          noResults={<MenuItem disabled={true} text=\"No results.\" />}\n          onItemSelect={name => onChange(solids.find(s => s.name === name)!)}\n        >\n          <Button\n            text={selectedSolid ? selectedSolid.name : \"Select a Solid...\"}\n            rightIcon=\"double-caret-vertical\"\n          />\n        </StringSelect>\n      </ShortcutHandler>\n    );\n  }\n}\n\nexport class PipelineJumpBar extends React.Component<PipelineJumpBarProps> {\n  select: React.RefObject<Select<string>> = React.createRef();\n\n  onGlobalKeyDown = (event: KeyboardEvent) => {\n    if (event.keyCode === 80 && event.altKey) {\n      // Opt-P\n      activateSelect(this.select.current);\n      event.preventDefault();\n    }\n    if (this.select.current && this.select.current.state.isOpen) {\n      if (event.key === \"Escape\" && this.props.selectedPipelineName) {\n        this.props.onChange(this.props.selectedPipelineName);\n      }\n    }\n  };\n\n  render() {\n    const { onChange, selectedPipelineName } = this.props;\n\n    return (\n      <ShortcutHandler\n        onGlobalKeyDown={this.onGlobalKeyDown}\n        shortcutLabel={`⌥P`}\n      >\n        <PipelineNamesContext.Consumer>\n          {pipelineNames => (\n            <StringSelect\n              ref={this.select}\n              items={pipelineNames}\n              itemRenderer={BasicStringRenderer}\n              itemListPredicate={BasicStringPredicate}\n              noResults={<MenuItem disabled={true} text=\"No results.\" />}\n              onItemSelect={onChange}\n            >\n              <Button\n                text={selectedPipelineName || \"Select a pipeline...\"}\n                disabled={pipelineNames.length === 0}\n                rightIcon=\"double-caret-vertical\"\n                icon=\"send-to-graph\"\n              />\n            </StringSelect>\n          )}\n        </PipelineNamesContext.Consumer>\n      </ShortcutHandler>\n    );\n  }\n}\n\nconst StringSelect = Select.ofType<string>();\n\nconst BasicStringPredicate = (text: string, items: string[]) =>\n  items.filter(i => i.toLowerCase().includes(text.toLowerCase())).slice(0, 20);\n\nconst BasicStringRenderer = (\n  item: string,\n  options: { handleClick: any; modifiers: any }\n) => (\n  <MenuItem\n    key={item}\n    text={item}\n    active={options.modifiers.active}\n    onClick={options.handleClick}\n  />\n);\n\nfunction activateSelect(select: Select<any> | null) {\n  if (!select) return;\n  // eslint-disable-next-line react/no-find-dom-node\n  const selectEl = ReactDOM.findDOMNode(select) as HTMLElement;\n  const btnEl = selectEl.querySelector(\"button\");\n  if (btnEl) {\n    btnEl.click();\n  }\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Icon, Intent, Spinner, Colors } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { WebsocketStatusContext } from \"../WebsocketStatus\";\nimport { ShortcutHandler } from \"../ShortcutHandler\";\n\ninterface IExecutionStartButtonProps {\n  title: string;\n  icon: \"repeat\" | \"play\" | \"disable\" | \"send-to\";\n  tooltip?: string;\n  activeText?: string;\n  small?: boolean;\n  disabled?: boolean;\n  shortcutLabel?: string;\n  shortcutFilter?: (event: KeyboardEvent) => boolean;\n  onClick: () => void;\n}\n\ninterface IExecutionStartButtonState {\n  starting: boolean;\n}\n\nexport enum ExecutionButtonStatus {\n  Ready = \"ready\",\n  Starting = \"starting\",\n  Disabled = \"disabled\"\n}\n\nexport default class ExecutionStartButton extends React.Component<\n  IExecutionStartButtonProps,\n  IExecutionStartButtonState\n> {\n  _mounted = false;\n  _startButton: React.RefObject<any> = React.createRef();\n\n  state = {\n    starting: false\n  };\n\n  componentDidMount() {\n    this._mounted = true;\n    document.addEventListener(\"keyup\", this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n  }\n\n  onKeyUp = (e: KeyboardEvent) => {\n    if (e.ctrlKey && (e.key === \"Enter\" || e.key === \"Return\")) {\n      // Check that the start button is present to avoid triggering\n      // a start event when dagit is offline.\n      if (!this._startButton.current) return;\n\n      // Dispatch the button click, starting execution\n      e.preventDefault();\n      e.stopPropagation();\n      this.onClick();\n    }\n  };\n\n  onClick = async () => {\n    this.setState({ starting: true });\n    await this.props.onClick();\n    setTimeout(() => {\n      if (!this._mounted) return;\n      this.setState({ starting: false });\n    }, 300);\n  };\n\n  render() {\n    const style = this.props.small\n      ? { height: 24, minWidth: 120, paddingLeft: 15, paddingRight: 15 }\n      : {};\n    const iconSize = this.props.small ? 12 : 17;\n\n    return (\n      <WebsocketStatusContext.Consumer>\n        {websocketStatus => {\n          if (websocketStatus !== WebSocket.OPEN) {\n            return (\n              <ExecutionButtonContainer\n                role=\"button\"\n                style={style}\n                state={ExecutionButtonStatus.Disabled}\n                title={\"The dagit server is offline\"}\n              >\n                <Icon\n                  icon={IconNames.OFFLINE}\n                  iconSize={iconSize}\n                  style={{ textAlign: \"center\", marginRight: 5 }}\n                />\n                {this.props.title}\n              </ExecutionButtonContainer>\n            );\n          }\n\n          if (this.state.starting) {\n            return (\n              <ExecutionButtonContainer\n                role=\"button\"\n                style={style}\n                state={ExecutionButtonStatus.Starting}\n                title={\"Pipeline execution is in progress...\"}\n              >\n                <div style={{ marginRight: 5 }}>\n                  <Spinner intent={Intent.NONE} size={iconSize} />\n                </div>\n                {this.props.activeText ? this.props.activeText : \"Starting...\"}\n              </ExecutionButtonContainer>\n            );\n          }\n\n          if (this.props.disabled) {\n            return (\n              <ExecutionButtonContainer\n                role=\"button\"\n                style={style}\n                state={ExecutionButtonStatus.Disabled}\n                title={this.props.tooltip}\n              >\n                <Icon\n                  icon={this.props.icon}\n                  iconSize={iconSize}\n                  style={{ textAlign: \"center\", marginRight: 5 }}\n                />\n                {this.props.title}\n              </ExecutionButtonContainer>\n            );\n          }\n\n          return (\n            <ShortcutHandler\n              onShortcut={this.onClick}\n              shortcutLabel={this.props.shortcutLabel}\n              shortcutFilter={this.props.shortcutFilter}\n            >\n              <ExecutionButtonContainer\n                role=\"button\"\n                ref={this._startButton}\n                style={style}\n                state={ExecutionButtonStatus.Ready}\n                title={this.props.tooltip}\n                onClick={this.onClick}\n              >\n                <Icon\n                  icon={this.props.icon}\n                  iconSize={iconSize}\n                  style={{ textAlign: \"center\", marginRight: 5 }}\n                />\n                {this.props.title}\n              </ExecutionButtonContainer>\n            </ShortcutHandler>\n          );\n        }}\n      </WebsocketStatusContext.Consumer>\n    );\n  }\n}\n\nexport const ExecutionButtonContainer = styled.div<{\n  state: ExecutionButtonStatus;\n}>`\n  min-width: 150px;\n  height: 30px;\n  border-radius: 3px;\n  margin-left: 6px;\n  flex-shrink: 0;\n  background: ${({ state }) =>\n    ({\n      disabled:\n        \"linear-gradient(to bottom, rgb(145, 145, 145) 30%, rgb(130, 130, 130) 100%);\",\n      ready:\n        \"linear-gradient(to bottom, rgb(36, 145, 235) 30%, rgb(27, 112, 187) 100%);\",\n      starting:\n        \"linear-gradient(to bottom, rgb(21, 89, 150) 30%, rgb(21, 89, 150) 100%);\"\n    }[state])};\n  border-top: 1px solid rgba(255, 255, 255, 0.25);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.25);\n  transition: background 200ms linear;\n  justify-content: center;\n  align-items: center;\n  display: inline-flex;\n  color: ${({ state }) =>\n    state === \"disabled\" ? \"rgba(255,255,255,0.5)\" : \"white\"};\n  cursor: ${({ state }) => (state !== \"ready\" ? \"normal\" : \"pointer\")};\n  z-index: 2;\n\n  &:hover {\n    background: ${({ state }) =>\n      ({\n        disabled:\n          \"linear-gradient(to bottom, rgb(145, 145, 145) 30%, rgb(130, 130, 130) 100%);\",\n        ready:\n          \"linear-gradient(to bottom, rgb(27, 112, 187) 30%, rgb(21, 89, 150) 100%);\",\n        starting:\n          \"linear-gradient(to bottom, rgb(21, 89, 150) 30%, rgb(21, 89, 150) 100%);\"\n      }[state])};\n  }\n\n  &:active {\n    background-color: ${Colors.GRAY3};\n  }\n\n  path.bp3-spinner-head {\n    stroke: white;\n  }\n`;\n","import * as React from \"react\";\n\nimport { Colors, Spinner } from \"@blueprintjs/core\";\n\nimport { StartPipelineExecution } from \"./types/StartPipelineExecution\";\nimport { LaunchPipelineExecution } from \"./types/LaunchPipelineExecution\";\nimport gql from \"graphql-tag\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport styled from \"styled-components/macro\";\n\nexport type IRunStatus =\n  | \"SUCCESS\"\n  | \"NOT_STARTED\"\n  | \"FAILURE\"\n  | \"STARTED\"\n  | \"MANAGED\";\n\nexport function titleForRun(run: { runId: string }) {\n  return run.runId.split(\"-\").shift();\n}\n\nexport function handleExecutionResult(\n  pipelineName: string,\n  result: void | {\n    data?: StartPipelineExecution | LaunchPipelineExecution;\n  },\n  opts: { openInNewWindow: boolean }\n) {\n  if (!result || !result.data) {\n    showCustomAlert({ body: `No data was returned. Did Dagit crash?` });\n    return;\n  }\n\n  const obj = (result.data as StartPipelineExecution).startPipelineExecution\n    ? (result.data as StartPipelineExecution).startPipelineExecution\n    : (result.data as LaunchPipelineExecution).launchPipelineExecution;\n\n  if (\n    obj.__typename === \"LaunchPipelineExecutionSuccess\" ||\n    obj.__typename === \"StartPipelineExecutionSuccess\"\n  ) {\n    const url = `/runs/${obj.run.pipeline.name}/${obj.run.runId}`;\n    if (opts.openInNewWindow) {\n      window.open(url, \"_blank\");\n    } else {\n      window.location.href = url;\n    }\n  } else if (obj.__typename === \"PythonError\") {\n    console.log(obj);\n    const message = `${obj.message}`;\n    showCustomAlert({ body: message });\n  } else {\n    let message = `${pipelineName} cannot be executed with the provided config.`;\n\n    if (\"errors\" in obj) {\n      message += ` Please fix the following errors:\\n\\n${obj.errors\n        .map(error => error.message)\n        .join(\"\\n\\n\")}`;\n    }\n\n    showCustomAlert({ body: message });\n  }\n}\n\nexport const RunStatus: React.SFC<{ status: IRunStatus }> = ({ status }) => {\n  if (status === \"STARTED\") {\n    return (\n      <div style={{ display: \"inline-block\" }}>\n        <Spinner size={11} />\n      </div>\n    );\n  }\n  return <RunStatusDot status={status} />;\n};\n\n// eslint-disable-next-line no-unexpected-multiline\nconst RunStatusDot = styled.div<{ status: IRunStatus }>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  align-self: center;\n  transition: background 200ms linear;\n  background: ${({ status }) =>\n    ({\n      NOT_STARTED: Colors.GRAY1,\n      MANAGED: Colors.GRAY3,\n      STARTED: Colors.GRAY3,\n      SUCCESS: Colors.GREEN2,\n      FAILURE: Colors.RED3\n    }[status])};\n  &:hover {\n    background: ${({ status }) =>\n      ({\n        NOT_STARTED: Colors.GRAY1,\n        STARTED: Colors.GRAY3,\n        SUCCESS: Colors.GREEN2,\n        FAILURE: Colors.RED5\n      }[status])};\n  }\n`;\n\nexport const START_PIPELINE_EXECUTION_MUTATION = gql`\n  mutation StartPipelineExecution($executionParams: ExecutionParams!) {\n    startPipelineExecution(executionParams: $executionParams) {\n      __typename\n      ... on StartPipelineExecutionSuccess {\n        run {\n          runId\n          pipeline {\n            name\n          }\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineConfigValidationInvalid {\n        errors {\n          message\n        }\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n`;\n\nexport const LAUNCH_PIPELINE_EXECUTION_MUTATION = gql`\n  mutation LaunchPipelineExecution($executionParams: ExecutionParams!) {\n    launchPipelineExecution(executionParams: $executionParams) {\n      __typename\n      ... on LaunchPipelineExecutionSuccess {\n        run {\n          runId\n          pipeline {\n            name\n          }\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineConfigValidationInvalid {\n        errors {\n          message\n        }\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n`;\n\nexport const DELETE_MUTATION = gql`\n  mutation Delete($runId: String!) {\n    deletePipelineRun(runId: $runId) {\n      __typename\n      ... on PythonError {\n        message\n      }\n      ... on PipelineRunNotFoundError {\n        message\n      }\n    }\n  }\n`;\n\nexport const CANCEL_MUTATION = gql`\n  mutation Cancel($runId: String!) {\n    cancelPipelineExecution(runId: $runId) {\n      __typename\n      ... on CancelPipelineExecutionFailure {\n        message\n      }\n      ... on PipelineRunNotFoundError {\n        message\n      }\n      ... on CancelPipelineExecutionSuccess {\n        run {\n          runId\n          canCancel\n        }\n      }\n    }\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { useMutation, useQuery } from \"react-apollo\";\n\nimport ExecutionStartButton from \"./ExecutionStartButton\";\nimport {\n  LAUNCH_PIPELINE_EXECUTION_MUTATION,\n  START_PIPELINE_EXECUTION_MUTATION,\n  handleExecutionResult\n} from \"../runs/RunUtils\";\nimport { StartPipelineExecutionVariables } from \"../runs/types/StartPipelineExecution\";\nimport { LaunchPipelineExecutionVariables } from \"../runs/types/LaunchPipelineExecution\";\n\nconst RUN_LAUNCHER_QUERY = gql`\n  query RunLauncher {\n    instance {\n      runLauncher {\n        name\n      }\n    }\n  }\n`;\n\nexport const PipelineExecutionButtonGroup = (props: {\n  getVariables: () =>\n    | undefined\n    | StartPipelineExecutionVariables\n    | LaunchPipelineExecutionVariables;\n  pipelineName: string;\n}) => {\n  const [startPipelineExecution] = useMutation(\n    START_PIPELINE_EXECUTION_MUTATION\n  );\n  const [launchPipelineExecution] = useMutation(\n    LAUNCH_PIPELINE_EXECUTION_MUTATION\n  );\n  const { data } = useQuery(RUN_LAUNCHER_QUERY);\n\n  return (\n    <>\n      <ExecutionStartButton\n        title=\"Start Execution\"\n        icon={IconNames.PLAY}\n        tooltip=\"Start execution in a subprocess\"\n        activeText=\"Starting...\"\n        shortcutLabel={`⌥G`}\n        shortcutFilter={e => e.keyCode === 71 && e.altKey}\n        onClick={async () => {\n          const variables = props.getVariables();\n          if (!variables) {\n            return;\n          }\n\n          const result = await startPipelineExecution({ variables });\n          handleExecutionResult(props.pipelineName, result, {\n            openInNewWindow: true\n          });\n        }}\n      />\n      {data?.instance?.runLauncher?.name ? (\n        <ExecutionStartButton\n          title=\"Launch Execution\"\n          icon={IconNames.SEND_TO}\n          tooltip={`Launch execution via ${data.instance.runLauncher.name}`}\n          activeText=\"Launching...\"\n          shortcutLabel={`⌥L`}\n          shortcutFilter={e => e.keyCode === 76 && e.altKey}\n          onClick={async () => {\n            const variables = props.getVariables();\n            if (variables == null) {\n              return;\n            }\n\n            const result = await launchPipelineExecution({ variables });\n            handleExecutionResult(props.pipelineName, result, {\n              openInNewWindow: true\n            });\n          }}\n        />\n      ) : null}\n    </>\n  );\n};\n","import * as React from \"react\";\nimport * as yaml from \"yaml\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors, Button } from \"@blueprintjs/core\";\nimport { ApolloConsumer } from \"react-apollo\";\n\nimport { RunPreview } from \"./RunPreview\";\nimport { SplitPanelChildren } from \"../SplitPanelChildren\";\nimport SolidSelector from \"./SolidSelector\";\nimport {\n  ConfigEditor,\n  ConfigEditorHelpContext,\n  isHelpContextEqual\n} from \"../configeditor/ConfigEditor\";\nimport { ConfigEditorConfigPicker } from \"./ConfigEditorConfigPicker\";\nimport { ConfigEditorModePicker } from \"./ConfigEditorModePicker\";\nimport { IStorageData, IExecutionSession } from \"../LocalStorage\";\nimport {\n  CONFIG_EDITOR_VALIDATION_FRAGMENT,\n  CONFIG_EDITOR_ENVIRONMENT_SCHEMA_FRAGMENT,\n  responseToValidationResult\n} from \"../configeditor/ConfigEditorUtils\";\n\nimport { ConfigEditorEnvironmentSchemaFragment } from \"../configeditor/types/ConfigEditorEnvironmentSchemaFragment\";\nimport {\n  PreviewConfigQuery,\n  PreviewConfigQueryVariables\n} from \"./types/PreviewConfigQuery\";\nimport {\n  ExecutionSessionContainerFragment,\n  ExecutionSessionContainerFragment_InvalidSubsetError\n} from \"./types/ExecutionSessionContainerFragment\";\nimport {\n  ExecutionSessionContainerEnvironmentSchemaFragment,\n  ExecutionSessionContainerEnvironmentSchemaFragment_ModeNotFoundError\n} from \"./types/ExecutionSessionContainerEnvironmentSchemaFragment\";\nimport { PipelineDetailsFragment } from \"./types/PipelineDetailsFragment\";\nimport { ConfigEditorHelp } from \"./ConfigEditorHelp\";\nimport { PipelineJumpBar } from \"../PipelineJumpComponents\";\nimport { PipelineExecutionButtonGroup } from \"./PipelineExecutionButtonGroup\";\n\nconst YAML_SYNTAX_INVALID = `The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.`;\n\ninterface IExecutionSessionContainerProps {\n  data: IStorageData;\n  onSaveSession: (changes: Partial<IExecutionSession>) => void;\n  onCreateSession: (initial: Partial<IExecutionSession>) => void;\n  pipelineOrError: ExecutionSessionContainerFragment | undefined;\n  environmentSchemaOrError:\n    | ExecutionSessionContainerEnvironmentSchemaFragment\n    | undefined;\n  currentSession: IExecutionSession;\n}\n\ninterface IExecutionSessionContainerState {\n  editorHelpContext: ConfigEditorHelpContext | null;\n  preview: PreviewConfigQuery | null;\n  showWhitespace: boolean;\n}\n\nexport type SubsetError =\n  | ExecutionSessionContainerFragment_InvalidSubsetError\n  | undefined;\n\nexport type ModeNotFoundError =\n  | ExecutionSessionContainerEnvironmentSchemaFragment_ModeNotFoundError\n  | undefined;\n\nexport default class ExecutionSessionContainer extends React.Component<\n  IExecutionSessionContainerProps,\n  IExecutionSessionContainerState\n> {\n  static fragments = {\n    ExecutionSessionContainerFragment: gql`\n      fragment ExecutionSessionContainerFragment on PipelineOrError {\n        ...PipelineDetailsFragment\n        ... on InvalidSubsetError {\n          message\n          pipeline {\n            ...PipelineDetailsFragment\n          }\n        }\n      }\n\n      fragment PipelineDetailsFragment on Pipeline {\n        name\n        modes {\n          name\n          description\n        }\n      }\n    `,\n    EnvironmentSchemaOrErrorFragment: gql`\n      fragment ExecutionSessionContainerEnvironmentSchemaFragment on EnvironmentSchemaOrError {\n        __typename\n        ... on EnvironmentSchema {\n          ...ConfigEditorEnvironmentSchemaFragment\n        }\n        ... on ModeNotFoundError {\n          message\n        }\n      }\n      ${CONFIG_EDITOR_ENVIRONMENT_SCHEMA_FRAGMENT}\n    `\n  };\n\n  state: IExecutionSessionContainerState = {\n    preview: null,\n    showWhitespace: true,\n    editorHelpContext: null\n  };\n\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onConfigChange = (config: any) => {\n    this.props.onSaveSession({\n      environmentConfigYaml: config\n    });\n  };\n\n  onSolidSubsetChange = (\n    solidSubset: string[] | null,\n    solidSubsetQuery: string | null\n  ) => {\n    this.props.onSaveSession({\n      solidSubset,\n      solidSubsetQuery\n    });\n  };\n\n  onModeChange = (mode: string) => {\n    this.props.onSaveSession({ mode });\n  };\n\n  buildExecutionVariables = () => {\n    const { currentSession } = this.props;\n    const pipeline = this.getPipeline();\n    if (!pipeline || !currentSession || !currentSession.mode) return;\n\n    let environmentConfigData = {};\n    try {\n      // Note: parsing `` returns null rather than an empty object,\n      // which is preferable for representing empty config.\n      environmentConfigData =\n        yaml.parse(currentSession.environmentConfigYaml) || {};\n    } catch (err) {\n      alert(YAML_SYNTAX_INVALID);\n      return;\n    }\n\n    return {\n      executionParams: {\n        environmentConfigData,\n        selector: {\n          name: pipeline.name,\n          solidSubset: currentSession.solidSubset\n        },\n        mode: currentSession.mode\n      }\n    };\n  };\n\n  getPipeline = (): PipelineDetailsFragment | undefined => {\n    const obj = this.props.pipelineOrError;\n    if (obj === undefined) {\n      return undefined;\n    } else if (obj.__typename === \"Pipeline\") {\n      return obj;\n    } else if (obj.__typename === \"InvalidSubsetError\") {\n      return obj.pipeline;\n    }\n    throw new Error(`Recieved unexpected \"${obj.__typename}\"`);\n  };\n\n  // have this return an object with prebuilt index\n  // https://github.com/dagster-io/dagster/issues/1966\n  getEnvironmentSchema = ():\n    | ConfigEditorEnvironmentSchemaFragment\n    | undefined => {\n    const obj = this.props.environmentSchemaOrError;\n    if (obj && obj.__typename === \"EnvironmentSchema\") {\n      return obj;\n    }\n    return undefined;\n  };\n\n  getModeError = (): ModeNotFoundError => {\n    const obj = this.props.environmentSchemaOrError;\n    if (obj && obj.__typename === \"ModeNotFoundError\") {\n      return obj;\n    }\n    return undefined;\n  };\n\n  getSubsetError = (): SubsetError => {\n    const obj = this.props.pipelineOrError;\n    if (obj && obj.__typename === \"InvalidSubsetError\") {\n      return obj;\n    }\n    return undefined;\n  };\n\n  render() {\n    const { currentSession, onCreateSession, onSaveSession } = this.props;\n    const { preview, editorHelpContext, showWhitespace } = this.state;\n    const environmentSchema = this.getEnvironmentSchema();\n    const subsetError = this.getSubsetError();\n    const modeError = this.getModeError();\n    const pipeline = this.getPipeline();\n\n    return (\n      <SplitPanelFlexbox>\n        <SplitPanelChildren\n          identifier={\"execution\"}\n          leftInitialPercent={75}\n          left={\n            <>\n              <SessionSettingsBar>\n                <PipelineJumpBar\n                  selectedPipelineName={currentSession.pipeline}\n                  onChange={name => onSaveSession({ pipeline: name })}\n                />\n                <div style={{ width: 5 }} />\n                <SolidSelector\n                  subsetError={subsetError}\n                  pipelineName={currentSession.pipeline}\n                  value={currentSession.solidSubset || null}\n                  query={currentSession.solidSubsetQuery || null}\n                  onChange={this.onSolidSubsetChange}\n                />\n                <div style={{ width: 5 }} />\n                {pipeline && (\n                  <ConfigEditorModePicker\n                    modes={pipeline.modes}\n                    modeError={modeError}\n                    onModeChange={this.onModeChange}\n                    modeName={currentSession.mode}\n                  />\n                )}\n              </SessionSettingsBar>\n              <ConfigEditorPresetInsertionContainer>\n                {pipeline && (\n                  <ConfigEditorConfigPicker\n                    pipelineName={currentSession.pipeline}\n                    solidSubset={currentSession.solidSubset}\n                    onCreateSession={onCreateSession}\n                  />\n                )}\n              </ConfigEditorPresetInsertionContainer>\n              <ConfigEditorDisplayOptionsContainer>\n                <Button\n                  icon=\"paragraph\"\n                  small={true}\n                  active={showWhitespace}\n                  style={{ marginLeft: \"auto\" }}\n                  onClick={() =>\n                    this.setState({ showWhitespace: !showWhitespace })\n                  }\n                />\n              </ConfigEditorDisplayOptionsContainer>\n              <ConfigEditorHelp\n                context={editorHelpContext}\n                allInnerTypes={environmentSchema?.allConfigTypes || []}\n              />\n              <ApolloConsumer>\n                {client => (\n                  <ConfigEditor\n                    readOnly={false}\n                    environmentSchema={environmentSchema}\n                    configCode={currentSession.environmentConfigYaml}\n                    onConfigChange={this.onConfigChange}\n                    onHelpContextChange={next => {\n                      if (!isHelpContextEqual(editorHelpContext, next)) {\n                        this.setState({ editorHelpContext: next });\n                      }\n                    }}\n                    showWhitespace={showWhitespace}\n                    checkConfig={async environmentConfigData => {\n                      if (!currentSession.mode || modeError) {\n                        return {\n                          isValid: false,\n                          errors: [\n                            // FIXME this should be specific -- we should have an enumerated\n                            // validation error when there is no mode provided\n                            {\n                              message: \"Must specify a mode\",\n                              path: [\"root\"],\n                              reason: \"MISSING_REQUIRED_FIELD\"\n                            }\n                          ]\n                        };\n                      }\n                      const { data } = await client.query<\n                        PreviewConfigQuery,\n                        PreviewConfigQueryVariables\n                      >({\n                        fetchPolicy: \"no-cache\",\n                        query: PREVIEW_CONFIG_QUERY,\n                        variables: {\n                          environmentConfigData,\n                          pipeline: {\n                            name: currentSession.pipeline,\n                            solidSubset: currentSession.solidSubset\n                          },\n                          mode: currentSession.mode || \"default\"\n                        }\n                      });\n\n                      if (this.mounted) {\n                        this.setState({ preview: data });\n                      }\n\n                      return responseToValidationResult(\n                        environmentConfigData,\n                        data.isPipelineConfigValid\n                      );\n                    }}\n                  />\n                )}\n              </ApolloConsumer>\n            </>\n          }\n          right={\n            <>\n              <div\n                style={{\n                  position: \"absolute\",\n                  top: -41,\n                  zIndex: 3,\n                  right: 10\n                }}\n              >\n                {pipeline && (\n                  <PipelineExecutionButtonGroup\n                    pipelineName={pipeline.name}\n                    getVariables={this.buildExecutionVariables}\n                  />\n                )}\n              </div>\n              {preview ? (\n                <RunPreview\n                  plan={preview.executionPlan}\n                  validation={preview.isPipelineConfigValid}\n                />\n              ) : (\n                <RunPreview />\n              )}\n            </>\n          }\n        />\n      </SplitPanelFlexbox>\n    );\n  }\n}\n\ninterface ExecutionSessionContainerErrorProps {\n  onSaveSession: (changes: Partial<IExecutionSession>) => void;\n  currentSession: IExecutionSession;\n}\n\nexport const ExecutionSessionContainerError: React.FunctionComponent<ExecutionSessionContainerErrorProps> = props => (\n  <SplitPanelFlexbox>\n    <SplitPanelChildren\n      identifier={\"execution\"}\n      leftInitialPercent={75}\n      left={\n        <>\n          <SessionSettingsBar>\n            <PipelineJumpBar\n              selectedPipelineName={props.currentSession.pipeline}\n              onChange={name => props.onSaveSession({ pipeline: name })}\n            />\n          </SessionSettingsBar>\n          {props.children}\n        </>\n      }\n      right={<RunPreview />}\n    />\n  </SplitPanelFlexbox>\n);\n\nconst PREVIEW_CONFIG_QUERY = gql`\n  query PreviewConfigQuery(\n    $pipeline: ExecutionSelector!\n    $environmentConfigData: EnvironmentConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(\n      pipeline: $pipeline\n      environmentConfigData: $environmentConfigData\n      mode: $mode\n    ) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewConfigValidationFragment\n    }\n    executionPlan(\n      pipeline: $pipeline\n      environmentConfigData: $environmentConfigData\n      mode: $mode\n    ) {\n      ...RunPreviewExecutionPlanResultFragment\n    }\n  }\n  ${RunPreview.fragments.RunPreviewConfigValidationFragment}\n  ${RunPreview.fragments.RunPreviewExecutionPlanResultFragment}\n  ${CONFIG_EDITOR_VALIDATION_FRAGMENT}\n`;\n\nconst SplitPanelFlexbox = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex: 1 1;\n`;\n\nconst SessionSettingsBar = styled.div`\n  color: white;\n  display: flex;\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY1};\n  background: ${Colors.WHITE};\n  align-items: center;\n  height: 47px;\n  padding: 8px;\n`;\n\nconst ConfigEditorPresetInsertionContainer = styled.div`\n  display: inline-block;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 10;\n`;\n\nconst ConfigEditorDisplayOptionsContainer = styled.div`\n  display: inline-block;\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  z-index: 10;\n`;\n","import * as React from \"react\";\n\n// Internal LocalStorage data format and mutation helpers\n\nexport interface IStorageData {\n  sessions: { [name: string]: IExecutionSession };\n  current: string;\n}\n\nexport interface IExecutionSessionPlan {\n  steps: Array<{\n    name: string;\n    kind: string;\n    solid: {\n      name: string;\n    };\n  }>;\n}\n\nexport interface IExecutionSession {\n  key: string;\n  name: string;\n  pipeline: string;\n  environmentConfigYaml: string;\n  mode: string | null;\n  solidSubset: string[] | null;\n  solidSubsetQuery: string | null;\n\n  // this is set when you execute the session and freeze it\n  runId?: string;\n  configChangedSinceRun: boolean;\n}\n\nexport type IExecutionSessionChanges = Partial<IExecutionSession>;\n\nexport function applySelectSession(data: IStorageData, key: string) {\n  return { ...data, current: key };\n}\n\nexport function applyRemoveSession(data: IStorageData, key: string) {\n  const next = { current: data.current, sessions: { ...data.sessions } };\n  const idx = Object.keys(next.sessions).indexOf(key);\n  delete next.sessions[key];\n  if (next.current === key) {\n    const remainingKeys = Object.keys(next.sessions);\n    next.current = remainingKeys[idx] || remainingKeys[0];\n  }\n  return next;\n}\n\nexport function applyChangesToSession(\n  data: IStorageData,\n  key: string,\n  changes: IExecutionSessionChanges\n) {\n  const saved = data.sessions[key];\n  if (\n    changes.environmentConfigYaml &&\n    changes.environmentConfigYaml !== saved.environmentConfigYaml &&\n    saved.runId\n  ) {\n    changes.configChangedSinceRun = true;\n  }\n\n  return {\n    current: data.current,\n    sessions: { ...data.sessions, [key]: { ...saved, ...changes } }\n  };\n}\n\nexport function applyCreateSession(\n  data: IStorageData,\n  initial: IExecutionSessionChanges = {}\n): IStorageData {\n  const key = `s${Date.now()}`;\n\n  return {\n    current: key,\n    sessions: {\n      ...data.sessions,\n      [key]: {\n        name: \"Workspace\",\n        environmentConfigYaml: \"\",\n        mode: null,\n        solidSubset: null,\n        solidSubsetQuery: \"*\",\n        pipeline: \"\",\n        runId: undefined,\n        ...initial,\n        configChangedSinceRun: false,\n        key\n      }\n    }\n  };\n}\n\n// StorageProvider component that vends `IStorageData` via a render prop\n\nexport type StorageHook = [\n  IStorageData,\n  React.Dispatch<React.SetStateAction<IStorageData>>\n];\n\nlet _data: IStorageData | null = null;\nlet _dataNamespace = \"\";\n\nfunction getStorageDataForNamespace(namespace: string) {\n  if (_data && _dataNamespace === namespace) {\n    return _data;\n  }\n\n  let data: IStorageData = {\n    sessions: {},\n    current: \"\"\n  };\n  try {\n    const jsonString = window.localStorage.getItem(`dagit.${namespace}`);\n    if (jsonString) {\n      data = Object.assign(data, JSON.parse(jsonString));\n    }\n  } catch (err) {\n    // noop\n  }\n  if (Object.keys(data.sessions).length === 0) {\n    data = applyCreateSession(data, {});\n  }\n  if (!data.sessions[data.current]) {\n    data.current = Object.keys(data.sessions)[0];\n  }\n\n  _data = data;\n  _dataNamespace = namespace;\n\n  return data;\n}\n\nfunction writeStorageDataForNamespace(namespace: string, data: IStorageData) {\n  _data = data;\n  _dataNamespace = namespace;\n  window.localStorage.setItem(`dagit.${namespace}`, JSON.stringify(data));\n}\n\n/* React hook that provides local storage to the caller. A previous version of this\nloaded data into React state, but changing namespaces caused the data to be out-of-sync\nfor one render (until a useEffect could update the data in state). Now we keep the\ncurrent localStorage namespace in memory (in _data above) and React keeps a simple\nversion flag it can use to trigger a re-render after changes are saved, so changing\nnamespaces changes the returned data immediately.\n*/\nexport function useStorage(namespace = \"shared\"): StorageHook {\n  const [version, setVersion] = React.useState<number>(0);\n\n  const onSave = (newData: IStorageData) => {\n    writeStorageDataForNamespace(namespace, newData);\n    setVersion(version + 1); // trigger a React render\n  };\n\n  return [getStorageDataForNamespace(namespace), onSave];\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Icon, Colors } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport {\n  IStorageData,\n  applySelectSession,\n  applyChangesToSession,\n  applyCreateSession,\n  applyRemoveSession\n} from \"../LocalStorage\";\n\ninterface ExecutationTabProps {\n  title: string;\n  active?: boolean;\n  unsaved?: boolean;\n  onChange?: (title: string) => void;\n  onRemove?: () => void;\n  onClick: () => void;\n}\n\ninterface ExecutationTabState {\n  editing: boolean;\n}\n\nclass ExecutionTab extends React.Component<\n  ExecutationTabProps,\n  ExecutationTabState\n> {\n  input = React.createRef<HTMLInputElement>();\n\n  state = { editing: false };\n\n  onDoubleClick = () => {\n    if (!this.props.onChange) return;\n    this.setState({ editing: true }, () => {\n      const el = this.input.current;\n      if (el) {\n        el.focus();\n        el.select();\n      }\n    });\n  };\n\n  render() {\n    const { title, onChange, onClick, onRemove, active, unsaved } = this.props;\n    const { editing } = this.state;\n\n    return (\n      <TabContainer\n        active={active || false}\n        onDoubleClick={this.onDoubleClick}\n        onClick={onClick}\n      >\n        {editing ? (\n          <input\n            ref={this.input}\n            type=\"text\"\n            defaultValue={title}\n            onKeyDown={e => e.keyCode === 13 && e.currentTarget.blur()}\n            onChange={e => onChange && onChange(e.currentTarget.value)}\n            onBlur={() => this.setState({ editing: false })}\n          />\n        ) : unsaved ? (\n          `${title}*`\n        ) : (\n          title\n        )}\n        {!editing && onRemove && (\n          <RemoveButton\n            onClick={e => {\n              e.stopPropagation();\n              onRemove();\n            }}\n          >\n            <Icon icon={IconNames.CROSS} />\n          </RemoveButton>\n        )}\n      </TabContainer>\n    );\n  }\n}\n\ninterface ExecutionTabsProps {\n  data: IStorageData;\n  onSave: (data: IStorageData) => void;\n}\n\nfunction sessionNamesAndKeysHash(data: IStorageData) {\n  return Object.values(data.sessions)\n    .map(s => s.name + s.key)\n    .join(\",\");\n}\n\nexport class ExecutionTabs extends React.Component<ExecutionTabsProps> {\n  shouldComponentUpdate(prevProps: ExecutionTabsProps) {\n    return (\n      sessionNamesAndKeysHash(prevProps.data) !==\n        sessionNamesAndKeysHash(this.props.data) ||\n      prevProps.data.current !== this.props.data.current\n    );\n  }\n\n  render() {\n    const { data } = this.props;\n\n    const onApply = (mutator: any, ...args: any[]) => {\n      // note: this function /cannot/ use props bound to local vars above\n      // because this component implements shouldComponentUpdate and data\n      // used during render and captured here may be stale.\n      this.props.onSave(mutator(this.props.data, ...args));\n    };\n\n    return (\n      <ExecutionTabsContainer>\n        {Object.keys(data.sessions).map(key => (\n          <ExecutionTab\n            key={key}\n            active={key === data.current}\n            title={data.sessions[key].name}\n            onClick={() => onApply(applySelectSession, key)}\n            onChange={name => onApply(applyChangesToSession, key, { name })}\n            onRemove={\n              Object.keys(data.sessions).length > 1\n                ? () => onApply(applyRemoveSession, key)\n                : undefined\n            }\n          />\n        ))}\n        <ExecutionTab\n          title={\"Add...\"}\n          onClick={() => onApply(applyCreateSession, {})}\n        />\n      </ExecutionTabsContainer>\n    );\n  }\n}\n\nexport const ExecutionTabsContainer = styled.div`\n  display; flex;\n  z-index: 1;\n  flex-direction: row;\n  position: relative;\n  top: 6px;\n  `;\n\nconst TabContainer = styled.div<{ active: boolean }>`\n  color: ${({ active }) => (active ? Colors.BLACK : Colors.DARK_GRAY3)};\n  padding: 6px 9px;\n  height: 36px;\n  display: inline-flex;\n  align-items: center;\n  border-left: 1px solid ${Colors.GRAY4};\n  user-select: none;\n  background: ${({ active }) => (active ? Colors.WHITE : Colors.LIGHT_GRAY3)};\n  border-top: 2px solid ${({ active }) => (active ? \"#2965CC\" : \"transparent\")};\n\n  &:hover {\n    background: ${({ active }) => (active ? Colors.WHITE : Colors.LIGHT_GRAY5)};\n  }\n  input {\n    line-height: 1.28581;\n    font-size: 14px;\n    border: 0;\n    outline: none;\n  }\n  cursor: ${({ active }) => (!active ? \"pointer\" : \"inherit\")};\n`;\n\nconst RemoveButton = styled.div`\n  display: inline-block;\n  vertical-align: middle;\n  margin-left: 10px;\n  opacity: 0.2;\n  &:hover {\n    opacity: 0.6;\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport ExecutionSessionContainer, {\n  ExecutionSessionContainerError\n} from \"./ExecutionSessionContainer\";\nimport { QueryResult, Query } from \"react-apollo\";\nimport { NonIdealState, Colors } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport {\n  useStorage,\n  IExecutionSessionChanges,\n  applyChangesToSession,\n  applyCreateSession\n} from \"../LocalStorage\";\nimport { PipelineExecutionRootQuery } from \"./types/PipelineExecutionRootQuery\";\nimport { ExecutionTabs } from \"./ExecutionTabs\";\n\nexport const PipelineExecutionRoot: React.FunctionComponent<{}> = () => {\n  const [data, onSave] = useStorage();\n\n  const vars = {\n    name: data.sessions[data.current].pipeline || \"\",\n    mode: data.sessions[data.current].mode,\n    solidSubset: data.sessions[data.current].solidSubset\n  };\n\n  const onSaveSession = (\n    session: string,\n    changes: IExecutionSessionChanges\n  ) => {\n    onSave(applyChangesToSession(data, session, changes));\n  };\n\n  return (\n    <PipelineExecutionWrapper>\n      <TabBarContainer>\n        <ExecutionTabs data={data} onSave={onSave} />\n        <div style={{ flex: 1 }} />\n      </TabBarContainer>\n      <Query\n        // never serve cached Pipeline given new vars by forcing teardown of the Query.\n        // Apollo's behaviors are sort of whacky, even with no-cache. Should just use\n        // window.fetch...\n        key={JSON.stringify(vars)}\n        query={PIPELINE_EXECUTION_ROOT_QUERY}\n        fetchPolicy=\"cache-and-network\"\n        partialRefetch={true}\n        variables={vars}\n      >\n        {(result: QueryResult<PipelineExecutionRootQuery, any>) => {\n          const pipelineOrError = result.data && result.data.pipelineOrError;\n          const environmentSchemaOrError =\n            result.data && result.data.environmentSchemaOrError;\n\n          if (\n            environmentSchemaOrError?.__typename === \"PipelineNotFoundError\" ||\n            pipelineOrError?.__typename === \"PipelineNotFoundError\"\n          ) {\n            const message =\n              pipelineOrError?.__typename === \"PipelineNotFoundError\"\n                ? pipelineOrError.message\n                : \"No data returned from GraphQL\";\n\n            return (\n              <ExecutionSessionContainerError\n                currentSession={data.sessions[data.current]}\n                onSaveSession={changes => onSaveSession(data.current, changes)}\n              >\n                {vars.name !== \"\" ? (\n                  <NonIdealState\n                    icon={IconNames.FLOW_BRANCH}\n                    title=\"Pipeline Not Found\"\n                    description={message}\n                  />\n                ) : (\n                  <NonIdealState\n                    icon={IconNames.FLOW_BRANCH}\n                    title=\"Select a Pipeline\"\n                  />\n                )}\n              </ExecutionSessionContainerError>\n            );\n          }\n\n          if (pipelineOrError && pipelineOrError.__typename === \"PythonError\") {\n            return (\n              <ExecutionSessionContainerError\n                currentSession={data.sessions[data.current]}\n                onSaveSession={changes => onSaveSession(data.current, changes)}\n              >\n                <NonIdealState\n                  icon={IconNames.ERROR}\n                  title=\"Python Error\"\n                  description={pipelineOrError.message}\n                />\n              </ExecutionSessionContainerError>\n            );\n          }\n\n          return (\n            <ExecutionSessionContainer\n              data={data}\n              onSaveSession={changes => onSaveSession(data.current, changes)}\n              onCreateSession={initial =>\n                onSave(applyCreateSession(data, initial))\n              }\n              pipelineOrError={pipelineOrError}\n              environmentSchemaOrError={environmentSchemaOrError}\n              currentSession={data.sessions[data.current]}\n            />\n          );\n        }}\n      </Query>\n    </PipelineExecutionWrapper>\n  );\n};\n\nexport const PIPELINE_EXECUTION_ROOT_QUERY = gql`\n  query PipelineExecutionRootQuery(\n    $name: String!\n    $solidSubset: [String!]\n    $mode: String\n  ) {\n    pipelineOrError(params: { name: $name, solidSubset: $solidSubset }) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n      ...ExecutionSessionContainerFragment\n    }\n    environmentSchemaOrError(\n      selector: { name: $name, solidSubset: $solidSubset }\n      mode: $mode\n    ) {\n      ...ExecutionSessionContainerEnvironmentSchemaFragment\n    }\n  }\n\n  ${ExecutionSessionContainer.fragments.ExecutionSessionContainerFragment}\n  ${ExecutionSessionContainer.fragments.EnvironmentSchemaOrErrorFragment}\n`;\n\nconst PipelineExecutionWrapper = styled.div`\n  flex: 1 1;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-width: 0;\n`;\n\nconst TabBarContainer = styled.div`\n  height: 50px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-bottom: 1px solid ${Colors.GRAY5};\n  background: ${Colors.LIGHT_GRAY3};\n  padding: 8px;\n  z-index: 3;\n`;\n","import * as React from \"react\";\nimport { Redirect } from \"react-router\";\nimport {\n  useStorage,\n  applyCreateSession,\n  IExecutionSession\n} from \"../LocalStorage\";\nimport * as querystring from \"query-string\";\n\ninterface PipelineExecutionSetupRootProps {}\n\nexport const PipelineExecutionSetupRoot: React.FunctionComponent<PipelineExecutionSetupRootProps> = () => {\n  const [data, onSave] = useStorage();\n  const qs = querystring.parse(window.location.search);\n\n  React.useEffect(() => {\n    if (qs.pipeline && (qs.config || qs.mode || qs.solidSubset)) {\n      const newSession: Partial<IExecutionSession> = {};\n      if (typeof qs.pipeline === \"string\") {\n        newSession.pipeline = qs.pipeline;\n      }\n      if (typeof qs.config === \"string\") {\n        newSession.environmentConfigYaml = qs.config;\n      }\n      if (typeof qs.mode === \"string\") {\n        newSession.mode = qs.mode;\n      }\n      if (qs.solidSubset instanceof Array) {\n        newSession.solidSubset = qs.solidSubset;\n      } else if (typeof qs.solidSubset === \"string\") {\n        newSession.solidSubset = [qs.solidSubset];\n      }\n      if (typeof qs.solidSubsetQuery === \"string\") {\n        newSession.solidSubsetQuery = qs.solidSubsetQuery;\n      }\n\n      onSave(applyCreateSession(data, newSession));\n    }\n  });\n  return <Redirect to={{ pathname: `/playground` }} />;\n};\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { QueryResult } from \"react-apollo\";\nimport { ProgressBar, NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\ninterface ILoadingProps<TData> {\n  queryResult: QueryResult<TData, any>;\n  children: (data: TData) => React.ReactNode;\n}\n\nexport default class Loading<TData> extends React.Component<\n  ILoadingProps<TData>\n> {\n  public render() {\n    const { error, data } = this.props.queryResult;\n    if (error) {\n      console.error(error);\n      return (\n        <LoadingContainer>\n          <LoadingCentering>\n            <NonIdealState\n              icon={IconNames.ERROR}\n              title=\"GraphQL Error - see console for details\"\n            />\n          </LoadingCentering>\n        </LoadingContainer>\n      );\n    }\n    if (!data || Object.keys(data).length === 0) {\n      return (\n        <LoadingContainer>\n          <LoadingCentering>\n            <ProgressBar />\n          </LoadingCentering>\n        </LoadingContainer>\n      );\n    }\n    return this.props.children(data as TData);\n  }\n}\n\nconst LoadingContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LoadingCentering = styled.div`\n  max-width: 600px;\n  width: 75%;\n`;\n","import * as React from \"react\";\nimport { ProgressBar } from \"@blueprintjs/core\";\nimport PipelineGraph from \"./PipelineGraph\";\nimport { SolidNameOrPath } from \"../PipelineExplorer\";\nimport { PipelineGraphSolidFragment } from \"./types/PipelineGraphSolidFragment\";\nimport { PipelineExplorerSolidHandleFragment } from \"../types/PipelineExplorerSolidHandleFragment\";\nimport { PipelineExplorerParentSolidHandleFragment } from \"../types/PipelineExplorerParentSolidHandleFragment\";\nimport {\n  getDagrePipelineLayout,\n  asyncDagrePipelineLayout\n} from \"./getFullSolidLayout\";\nimport { IFullPipelineLayout } from \"./layout\";\n\nconst ASYNC_LAYOUT_SOLID_COUNT = 50;\n\ninterface IPipelineGraphContainerProps {\n  pipelineName: string;\n  backgroundColor: string;\n  solids: PipelineGraphSolidFragment[];\n  focusSolids: PipelineGraphSolidFragment[];\n  highlightedSolids: PipelineGraphSolidFragment[];\n  selectedHandle?: PipelineExplorerSolidHandleFragment;\n  parentHandle?: PipelineExplorerParentSolidHandleFragment;\n  onClickSolid?: (arg: SolidNameOrPath) => void;\n  onEnterCompositeSolid?: (arg: SolidNameOrPath) => void;\n  onLeaveCompositeSolid?: () => void;\n  onClickBackground?: () => void;\n}\n\nexport function PipelineGraphContainer(props: IPipelineGraphContainerProps) {\n  const {\n    pipelineName,\n    backgroundColor,\n    solids,\n    focusSolids,\n    highlightedSolids,\n    selectedHandle,\n    parentHandle,\n    onClickSolid,\n    onEnterCompositeSolid,\n    onLeaveCompositeSolid,\n    onClickBackground\n  } = props;\n  const parentSolid = parentHandle && parentHandle.solid;\n  const [loading, setLoading] = React.useState(false);\n  const [layoutSolidKey, setLayoutSolidKey] = React.useState(\"\");\n  const [layout, setLayout] = React.useState<IFullPipelineLayout | undefined>();\n  const solidKey = solids.map(x => x.name).join(\"|\");\n  const parentSolidKey = parentSolid && parentSolid.name;\n  React.useEffect(() => {\n    async function delegateDagrePipelineLayout() {\n      setLoading(true);\n      const _layout = (await asyncDagrePipelineLayout(\n        solids,\n        parentSolid\n      )) as IFullPipelineLayout;\n      setLayout(_layout);\n      setLoading(false);\n      setLayoutSolidKey(solidKey);\n    }\n    if (solids.length < ASYNC_LAYOUT_SOLID_COUNT) {\n      setLayout(getDagrePipelineLayout(solids, parentSolid));\n      setLayoutSolidKey(solidKey);\n      setLoading(false);\n    } else {\n      delegateDagrePipelineLayout();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [solidKey, parentSolidKey]);\n\n  if (loading || !layout || solidKey !== layoutSolidKey) {\n    return <PipelineGraphLoading backgroundColor={backgroundColor} />;\n  }\n\n  return (\n    <PipelineGraph\n      pipelineName={pipelineName}\n      backgroundColor={backgroundColor}\n      solids={solids}\n      focusSolids={focusSolids}\n      highlightedSolids={highlightedSolids}\n      selectedHandleID={selectedHandle && selectedHandle.handleID}\n      selectedSolid={selectedHandle && selectedHandle.solid}\n      parentHandleID={parentHandle && parentHandle.handleID}\n      parentSolid={parentSolid}\n      onClickSolid={onClickSolid}\n      onClickBackground={onClickBackground}\n      onEnterCompositeSolid={onEnterCompositeSolid}\n      onLeaveCompositeSolid={onLeaveCompositeSolid}\n      layout={layout}\n    />\n  );\n}\n\nfunction PipelineGraphLoading({\n  backgroundColor\n}: {\n  backgroundColor: string;\n}) {\n  return (\n    <div\n      style={{\n        backgroundColor,\n        position: \"absolute\",\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <div style={{ maxWidth: 600, width: \"75%\" }}>\n        <ProgressBar />\n      </div>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Icon, Colors, Collapse } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\ninterface ISidebarSectionProps {\n  title: string;\n  collapsedByDefault?: boolean;\n}\n\ninterface ISidebarSectionState {\n  isOpen: boolean;\n}\n\nexport class SidebarSection extends React.Component<\n  ISidebarSectionProps,\n  ISidebarSectionState\n> {\n  storageKey: string;\n\n  constructor(props: ISidebarSectionProps) {\n    super(props);\n\n    this.storageKey = `sidebar-${props.title}`;\n    this.state = {\n      isOpen: {\n        true: true,\n        false: false,\n        null: this.props.collapsedByDefault === true ? false : true\n      }[`${window.localStorage.getItem(this.storageKey)}`]\n    };\n  }\n\n  onToggle = () => {\n    const isOpen = !this.state.isOpen;\n    this.setState({ isOpen });\n    window.localStorage.setItem(this.storageKey, `${isOpen}`);\n  };\n\n  render() {\n    const { isOpen } = this.state;\n\n    return (\n      <div>\n        <CollapsingHeaderBar onClick={this.onToggle}>\n          {this.props.title}\n          <DisclosureIcon\n            icon={isOpen ? IconNames.CHEVRON_DOWN : IconNames.CHEVRON_UP}\n          />\n        </CollapsingHeaderBar>\n        <Collapse isOpen={isOpen}>\n          <SectionInner>{this.props.children}</SectionInner>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nexport const DisclosureIcon = styled(Icon)`\n  float: right;\n  opacity: 0.5;\n`;\n\nexport const SidebarTitle = styled.h3`\n  font-family: \"Source Code Pro\", monospace;\n  margin: 0;\n  margin-bottom: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const SectionHeader = styled.h4`\n  font-family: \"Source Code Pro\", monospace;\n  font-size: 15px;\n  margin: 6px 0;\n`;\n\nexport const SectionSmallHeader = styled.h4`\n  font-family: \"Source Code Pro\", monospace;\n  font-size: 14px;\n  font-weight: 500;\n  margin: 6px 0;\n`;\n\nexport const SidebarDivider = styled.div`\n  height: 2px;\n  background: ${Colors.GRAY4};\n`;\n\nexport const SidebarSubhead = styled.div`\n  color: ${Colors.GRAY3};\n  font-size: 0.7rem;\n`;\n\nexport const SectionItemContainer = styled.div`\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY2};\n  margin-bottom: 20px;\n  padding-bottom: 20px;\n  font-size: 0.8rem;\n  &:last-child {\n    border-bottom: none;\n    margin-bottom: 0;\n    padding-bottom: 5px;\n  }\n`;\n\n// Internal\n\nconst CollapsingHeaderBar = styled.div`\n  padding: 6px;\n  padding-left: 12px;\n  background: linear-gradient(\n    to bottom,\n    ${Colors.LIGHT_GRAY5},\n    ${Colors.LIGHT_GRAY4}\n  );\n  border-top: 1px solid ${Colors.LIGHT_GRAY4};\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY3};\n  color: ${Colors.GRAY1};\n  text-transform: uppercase;\n  font-size: 0.75rem;\n`;\n\nexport const SectionInner = styled.div`\n  padding: 12px;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport ReactMarkdown from \"react-markdown\";\n\ninterface IDescriptionProps {\n  description: string | null;\n}\n\ninterface IDescriptionState {\n  hasMore: boolean;\n  expanded: boolean;\n}\n\nconst MaxHeight = 320;\n\n/*\nIf `input` begins with whitespace and every line contains at least that whitespace,\nit removes it. Otherwise, return the original string.\n*/\nfunction removeLeadingSpaces(input: string) {\n  const leadingSpaces = /^\\n?( +)/.exec(input);\n  if (leadingSpaces == null) {\n    return input;\n  }\n\n  const lines = input.split(\"\\n\");\n  if (!lines.every(l => l.substr(0, leadingSpaces[1].length).trim() === \"\")) {\n    return input;\n  }\n\n  return lines.map(l => l.substr(leadingSpaces[1].length)).join(\"\\n\");\n}\n\nexport default class Description extends React.Component<\n  IDescriptionProps,\n  IDescriptionState\n> {\n  private _container: React.RefObject<HTMLDivElement> = React.createRef();\n\n  public state: IDescriptionState = {\n    hasMore: false,\n    expanded: false\n  };\n\n  componentDidMount() {\n    this.updateHandleState();\n  }\n\n  componentDidUpdate() {\n    this.updateHandleState();\n  }\n\n  updateHandleState() {\n    if (!this._container.current) {\n      return;\n    }\n    const hasMore = this._container.current.clientHeight > MaxHeight;\n    if (hasMore !== this.state.hasMore) {\n      this.setState({ hasMore });\n    }\n  }\n\n  render() {\n    if (!this.props.description || this.props.description.length === 0) {\n      return null;\n    }\n\n    const { expanded, hasMore } = this.state;\n    return (\n      <Container\n        onDoubleClick={() => {\n          const sel = document.getSelection();\n          if (!sel || !this._container.current) return;\n          const range = document.createRange();\n          range.selectNodeContents(this._container.current);\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }}\n        style={{\n          maxHeight: expanded ? undefined : MaxHeight\n        }}\n      >\n        {!expanded && hasMore && <Mask />}\n        {hasMore && (\n          <ShowMoreHandle\n            onClick={() => this.setState({ expanded: !expanded })}\n          >\n            {expanded ? \"Show Less\" : \"Show More\"}\n          </ShowMoreHandle>\n        )}\n\n        <div ref={this._container} style={{ overflowX: \"auto\" }}>\n          <ReactMarkdown source={removeLeadingSpaces(this.props.description)} />\n        </div>\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div`\n  overflow: hidden;\n  font-size: 0.8rem;\n  position: relative;\n  p:last-child {\n    margin-bottom: 5px;\n  }\n`;\n\nconst Mask = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    to bottom,\n    rgba(255, 255, 255, 0) 0%,\n    rgba(255, 255, 255, 0) 70%,\n    rgba(255, 255, 255, 1)\n  );\n  pointer-events: none;\n  border-bottom: 1px solid #eee;\n`;\n\nconst ShowMoreHandle = styled.a`\n  line-height: 20px;\n  position: absolute;\n  padding: 0 14px;\n  bottom: 0;\n  left: 50%;\n  height: 20px;\n  transform: translate(-50%);\n  background: #eee;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport { Link } from \"react-router-dom\";\nimport { ConfigTypeSchema } from \"../ConfigTypeSchema\";\nimport { TypeExplorerFragment } from \"./types/TypeExplorerFragment\";\nimport {\n  SidebarSubhead,\n  SidebarSection,\n  SidebarTitle,\n  SectionInner\n} from \"../SidebarComponents\";\n\nimport Description from \"../Description\";\n\ninterface ITypeExplorerProps {\n  type: TypeExplorerFragment;\n}\n\nexport default class TypeExplorer extends React.Component<ITypeExplorerProps> {\n  static fragments = {\n    TypeExplorerFragment: gql`\n      fragment TypeExplorerFragment on RuntimeType {\n        name\n        description\n        inputSchemaType {\n          ...ConfigTypeSchemaFragment\n          recursiveConfigTypes {\n            ...ConfigTypeSchemaFragment\n          }\n        }\n        outputSchemaType {\n          ...ConfigTypeSchemaFragment\n          recursiveConfigTypes {\n            ...ConfigTypeSchemaFragment\n          }\n        }\n      }\n\n      ${ConfigTypeSchema.fragments.ConfigTypeSchemaFragment}\n    `\n  };\n\n  render() {\n    const {\n      name,\n      inputSchemaType,\n      outputSchemaType,\n      description\n    } = this.props.type;\n\n    return (\n      <div>\n        <SidebarSubhead />\n        <SectionInner>\n          <SidebarTitle>\n            <Link to=\"?types=true\">Pipeline Types</Link> {\">\"} {name}\n          </SidebarTitle>\n        </SectionInner>\n        <SidebarSection title={\"Description\"}>\n          <Description description={description || \"No Description Provided\"} />\n        </SidebarSection>\n        {inputSchemaType && (\n          <SidebarSection title={\"Input\"}>\n            <ConfigTypeSchema\n              type={inputSchemaType}\n              typesInScope={inputSchemaType.recursiveConfigTypes}\n            />\n          </SidebarSection>\n        )}\n        {outputSchemaType && (\n          <SidebarSection title={\"Output\"}>\n            <ConfigTypeSchema\n              type={outputSchemaType}\n              typesInScope={outputSchemaType.recursiveConfigTypes}\n            />\n          </SidebarSection>\n        )}\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport Loading from \"../Loading\";\nimport { useQuery } from \"react-apollo\";\nimport TypeExplorer from \"./TypeExplorer\";\nimport {\n  TypeExplorerContainerQuery,\n  TypeExplorerContainerQueryVariables\n} from \"./types/TypeExplorerContainerQuery\";\n\ninterface ITypeExplorerContainerProps {\n  pipelineName: string;\n  typeName: string;\n}\n\nexport const TypeExplorerContainer: React.FunctionComponent<ITypeExplorerContainerProps> = ({\n  pipelineName,\n  typeName\n}) => {\n  const queryResult = useQuery<\n    TypeExplorerContainerQuery,\n    TypeExplorerContainerQueryVariables\n  >(TYPE_EXPLORER_CONTAINER_QUERY, {\n    fetchPolicy: \"cache-and-network\",\n    variables: {\n      pipelineName: pipelineName,\n      runtimeTypeName: typeName\n    }\n  });\n  return (\n    <Loading queryResult={queryResult}>\n      {data => {\n        if (\n          data.runtimeTypeOrError &&\n          data.runtimeTypeOrError.__typename === \"RegularRuntimeType\"\n        ) {\n          return <TypeExplorer type={data.runtimeTypeOrError} />;\n        } else {\n          return <div>Type Not Found</div>;\n        }\n      }}\n    </Loading>\n  );\n};\n\nexport const TYPE_EXPLORER_CONTAINER_QUERY = gql`\n  query TypeExplorerContainerQuery(\n    $pipelineName: String!\n    $runtimeTypeName: String!\n  ) {\n    runtimeTypeOrError(\n      pipelineName: $pipelineName\n      runtimeTypeName: $runtimeTypeName\n    ) {\n      __typename\n      ... on RegularRuntimeType {\n        ...TypeExplorerFragment\n      }\n    }\n  }\n\n  ${TypeExplorer.fragments.TypeExplorerFragment}\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Link } from \"react-router-dom\";\n\ninterface ITypeWithTooltipProps {\n  type: {\n    name: string | null;\n    displayName: string;\n    description: string | null;\n  };\n}\n\nexport default class TypeWithTooltip extends React.Component<\n  ITypeWithTooltipProps\n> {\n  static fragments = {\n    RuntimeTypeWithTooltipFragment: gql`\n      fragment RuntimeTypeWithTooltipFragment on RuntimeType {\n        name\n        displayName\n        description\n      }\n    `\n  };\n\n  render() {\n    const { name, displayName } = this.props.type;\n\n    // TODO: link to most inner type\n    if (name) {\n      const search = `?typeExplorer=${displayName}`;\n      return (\n        <Link to={{ search }}>\n          <TypeName>{displayName}</TypeName>\n        </Link>\n      );\n    } else {\n      return <TypeName>{displayName}</TypeName>;\n    }\n  }\n}\n\nexport const TypeName = styled.code`\n  background: #d6ecff;\n  border: none;\n  padding: 1px 4px;\n  border-bottom: 1px solid #2491eb;\n  border-radius: 0.25em;\n  font-size: 12px;\n  font-weight: 500;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { H3, UL } from \"@blueprintjs/core\";\nimport TypeWithTooltip from \"../TypeWithTooltip\";\nimport { TypeListFragment } from \"./types/TypeListFragment\";\nimport {\n  SidebarSubhead,\n  SidebarSection,\n  SidebarTitle\n} from \"../SidebarComponents\";\n\ninterface ITypeListProps {\n  types: Array<TypeListFragment>;\n}\n\nfunction groupTypes(types: Array<TypeListFragment>) {\n  const groups = {\n    Custom: Array<TypeListFragment>(),\n    \"Built-in\": Array<TypeListFragment>()\n  };\n  types.forEach(type => {\n    if (type.isBuiltin) {\n      groups[\"Built-in\"].push(type);\n    } else {\n      groups[\"Custom\"].push(type);\n    }\n  });\n  return groups;\n}\n\nexport default class TypeList extends React.Component<ITypeListProps, {}> {\n  static fragments = {\n    TypeListFragment: gql`\n      fragment TypeListFragment on RuntimeType {\n        name\n        isBuiltin\n        ...RuntimeTypeWithTooltipFragment\n      }\n\n      ${TypeWithTooltip.fragments.RuntimeTypeWithTooltipFragment}\n    `\n  };\n\n  renderTypes(types: TypeListFragment[]) {\n    return types.map((type, i) => (\n      <TypeLI key={i}>\n        <TypeWithTooltip type={type} />\n      </TypeLI>\n    ));\n  }\n\n  render() {\n    const groups = groupTypes(this.props.types);\n\n    return (\n      <>\n        <SidebarSubhead />\n        <SidebarTitle>Pipeline Types</SidebarTitle>\n        {Object.keys(groups).map((title, idx) => (\n          <SidebarSection\n            key={idx}\n            title={title}\n            collapsedByDefault={idx !== 0}\n          >\n            <UL>{this.renderTypes(groups[title])}</UL>\n          </SidebarSection>\n        ))}\n        <H3 />\n      </>\n    );\n  }\n}\n\nconst TypeLI = styled.li`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n","import gql from \"graphql-tag\";\nimport * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport Loading from \"../Loading\";\nimport { useQuery } from \"react-apollo\";\nimport TypeList from \"./TypeList\";\nimport { TypeListContainerQuery } from \"./types/TypeListContainerQuery\";\n\ninterface ITypeListContainerProps {\n  pipelineName: string;\n}\n\nexport const TypeListContainer: React.FunctionComponent<ITypeListContainerProps> = ({\n  pipelineName\n}) => {\n  const queryResult = useQuery<TypeListContainerQuery>(\n    TYPE_LIST_CONTAINER_QUERY,\n    {\n      fetchPolicy: \"cache-and-network\",\n      variables: {\n        pipelineName: pipelineName\n      }\n    }\n  );\n\n  return (\n    <Loading queryResult={queryResult}>\n      {data => {\n        if (data.pipelineOrError.__typename === \"Pipeline\") {\n          return (\n            <TypeListWrapper>\n              <TypeList types={data.pipelineOrError.runtimeTypes} />\n            </TypeListWrapper>\n          );\n        } else {\n          return null;\n        }\n      }}\n    </Loading>\n  );\n};\n\nexport const TYPE_LIST_CONTAINER_QUERY = gql`\n  query TypeListContainerQuery($pipelineName: String!) {\n    pipelineOrError(params: { name: $pipelineName }) {\n      __typename\n      ... on Pipeline {\n        name\n        runtimeTypes {\n          ...TypeListFragment\n        }\n      }\n    }\n  }\n\n  ${TypeList.fragments.TypeListFragment}\n`;\n\nconst TypeListWrapper = styled.div`\n  padding: 5px;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { MetadataEntryFragment } from \"./types/MetadataEntryFragment\";\nimport { assertUnreachable } from \"../Util\";\nimport { copyValue } from \"../DomUtils\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport { Button, Dialog, Classes, Colors, Icon } from \"@blueprintjs/core\";\nimport ReactMarkdown from \"react-markdown\";\n\nexport const MetadataEntries: React.FunctionComponent<{\n  entries?: MetadataEntryFragment[];\n}> = ({ entries }) => {\n  if (!entries || !entries.length) {\n    return null;\n  }\n  return (\n    <div>\n      <MetadataEntriesTable cellPadding=\"0\" cellSpacing=\"0\">\n        <tbody>\n          {entries.map((item, idx) => (\n            <tr key={idx} style={{ display: \"flex\" }}>\n              <td\n                style={{\n                  flex: 1,\n                  maxWidth: \"max-content\"\n                }}\n              >\n                {item.label}\n              </td>\n              <td style={{ flex: 1 }}>\n                <MetadataEntry entry={item} />\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </MetadataEntriesTable>\n    </div>\n  );\n};\n\nexport class MetadataEntry extends React.Component<{\n  entry: MetadataEntryFragment;\n}> {\n  static fragments = {\n    MetadataEntryFragment: gql`\n      fragment MetadataEntryFragment on EventMetadataEntry {\n        __typename\n        label\n        description\n        ... on EventPathMetadataEntry {\n          path\n        }\n        ... on EventJsonMetadataEntry {\n          jsonString\n        }\n        ... on EventUrlMetadataEntry {\n          url\n        }\n        ... on EventTextMetadataEntry {\n          text\n        }\n        ... on EventMarkdownMetadataEntry {\n          mdStr\n        }\n      }\n    `\n  };\n\n  render() {\n    const { entry } = this.props;\n    switch (entry.__typename) {\n      case \"EventPathMetadataEntry\":\n        return (\n          <>\n            <MetadataEntryLink\n              title={\"Copy to clipboard\"}\n              onClick={e => copyValue(e, entry.path)}\n            >\n              {entry.path}\n            </MetadataEntryLink>{\" \"}\n            <Icon\n              icon=\"clipboard\"\n              iconSize={10}\n              color={\"#a88860\"}\n              onClick={e => copyValue(e, entry.path)}\n            />\n          </>\n        );\n\n      case \"EventJsonMetadataEntry\":\n        return (\n          <MetadataEntryLink\n            title=\"Show full value\"\n            onClick={() =>\n              showCustomAlert({\n                body: (\n                  <div style={{ whiteSpace: \"pre-wrap\" }}>\n                    {JSON.stringify(JSON.parse(entry.jsonString), null, 2)}\n                  </div>\n                ),\n                title: \"Value\"\n              })\n            }\n          >\n            [Show Metadata]\n          </MetadataEntryLink>\n        );\n\n      case \"EventUrlMetadataEntry\":\n        return (\n          <>\n            <MetadataEntryLink\n              href={entry.url}\n              title={`Open in a new tab`}\n              target=\"__blank\"\n            >\n              {entry.url}\n            </MetadataEntryLink>{\" \"}\n            <a href={entry.url} target=\"__blank\">\n              <Icon icon=\"link\" iconSize={10} color={\"#a88860\"} />\n            </a>\n          </>\n        );\n      case \"EventTextMetadataEntry\":\n        return entry.text;\n      case \"EventMarkdownMetadataEntry\":\n        return <MarkdownMetadataLink title={entry.label} mdStr={entry.mdStr} />;\n      default:\n        return assertUnreachable(entry);\n    }\n  }\n}\n\nclass MarkdownMetadataLink extends React.Component<{\n  title: string;\n  mdStr: string;\n}> {\n  state = { isExpanded: false };\n  onView = () => {\n    this.setState({ isExpanded: true });\n  };\n  onClose = () => {\n    this.setState({ isExpanded: false });\n  };\n\n  render() {\n    const { mdStr, title } = this.props;\n    const { isExpanded } = this.state;\n    return (\n      <>\n        <MetadataEntryLink onClick={this.onView}>\n          [Show Metadata]\n        </MetadataEntryLink>\n        {isExpanded && (\n          <Dialog\n            icon=\"info-sign\"\n            usePortal={true}\n            style={{ width: \"auto\", maxWidth: \"80vw\" }}\n            title={title}\n            onClose={this.onClose}\n            isOpen={true}\n          >\n            <MarkdownMetadataExpanded>\n              <ReactMarkdown source={mdStr} />\n            </MarkdownMetadataExpanded>\n\n            <div className={Classes.DIALOG_FOOTER}>\n              <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                <Button\n                  intent=\"primary\"\n                  autoFocus={true}\n                  onClick={this.onClose}\n                >\n                  Close\n                </Button>\n              </div>\n            </div>\n          </Dialog>\n        )}\n      </>\n    );\n  }\n}\n\nconst MarkdownMetadataExpanded = styled.div`\n  font-size: 13px;\n  overflow: auto;\n  max-height: 500px;\n  background: ${Colors.WHITE};\n  border-top: 1px solid ${Colors.LIGHT_GRAY3};\n  padding: 20px;\n  margin: 0;\n  margin-bottom: 20px;\n`;\n\nexport const MetadataEntryLink = styled.a`\n  text-decoration: underline;\n  color: inherit;\n  &:hover {\n    color: inherit;\n  }\n`;\n\nconst MetadataEntriesTable = styled.table`\n  padding: 0;\n  margin-top: 4px;\n  border-top: 1px solid #dbc5ad;\n  border-left: 1px solid #dbc5ad;\n  background: #fffaf5;\n  td:first-child {\n    color: #a88860;\n  }\n  td {\n    padding: 4px;\n    padding-right: 8px;\n    border-bottom: 1px solid #dbc5ad;\n    border-right: 1px solid #dbc5ad;\n    vertical-align: top;\n  }\n  width: 100%;\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\n\nconst OverflowFade = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  user-select: none;\n  pointer-events: none;\n  background: linear-gradient(\n    to bottom,\n    rgba(245, 248, 250, 0) 0%,\n    rgba(245, 248, 250, 255) 100%\n  );\n`;\n\nconst OverflowBanner = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 105px;\n  user-select: none;\n  font-size: 12px;\n  background: ${Colors.LIGHT_GRAY3};\n  border-top-left-radius: 4px;\n  padding: 2px 12px;\n  color: ${Colors.BLACK};\n  &:hover {\n    color: ${Colors.BLACK};\n    background: ${Colors.LIGHT_GRAY1};\n  }\n`;\n\nexport class CellTruncationProvider extends React.Component<\n  {\n    style: React.CSSProperties;\n    onExpand?: () => void;\n  },\n  { isOverflowing: boolean }\n> {\n  state = {\n    isOverflowing: false\n  };\n\n  private contentContainerRef: React.RefObject<\n    HTMLDivElement\n  > = React.createRef();\n\n  componentDidMount() {\n    this.detectOverflow();\n  }\n\n  componentDidUpdate() {\n    this.detectOverflow();\n  }\n\n  detectOverflow() {\n    const child =\n      this.contentContainerRef.current &&\n      this.contentContainerRef.current.firstElementChild;\n\n    if (!child) {\n      return;\n    }\n\n    const isOverflowing = child.scrollHeight > this.props.style.height!;\n    if (isOverflowing !== this.state.isOverflowing) {\n      this.setState({ isOverflowing });\n    }\n  }\n\n  defaultExpand() {\n    const message =\n      this.contentContainerRef.current &&\n      this.contentContainerRef.current.textContent;\n    message &&\n      showCustomAlert({\n        body: <div style={{ whiteSpace: \"pre-wrap\" }}>{message}</div>\n      });\n  }\n\n  onView = () => {\n    const { onExpand } = this.props;\n    onExpand ? onExpand() : this.defaultExpand();\n  };\n\n  render() {\n    const { style } = this.props;\n\n    return (\n      <div style={style}>\n        <div ref={this.contentContainerRef}>{this.props.children}</div>\n        {this.state.isOverflowing && (\n          <>\n            <OverflowFade />\n            <OverflowBanner onClick={this.onView}>\n              View Full Message\n            </OverflowBanner>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { Tag, Colors } from \"@blueprintjs/core\";\nimport {\n  LogsRowStructuredFragment,\n  LogsRowStructuredFragment_ExecutionStepFailureEvent,\n  LogsRowStructuredFragment_PipelineInitFailureEvent\n} from \"./types/LogsRowStructuredFragment\";\nimport { EventTypeColumn } from \"./LogsRowComponents\";\nimport { MetadataEntries } from \"./MetadataEntry\";\nimport { assertUnreachable } from \"../Util\";\nimport { MetadataEntryFragment } from \"./types/MetadataEntryFragment\";\n\ninterface IStructuredContentProps {\n  node: LogsRowStructuredFragment;\n}\n\nexport const LogsRowStructuredContent: React.FunctionComponent<IStructuredContentProps> = ({\n  node\n}) => {\n  switch (node.__typename) {\n    // Errors\n    case \"ExecutionStepFailureEvent\":\n    case \"PipelineInitFailureEvent\":\n      return <FailureContent node={node} />;\n\n    // Default Behavior\n    case \"PipelineProcessStartEvent\":\n      return <DefaultContent message={node.message} eventType=\"Starting\" />;\n    case \"PipelineProcessStartedEvent\":\n      return <DefaultContent message={node.message} eventType=\"Started\" />;\n    case \"PipelineProcessExitedEvent\":\n      return <DefaultContent message={node.message} eventType=\"Exited\" />;\n    case \"ExecutionStepStartEvent\":\n      return <DefaultContent message={node.message} eventType=\"Step Start\" />;\n    case \"ExecutionStepSkippedEvent\":\n      return <DefaultContent message={node.message} eventType=\"Skipped\" />;\n    case \"ExecutionStepSuccessEvent\":\n      return (\n        <DefaultContent message={node.message} eventType=\"Step Finished\" />\n      );\n    case \"ExecutionStepInputEvent\":\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType=\"Input\"\n          eventIntent={node.typeCheck.success ? \"success\" : \"warning\"}\n        >\n          <MetadataEntries entries={node.typeCheck.metadataEntries} />\n        </DefaultContent>\n      );\n    case \"ExecutionStepOutputEvent\":\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType=\"Output\"\n          eventIntent={node.typeCheck.success ? \"success\" : \"warning\"}\n        >\n          <MetadataEntries entries={node.typeCheck.metadataEntries} />\n        </DefaultContent>\n      );\n    case \"StepExpectationResultEvent\":\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType=\"Expectation\"\n          eventIntent={node.expectationResult.success ? \"success\" : \"warning\"}\n        >\n          <MetadataEntries entries={node.expectationResult.metadataEntries} />\n        </DefaultContent>\n      );\n    case \"StepMaterializationEvent\":\n      return (\n        <DefaultContent message={node.message} eventType=\"Materialization\">\n          <MetadataEntries entries={node.materialization.metadataEntries} />\n        </DefaultContent>\n      );\n    case \"ObjectStoreOperationEvent\":\n      return (\n        <DefaultContent\n          message={node.message}\n          eventType={\n            node.operationResult.op === \"SET_OBJECT\"\n              ? \"Store\"\n              : node.operationResult.op === \"GET_OBJECT\"\n              ? \"Retrieve\"\n              : \"\"\n          }\n        >\n          <MetadataEntries entries={node.operationResult.metadataEntries} />\n        </DefaultContent>\n      );\n    case \"PipelineFailureEvent\":\n    case \"PipelineSuccessEvent\":\n    case \"LogMessageEvent\":\n    case \"PipelineStartEvent\":\n      return <DefaultContent message={node.message} />;\n    case \"EngineEvent\":\n      return (\n        <DefaultContent message={node.message}>\n          <MetadataEntries entries={node.metadataEntries} />\n        </DefaultContent>\n      );\n\n    default:\n      // This allows us to check that the switch is exhaustive because the union type should\n      // have been narrowed following each successive case to `never` at this point.\n      return assertUnreachable(node);\n  }\n};\n\n// Structured Content Renderers\n\nconst DefaultContent: React.FunctionComponent<{\n  message: string;\n  eventType?: string;\n  eventIntent?: \"success\" | \"danger\" | \"warning\";\n  metadataEntries?: MetadataEntryFragment[];\n  children?: React.ReactElement;\n}> = ({ message, eventType, eventIntent, children }) => {\n  return (\n    <>\n      <EventTypeColumn>\n        {eventType && (\n          <Tag\n            minimal={true}\n            intent={eventIntent}\n            style={{ fontSize: \"0.9em\" }}\n          >\n            {eventType}\n          </Tag>\n        )}\n      </EventTypeColumn>\n      <span style={{ flex: 1 }}>\n        {message}\n        {children}\n      </span>\n    </>\n  );\n};\n\nconst FailureContent: React.FunctionComponent<{\n  node:\n    | LogsRowStructuredFragment_ExecutionStepFailureEvent\n    | LogsRowStructuredFragment_PipelineInitFailureEvent;\n}> = ({ node }) => (\n  <>\n    <EventTypeColumn>\n      <Tag minimal={true} intent=\"danger\" style={{ fontSize: \"0.9em\" }}>\n        Failed\n      </Tag>\n    </EventTypeColumn>\n    <span style={{ flex: 1, color: Colors.RED3 }}>\n      {`${node.error.message}\\n${node.error.stack}`}\n    </span>\n  </>\n);\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\n\nimport { LogLevel } from \"../types/globalTypes\";\n\nimport { LogsRowStructuredFragment } from \"./types/LogsRowStructuredFragment\";\nimport { LogsRowUnstructuredFragment } from \"./types/LogsRowUnstructuredFragment\";\nimport {\n  Row,\n  StructuredContent,\n  EventTypeColumn,\n  SolidColumn,\n  TimestampColumn\n} from \"./LogsRowComponents\";\nimport { MetadataEntry } from \"./MetadataEntry\";\nimport { CellTruncationProvider } from \"./CellTruncationProvider\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport { LogsRowStructuredContent } from \"./LogsRowStructuredContent\";\nimport InfoModal from \"../InfoModal\";\nimport PythonErrorInfo from \"../PythonErrorInfo\";\nimport { isEqual } from \"apollo-utilities\";\n\ninterface StructuredProps {\n  node: LogsRowStructuredFragment;\n  style: React.CSSProperties;\n}\n\ninterface StructuredState {\n  expanded: boolean;\n}\n\nexport class Structured extends React.Component<\n  StructuredProps,\n  StructuredState\n> {\n  static fragments = {\n    LogsRowStructuredFragment: gql`\n      fragment LogsRowStructuredFragment on PipelineRunEvent {\n        __typename\n        ... on MessageEvent {\n          message\n          timestamp\n          level\n          step {\n            key\n          }\n        }\n        ... on PipelineProcessStartedEvent {\n          message\n        }\n        ... on PipelineProcessStartEvent {\n          message\n        }\n        ... on StepMaterializationEvent {\n          step {\n            key\n          }\n          materialization {\n            label\n            description\n            metadataEntries {\n              ...MetadataEntryFragment\n            }\n          }\n        }\n        ... on PipelineInitFailureEvent {\n          error {\n            stack\n            message\n          }\n        }\n        ... on ExecutionStepFailureEvent {\n          message\n          level\n          step {\n            key\n          }\n          error {\n            stack\n            message\n          }\n        }\n        ... on ExecutionStepInputEvent {\n          inputName\n          typeCheck {\n            label\n            description\n            success\n            metadataEntries {\n              ...MetadataEntryFragment\n            }\n          }\n        }\n        ... on ExecutionStepOutputEvent {\n          outputName\n          typeCheck {\n            label\n            description\n            success\n            metadataEntries {\n              ...MetadataEntryFragment\n            }\n          }\n        }\n        ... on StepExpectationResultEvent {\n          expectationResult {\n            success\n            label\n            description\n            metadataEntries {\n              ...MetadataEntryFragment\n            }\n          }\n        }\n        ... on ObjectStoreOperationEvent {\n          step {\n            key\n          }\n          operationResult {\n            op\n            metadataEntries {\n              ...MetadataEntryFragment\n            }\n          }\n        }\n        ... on EngineEvent {\n          metadataEntries {\n            ...MetadataEntryFragment\n          }\n        }\n      }\n      ${MetadataEntry.fragments.MetadataEntryFragment}\n      ${PythonErrorInfo.fragments.PythonErrorFragment}\n    `\n  };\n\n  state = {\n    expanded: false\n  };\n\n  onExpand = () => {\n    this.setState({ expanded: true });\n  };\n\n  onCollapse = () => {\n    this.setState({ expanded: false });\n  };\n\n  renderExpanded() {\n    const { node } = this.props;\n    const { expanded } = this.state;\n    if (!expanded) {\n      return null;\n    }\n\n    if (\n      node.__typename === \"ExecutionStepFailureEvent\" ||\n      node.__typename === \"PipelineInitFailureEvent\"\n    ) {\n      return (\n        <InfoModal title=\"Error\" onRequestClose={this.onCollapse}>\n          <PythonErrorInfo error={node.error} />\n        </InfoModal>\n      );\n    }\n\n    return (\n      <InfoModal\n        title={(node.step && node.step.key) || undefined}\n        onRequestClose={this.onCollapse}\n      >\n        <StructuredContent>\n          <LogsRowStructuredContent node={node} />\n        </StructuredContent>\n      </InfoModal>\n    );\n  }\n\n  render() {\n    return (\n      <CellTruncationProvider style={this.props.style} onExpand={this.onExpand}>\n        <StructuredMemoizedContent node={this.props.node} />\n        {this.renderExpanded()}\n      </CellTruncationProvider>\n    );\n  }\n}\n\nconst StructuredMemoizedContent: React.FunctionComponent<{\n  node: LogsRowStructuredFragment;\n}> = React.memo(\n  ({ node }) => (\n    <Row level={LogLevel.INFO}>\n      <SolidColumn stepKey={\"step\" in node && node.step && node.step.key} />\n      <StructuredContent>\n        <LogsRowStructuredContent node={node} />\n      </StructuredContent>\n      <TimestampColumn time={\"timestamp\" in node && node.timestamp} />\n    </Row>\n  ),\n  isEqual\n);\n\ninterface UnstructuredProps {\n  node: LogsRowUnstructuredFragment;\n  style: React.CSSProperties;\n}\n\nexport class Unstructured extends React.Component<UnstructuredProps> {\n  static fragments = {\n    LogsRowUnstructuredFragment: gql`\n      fragment LogsRowUnstructuredFragment on PipelineRunEvent {\n        __typename\n        ... on MessageEvent {\n          message\n          timestamp\n          level\n          step {\n            key\n          }\n        }\n      }\n    `\n  };\n\n  onExpand = () => {\n    showCustomAlert({\n      body: (\n        <div style={{ whiteSpace: \"pre-wrap\" }}>{this.props.node.message}</div>\n      )\n    });\n  };\n\n  render() {\n    return (\n      <CellTruncationProvider style={this.props.style} onExpand={this.onExpand}>\n        <UnstructuredMemoizedContent node={this.props.node} />\n      </CellTruncationProvider>\n    );\n  }\n}\n\nconst UnstructuredMemoizedContent: React.FunctionComponent<{\n  node: LogsRowUnstructuredFragment;\n}> = React.memo(\n  ({ node }) => (\n    <Row level={node.level}>\n      <SolidColumn stepKey={node.step && node.step.key} />\n      <EventTypeColumn>{node.level}</EventTypeColumn>\n      <span style={{ flex: 1 }}>{node.message}</span>\n      <TimestampColumn time={node.timestamp} />\n    </Row>\n  ),\n  isEqual\n);\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\n\nconst ColumnWidthsStorageKey = \"ColumnWidths\";\nconst ColumnWidths = {\n  eventType: 140,\n  solid: 150,\n  timestamp: 100\n};\nconst MIN_COLUMN_WIDTH = 40;\n\ntry {\n  const saved = window.localStorage.getItem(ColumnWidthsStorageKey);\n  Object.assign(ColumnWidths, JSON.parse(saved || \"{}\"));\n} catch (err) {\n  // no-op\n}\n\nexport const ColumnWidthsContext = React.createContext({\n  ...ColumnWidths,\n  onChange: (_: typeof ColumnWidths) => {}\n});\n\nexport class ColumnWidthsProvider extends React.Component<\n  { onWidthsChanged: (widths: typeof ColumnWidths) => void },\n  typeof ColumnWidths\n> {\n  state = ColumnWidths;\n\n  onWidthsChangedFromContext = (columnWidths: typeof ColumnWidths) => {\n    window.localStorage.setItem(\n      ColumnWidthsStorageKey,\n      JSON.stringify(columnWidths)\n    );\n    this.props.onWidthsChanged(columnWidths);\n    this.setState(columnWidths);\n  };\n\n  render() {\n    return (\n      <ColumnWidthsContext.Provider\n        value={{\n          ...this.state,\n          onChange: this.onWidthsChangedFromContext\n        }}\n      >\n        {this.props.children}\n      </ColumnWidthsContext.Provider>\n    );\n  }\n}\n\ninterface HeaderProps extends React.HTMLProps<HTMLDivElement> {\n  width: number;\n  handleSide?: \"left\" | \"right\";\n  onResize?: (width: number) => void;\n}\n\ninterface HeaderState {\n  isDragging: boolean;\n  width: number;\n  screenX: number;\n}\n\nclass Header extends React.Component<HeaderProps, HeaderState> {\n  state = {\n    isDragging: false,\n    width: 0,\n    screenX: 0\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  onMouseDown = (m: React.MouseEvent<HTMLDivElement>) => {\n    const { width } = this.props;\n    this.setState({\n      isDragging: true,\n      screenX: m.screenX,\n      width\n    });\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n  };\n\n  onMouseMove = (evt: MouseEvent) => {\n    const { onResize, handleSide } = this.props;\n    const { isDragging, width, screenX } = this.state;\n    if (!evt.screenX || !isDragging || !onResize) {\n      return;\n    }\n    const dir = handleSide === \"left\" ? -1 : 1;\n    onResize(Math.max(MIN_COLUMN_WIDTH, width + (evt.screenX - screenX) * dir));\n  };\n\n  onMouseUp = () => {\n    const { isDragging } = this.state;\n    isDragging && this.setState({ isDragging: false });\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n  };\n\n  render() {\n    const isDraggable = !!this.props.onResize;\n\n    return (\n      <HeaderContainer style={{ width: this.props.width }}>\n        <HeaderDragHandle\n          onMouseDown={isDraggable ? this.onMouseDown : undefined}\n          isDraggable={isDraggable}\n          isDragging={this.state.isDragging}\n          side={this.props.handleSide || \"right\"}\n        >\n          <div />\n        </HeaderDragHandle>\n        {this.props.children}\n      </HeaderContainer>\n    );\n  }\n}\n\nexport const Headers: React.FunctionComponent<{}> = () => {\n  const widths = React.useContext(ColumnWidthsContext);\n  return (\n    <HeadersContainer>\n      <Header\n        width={widths.solid}\n        onResize={width => widths.onChange({ ...widths, solid: width })}\n      >\n        Solid\n      </Header>\n      <Header\n        width={widths.eventType}\n        onResize={width => widths.onChange({ ...widths, eventType: width })}\n      >\n        Event Type\n      </Header>\n      <HeaderContainer style={{ flex: 1 }}>Info</HeaderContainer>\n      <Header handleSide=\"left\" width={widths.timestamp}>\n        Timestamp\n      </Header>\n    </HeadersContainer>\n  );\n};\n\nconst HeadersContainer = styled.div`\n  display: flex;\n  color: ${Colors.GRAY3};\n  text-transform: uppercase;\n  font-size: 11px;\n  border-bottom: 1px solid #cbd4da;\n`;\n\nconst HeaderContainer = styled.div`\n  flex-shrink: 0;\n  position: relative;\n  user-select: none;\n  display: inline-block;\n  padding: 4px 8px;\n`;\n\n// eslint-disable-next-line no-unexpected-multiline\nconst HeaderDragHandle = styled.div<{\n  side: \"left\" | \"right\";\n  isDraggable: boolean;\n  isDragging: boolean;\n}>`\n  width: 17px;\n  height: 20000px;\n  position: absolute;\n  cursor: ${({ isDraggable }) => (isDraggable ? \"ew-resize\" : \"default\")};\n  z-index: 2;\n  ${({ side }) => (side === \"right\" ? `right: -13px;` : `left: -13px;`)}\n  padding: 0 8px;\n  & > div {\n    width: 1px;\n    height: 100%;\n    background: ${({ isDragging }) =>\n      isDragging ? Colors.GRAY1 : Colors.LIGHT_GRAY3};\n  }\n`;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport gql from \"graphql-tag\";\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport {\n  CellMeasurer,\n  CellMeasurerCache,\n  ListRowProps,\n  List\n} from \"react-virtualized\";\n\nimport * as LogsRow from \"./LogsRow\";\nimport { LogsScrollingTableMessageFragment } from \"./types/LogsScrollingTableMessageFragment\";\nimport { Headers, ColumnWidthsProvider } from \"./LogsScrollingTableHeader\";\n\ninterface ILogsScrollingTableProps {\n  nodes?: (LogsScrollingTableMessageFragment & { clientsideKey: string })[];\n\n  // We use this string to know whether the changes to `nodes` require us to\n  // re-layout the entire table. Appending new rows can be done very fast, but\n  // removing some rows requires the whole list be \"reflowed\" again. Checking\n  // `nodes` for equality doesn't let us optimize for the append- case.\n  filterKey: string;\n}\n\ninterface ILogsScrollingTableSizedProps extends ILogsScrollingTableProps {\n  width: number;\n  height: number;\n}\n\nexport default class LogsScrollingTable extends React.Component<\n  ILogsScrollingTableProps\n> {\n  static fragments = {\n    LogsScrollingTableMessageFragment: gql`\n      fragment LogsScrollingTableMessageFragment on PipelineRunEvent {\n        __typename\n        ...LogsRowStructuredFragment\n        ...LogsRowUnstructuredFragment\n      }\n\n      ${LogsRow.Structured.fragments.LogsRowStructuredFragment}\n      ${LogsRow.Unstructured.fragments.LogsRowUnstructuredFragment}\n    `\n  };\n\n  table = React.createRef<LogsScrollingTableSized>();\n\n  render() {\n    return (\n      <ColumnWidthsProvider\n        onWidthsChanged={() =>\n          this.table.current && this.table.current.didResize()\n        }\n      >\n        <Headers />\n        <AutoSizer>\n          {({ width, height }) => (\n            <LogsScrollingTableSized\n              width={width}\n              height={height}\n              ref={this.table}\n              {...this.props}\n            />\n          )}\n        </AutoSizer>\n      </ColumnWidthsProvider>\n    );\n  }\n}\n\nclass LogsScrollingTableSized extends React.Component<\n  ILogsScrollingTableSizedProps\n> {\n  list = React.createRef<List>();\n\n  get listEl() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = this.list.current && ReactDOM.findDOMNode(this.list.current);\n    if (!(el instanceof HTMLElement)) {\n      return null;\n    }\n    return el;\n  }\n\n  cache = new CellMeasurerCache({\n    defaultHeight: 30,\n    fixedWidth: true,\n    keyMapper: rowIndex =>\n      this.props.nodes ? this.props.nodes[rowIndex].clientsideKey : \"\"\n  });\n\n  isAtBottomOrZero = true;\n  scrollToBottomObserver: MutationObserver;\n\n  componentDidMount() {\n    this.attachScrollToBottomObserver();\n  }\n\n  componentDidUpdate(prevProps: ILogsScrollingTableSizedProps) {\n    if (!this.list.current) return;\n\n    if (this.props.width !== prevProps.width) {\n      this.didResize();\n    }\n    if (this.props.filterKey !== prevProps.filterKey) {\n      this.list.current.recomputeGridSize();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.scrollToBottomObserver) {\n      this.scrollToBottomObserver.disconnect();\n    }\n  }\n\n  didResize() {\n    this.cache.clearAll();\n    this.forceUpdate();\n  }\n\n  attachScrollToBottomObserver() {\n    const el = this.listEl;\n    if (!el) return;\n\n    let lastHeight: string | null = null;\n\n    this.scrollToBottomObserver = new MutationObserver(() => {\n      const rowgroupEl = el.querySelector(\"[role=rowgroup]\") as HTMLElement;\n      if (!rowgroupEl) {\n        lastHeight = null;\n        return;\n      }\n      if (rowgroupEl.style.height === lastHeight) return;\n      if (!this.isAtBottomOrZero) return;\n\n      lastHeight = rowgroupEl.style.height;\n      el.scrollTop = el.scrollHeight - el.clientHeight;\n    });\n\n    this.scrollToBottomObserver.observe(el, {\n      attributes: true,\n      subtree: true\n    });\n  }\n\n  onScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    if (!this.list.current) return;\n\n    const { scrollTop, scrollHeight, clientHeight } = e.target as Element;\n    const atTopAndStarting = scrollTop === 0 && scrollHeight <= clientHeight;\n    const atBottom = Math.abs(scrollTop - (scrollHeight - clientHeight)) < 5;\n    this.isAtBottomOrZero = atTopAndStarting || atBottom;\n\n    (this.list.current as any)._onScroll(e.target as Element);\n  };\n\n  rowRenderer = ({ parent, index, style }: ListRowProps) => {\n    if (!this.props.nodes) return;\n    const node = this.props.nodes[index];\n    if (!node) return <span />;\n\n    return (\n      <CellMeasurer\n        cache={this.cache}\n        index={index}\n        parent={parent}\n        key={node.clientsideKey}\n      >\n        {node.__typename === \"LogMessageEvent\" ? (\n          <LogsRow.Unstructured\n            node={node}\n            style={{ ...style, width: this.props.width }}\n          />\n        ) : (\n          <LogsRow.Structured\n            node={node}\n            style={{ ...style, width: this.props.width }}\n          />\n        )}\n      </CellMeasurer>\n    );\n  };\n\n  noContentRenderer = () => {\n    if (this.props.nodes) {\n      return (\n        <NonIdealState icon={IconNames.CONSOLE} title=\"No logs to display\" />\n      );\n    }\n    return <span />;\n  };\n\n  render() {\n    return (\n      <div onScroll={this.onScroll}>\n        <List\n          ref={this.list}\n          deferredMeasurementCache={this.cache}\n          rowCount={this.props.nodes ? this.props.nodes.length : 0}\n          noContentRenderer={this.noContentRenderer}\n          rowHeight={this.cache.rowHeight}\n          rowRenderer={this.rowRenderer}\n          width={this.props.width}\n          height={this.props.height}\n          overscanRowCount={10}\n        />\n      </div>\n    );\n  }\n}\n\nclass AutoSizer extends React.Component<{\n  children: (size: { width: number; height: number }) => React.ReactNode;\n}> {\n  state = {\n    width: 0,\n    height: 0\n  };\n\n  resizeObserver: any | undefined;\n\n  componentDidMount() {\n    this.measure();\n\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = ReactDOM.findDOMNode(this);\n    if (el && el instanceof HTMLElement && \"ResizeObserver\" in window) {\n      const RO = window[\"ResizeObserver\"] as any;\n      this.resizeObserver = new RO((entries: any) => {\n        this.setState({\n          width: entries[0].contentRect.width,\n          height: entries[0].contentRect.height\n        });\n      });\n      this.resizeObserver.observe(el);\n    }\n  }\n\n  componentDidUpdate() {\n    this.measure();\n  }\n\n  componentWillUnmount() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n  }\n\n  measure() {\n    // eslint-disable-next-line react/no-find-dom-node\n    const el = ReactDOM.findDOMNode(this);\n    if (!el || !(el instanceof HTMLElement)) return;\n    if (\n      el.clientWidth !== this.state.width ||\n      el.clientHeight !== this.state.height\n    ) {\n      this.setState({ width: el.clientWidth, height: el.clientHeight });\n    }\n  }\n\n  render() {\n    return (\n      <div style={{ width: \"100%\", height: \"100%\" }}>\n        {this.props.children(this.state)}\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  Spinner,\n  Intent,\n  Colors,\n  Button,\n  ButtonGroup,\n  InputGroup,\n  Icon\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { ILogFilter, LogLevel } from \"./LogsProvider\";\n\ninterface ILogsToolbarProps {\n  filter: ILogFilter;\n  onSetFilter: (filter: ILogFilter) => void;\n  showSpinner: boolean;\n}\n\nconst FilterSpinner = <Spinner intent={Intent.NONE} size={16} />;\n\nexport default class LogsToolbar extends React.PureComponent<\n  ILogsToolbarProps\n> {\n  render() {\n    const { filter, onSetFilter, showSpinner } = this.props;\n    return (\n      <LogsToolbarContainer>\n        <FilterInputGroup\n          leftIcon=\"filter\"\n          placeholder=\"Filter logs...\"\n          small={true}\n          value={filter.text}\n          spellCheck={false}\n          rightElement={\n            showSpinner ? (\n              FilterSpinner\n            ) : filter.text.length ? (\n              <Icon\n                color={Colors.GRAY1}\n                icon={IconNames.SMALL_CROSS}\n                style={{ padding: 4 }}\n                onClick={() => onSetFilter({ ...filter, text: \"\" })}\n              />\n            ) : (\n              undefined\n            )\n          }\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n            onSetFilter({ ...filter, text: e.target.value })\n          }\n        />\n        <LogsToolbarDivider />\n        <ButtonGroup>\n          {Object.keys(LogLevel).map(level => (\n            <Button\n              key={level}\n              text={level.toLowerCase()}\n              small={true}\n              style={{ textTransform: \"capitalize\" }}\n              active={filter.levels[level]}\n              onClick={() =>\n                onSetFilter({\n                  ...filter,\n                  levels: {\n                    ...filter.levels,\n                    [level]: !filter.levels[level]\n                  }\n                })\n              }\n            />\n          ))}\n        </ButtonGroup>\n        <div style={{ minWidth: 15, flex: 1 }} />\n        <Button\n          text={\"Clear\"}\n          small={true}\n          icon={IconNames.ERASER}\n          onClick={() => onSetFilter({ ...filter, since: Date.now() })}\n        />\n        {this.props.children}\n      </LogsToolbarContainer>\n    );\n  }\n}\n\nconst LogsToolbarContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  background: ${Colors.WHITE};\n  height: 40px;\n  align-items: center;\n  padding: 5px 15px;\n  border-bottom: 1px solid ${Colors.GRAY4};\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.07);\n`;\n\nconst LogsToolbarDivider = styled.div`\n  display: inline-block;\n  width: 1px;\n  height: 30px;\n  margin: 0 15px;\n  border-right: 1px solid ${Colors.LIGHT_GRAY3};\n`;\n\nconst FilterInputGroup = styled(InputGroup)`\n  flex: 2;\n  max-width: 275px;\n  min-width: 100px;\n`;\n","import * as React from \"react\";\nimport { PipelineRunStatus } from \"../types/globalTypes\";\nimport { RunStatusPipelineRunFragment } from \"./types/RunStatusPipelineRunFragment\";\nimport gql from \"graphql-tag\";\n\nconst link = (document.querySelector(\"link[rel*='icon']\") ||\n  document.createElement(\"link\")) as HTMLLinkElement;\nlink.type = \"image/x-icon\";\nlink.rel = \"shortcut icon\";\ndocument.getElementsByTagName(\"head\")[0].appendChild(link);\n\nconst title = document.querySelector(\"title\") as HTMLTitleElement;\n\nconst FaviconsForStatus = {\n  [PipelineRunStatus.FAILURE]: \"/favicon_failed.ico\",\n  [PipelineRunStatus.STARTED]: \"/favicon_pending.ico\",\n  [PipelineRunStatus.NOT_STARTED]: \"/favicon_pending.ico\",\n  [PipelineRunStatus.SUCCESS]: \"/favicon_success.ico\"\n};\n\nexport class RunStatusToPageAttributes extends React.Component<{\n  run: RunStatusPipelineRunFragment;\n}> {\n  static fragments = {\n    RunStatusPipelineRunFragment: gql`\n      fragment RunStatusPipelineRunFragment on PipelineRun {\n        runId\n        status\n        pipeline {\n          name\n        }\n      }\n    `\n  };\n\n  componentDidMount() {\n    this.updatePageAttributes();\n  }\n\n  componentDidUpdate() {\n    this.updatePageAttributes();\n  }\n\n  componentWillUnmount() {\n    link.href = \"/favicon.ico\";\n    title.textContent = \"Dagit\";\n  }\n\n  updatePageAttributes() {\n    const { status, pipeline, runId } = this.props.run;\n\n    title.textContent = `${pipeline.name} ${runId} [${status}]`;\n    link.href = FaviconsForStatus[status] || \"/favicon.ico\";\n  }\n\n  render() {\n    return <span />;\n  }\n}\n","import * as React from \"react\";\nimport * as yaml from \"yaml\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { Colors, Button, Intent, Tooltip, Position } from \"@blueprintjs/core\";\nimport { MutationFunction, Mutation, useMutation } from \"react-apollo\";\nimport ApolloClient from \"apollo-client\";\n\nimport { ILogFilter, LogsProvider, GetDefaultLogFilter } from \"./LogsProvider\";\nimport LogsScrollingTable from \"./LogsScrollingTable\";\nimport { RunFragment, RunFragment_executionPlan } from \"./types/RunFragment\";\nimport { SplitPanelChildren } from \"../SplitPanelChildren\";\nimport { ExecutionPlan } from \"../plan/ExecutionPlan\";\nimport { RunMetadataProvider } from \"../RunMetadataProvider\";\nimport LogsToolbar from \"./LogsToolbar\";\nimport {\n  handleExecutionResult,\n  START_PIPELINE_EXECUTION_MUTATION\n} from \"./RunUtils\";\nimport {\n  StartPipelineExecution,\n  StartPipelineExecutionVariables\n} from \"./types/StartPipelineExecution\";\nimport { RunStatusToPageAttributes } from \"./RunStatusToPageAttributes\";\nimport ExecutionStartButton from \"../execute/ExecutionStartButton\";\nimport InfoModal from \"../InfoModal\";\nimport PythonErrorInfo from \"../PythonErrorInfo\";\nimport { RunContext } from \"./RunContext\";\nimport { PipelineRunStatus } from \"../types/globalTypes\";\n\nimport {\n  RunPipelineRunEventFragment_ExecutionStepFailureEvent,\n  RunPipelineRunEventFragment\n} from \"./types/RunPipelineRunEventFragment\";\nimport { CANCEL_MUTATION } from \"./RunUtils\";\nimport { SharedToaster } from \"../DomUtils\";\n\nconst REEXECUTE_DESCRIPTION = \"Re-execute the pipeline run from scratch\";\nconst REEXECUTE_PIPELINE_UNKNOWN =\n  \"Re-execute is unavailable because the pipeline is not present in the current repository.\";\nconst RETRY_DESCRIPTION =\n  \"Retries the pipeline run, skipping steps that completed successfully\";\nconst RETRY_DISABLED =\n  \"Retries are only enabled on persistent storage. Try rerunning with a different storage configuration.\";\nconst RETRY_PIPELINE_UNKNOWN =\n  \"Retry is unavailable because the pipeline is not present in the current repository.\";\n\ninterface IRunProps {\n  client: ApolloClient<any>;\n  run?: RunFragment;\n}\n\ninterface IRunState {\n  logsFilter: ILogFilter;\n  highlightedError?: { message: string; stack: string[] };\n}\n\nconst CancelRunButton: React.FunctionComponent<{ run: RunFragment }> = ({\n  run\n}) => {\n  const [cancel] = useMutation(CANCEL_MUTATION);\n  const [inFlight, setInFlight] = React.useState(false);\n  return (\n    <Button\n      icon={IconNames.STOP}\n      small={true}\n      text=\"Terminate\"\n      intent=\"warning\"\n      disabled={inFlight}\n      onClick={async () => {\n        setInFlight(true);\n        const res = await cancel({\n          variables: { runId: run.runId }\n        });\n        setInFlight(false);\n        if (res.data?.cancelPipelineExecution?.message) {\n          SharedToaster.show({\n            message: res.data.cancelPipelineExecution.message,\n            icon: \"error\",\n            intent: Intent.DANGER\n          });\n        }\n      }}\n    />\n  );\n};\n\nexport class Run extends React.Component<IRunProps, IRunState> {\n  static fragments = {\n    RunFragment: gql`\n      fragment RunFragment on PipelineRun {\n        ...RunStatusPipelineRunFragment\n\n        environmentConfigYaml\n        runId\n        canCancel\n        status\n        mode\n        pipeline {\n          __typename\n          ... on PipelineReference {\n            name\n          }\n          ... on Pipeline {\n            solids {\n              name\n            }\n          }\n        }\n        executionPlan {\n          ...ExecutionPlanFragment\n          steps {\n            key\n            inputs {\n              dependsOn {\n                key\n                outputs {\n                  name\n                  type {\n                    name\n                  }\n                }\n              }\n            }\n          }\n          artifactsPersisted\n        }\n        stepKeysToExecute\n      }\n\n      ${ExecutionPlan.fragments.ExecutionPlanFragment}\n      ${RunStatusToPageAttributes.fragments.RunStatusPipelineRunFragment}\n    `,\n    RunPipelineRunEventFragment: gql`\n      fragment RunPipelineRunEventFragment on PipelineRunEvent {\n        ... on MessageEvent {\n          message\n          timestamp\n          level\n          step {\n            key\n          }\n        }\n        ... on ExecutionStepFailureEvent {\n          error {\n            ...PythonErrorFragment\n          }\n        }\n        ...LogsScrollingTableMessageFragment\n        ...RunMetadataProviderMessageFragment\n      }\n\n      ${RunMetadataProvider.fragments.RunMetadataProviderMessageFragment}\n      ${LogsScrollingTable.fragments.LogsScrollingTableMessageFragment}\n      ${PythonErrorInfo.fragments.PythonErrorFragment}\n    `\n  };\n\n  state: IRunState = {\n    logsFilter: GetDefaultLogFilter(),\n    highlightedError: undefined\n  };\n\n  onShowStateDetails = (\n    stepKey: string,\n    logs: RunPipelineRunEventFragment[]\n  ) => {\n    const errorNode = logs.find(\n      node =>\n        node.__typename === \"ExecutionStepFailureEvent\" &&\n        node.step != null &&\n        node.step.key === stepKey\n    ) as RunPipelineRunEventFragment_ExecutionStepFailureEvent;\n\n    if (errorNode) {\n      this.setState({ highlightedError: errorNode.error });\n    }\n  };\n\n  onReexecute = async (\n    mutation: MutationFunction<\n      StartPipelineExecution,\n      StartPipelineExecutionVariables\n    >,\n    stepKey?: string,\n    resumeRetry?: boolean\n  ) => {\n    const { run } = this.props;\n    if (!run || run.pipeline.__typename === \"UnknownPipeline\") return;\n\n    const variables: StartPipelineExecutionVariables = {\n      executionParams: {\n        mode: run.mode,\n        environmentConfigData: yaml.parse(run.environmentConfigYaml),\n        selector: {\n          name: run.pipeline.name,\n          solidSubset: run.pipeline.solids.map(s => s.name)\n        }\n      }\n    };\n\n    if (stepKey && run.executionPlan) {\n      const step = run.executionPlan.steps.find(s => s.key === stepKey);\n      if (!step) return;\n      variables.executionParams.stepKeys = [stepKey];\n      variables.executionParams.retryRunId = run.runId;\n    } else if (resumeRetry) {\n      variables.executionParams.retryRunId = run.runId;\n    }\n\n    const result = await mutation({ variables });\n\n    handleExecutionResult(run.pipeline.name, result, {\n      openInNewWindow: false\n    });\n  };\n\n  renderRetry(\n    reexecuteMutation: MutationFunction<\n      StartPipelineExecution,\n      StartPipelineExecutionVariables\n    >\n  ) {\n    const { run } = this.props;\n    if (!run || !run.executionPlan) {\n      return null;\n    }\n\n    const isUnknown = run.pipeline.__typename === \"UnknownPipeline\";\n\n    if (run.status !== PipelineRunStatus.FAILURE) {\n      return null;\n    }\n\n    if (!run.executionPlan.artifactsPersisted) {\n      return (\n        <Tooltip\n          hoverOpenDelay={300}\n          content={RETRY_DISABLED}\n          position={Position.BOTTOM}\n        >\n          <ExecutionStartButton\n            title=\"Resume / Retry\"\n            icon={IconNames.DISABLE}\n            small={true}\n            disabled\n            onClick={() => null}\n          />\n        </Tooltip>\n      );\n    }\n\n    return (\n      <Tooltip\n        hoverOpenDelay={300}\n        content={isUnknown ? RETRY_PIPELINE_UNKNOWN : RETRY_DESCRIPTION}\n        position={Position.BOTTOM}\n      >\n        <ExecutionStartButton\n          title=\"Resume / Retry\"\n          icon={IconNames.REPEAT}\n          small={true}\n          disabled={isUnknown}\n          onClick={() => this.onReexecute(reexecuteMutation, undefined, true)}\n        />\n      </Tooltip>\n    );\n  }\n\n  render() {\n    const { client, run } = this.props;\n    const { logsFilter, highlightedError } = this.state;\n\n    const stepKeysToExecute: (string | null)[] | null = run\n      ? run.stepKeysToExecute\n      : null;\n\n    const isUnknown = run?.pipeline.__typename === \"UnknownPipeline\";\n    const executionPlan: RunFragment_executionPlan = run?.executionPlan || {\n      __typename: \"ExecutionPlan\",\n      steps: [],\n      artifactsPersisted: false\n    };\n\n    return (\n      <Mutation<StartPipelineExecution, StartPipelineExecutionVariables>\n        mutation={START_PIPELINE_EXECUTION_MUTATION}\n      >\n        {reexecuteMutation => (\n          <RunWrapper>\n            <RunContext.Provider value={run}>\n              {run && <RunStatusToPageAttributes run={run} />}\n              <LogsProvider\n                client={client}\n                runId={run ? run.runId : \"\"}\n                filter={logsFilter}\n              >\n                {({ filteredNodes, allNodes }) => (\n                  <SplitPanelChildren\n                    identifier=\"run\"\n                    leftInitialPercent={75}\n                    leftMinWidth={680}\n                    left={\n                      <LogsContainer>\n                        <LogsToolbar\n                          showSpinner={false}\n                          filter={logsFilter}\n                          onSetFilter={filter =>\n                            this.setState({ logsFilter: filter })\n                          }\n                        >\n                          <Tooltip\n                            hoverOpenDelay={300}\n                            position={Position.BOTTOM}\n                            content={\n                              isUnknown\n                                ? REEXECUTE_PIPELINE_UNKNOWN\n                                : REEXECUTE_DESCRIPTION\n                            }\n                          >\n                            <ExecutionStartButton\n                              title=\"Re-execute\"\n                              icon={IconNames.REPEAT}\n                              small={true}\n                              disabled={isUnknown}\n                              onClick={() =>\n                                this.onReexecute(reexecuteMutation)\n                              }\n                            />\n                          </Tooltip>\n                          {run && run.canCancel ? (\n                            <>\n                              <div style={{ minWidth: 6 }} />\n                              <CancelRunButton run={run} />\n                            </>\n                          ) : null}\n                          {this.renderRetry(reexecuteMutation)}\n                        </LogsToolbar>\n                        <LogsScrollingTable\n                          nodes={filteredNodes}\n                          filterKey={JSON.stringify(logsFilter)}\n                        />\n                      </LogsContainer>\n                    }\n                    right={\n                      <>\n                        <RunMetadataProvider logs={allNodes}>\n                          {metadata => (\n                            <ExecutionPlan\n                              run={run}\n                              runMetadata={metadata}\n                              executionPlan={executionPlan}\n                              stepKeysToExecute={stepKeysToExecute}\n                              onShowStateDetails={stepKey => {\n                                this.onShowStateDetails(stepKey, allNodes);\n                              }}\n                              onReexecuteStep={stepKey =>\n                                this.onReexecute(reexecuteMutation, stepKey)\n                              }\n                              onApplyStepFilter={stepKey =>\n                                this.setState({\n                                  logsFilter: {\n                                    ...this.state.logsFilter,\n                                    text: `step:${stepKey}`\n                                  }\n                                })\n                              }\n                            />\n                          )}\n                        </RunMetadataProvider>\n                        {highlightedError && (\n                          <InfoModal\n                            onRequestClose={() =>\n                              this.setState({ highlightedError: undefined })\n                            }\n                          >\n                            <PythonErrorInfo error={highlightedError} />\n                          </InfoModal>\n                        )}\n                      </>\n                    }\n                  />\n                )}\n              </LogsProvider>\n            </RunContext.Provider>\n          </RunWrapper>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nconst RunWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex: 1 1;\n  min-height: 0;\n`;\n\nconst LogsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: ${Colors.LIGHT_GRAY5};\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport * as querystring from \"query-string\";\nimport { ApolloClient } from \"apollo-client\";\nimport { DirectGraphQLSubscription } from \"../DirectGraphQLSubscription\";\nimport { Run } from \"./Run\";\nimport { RunPipelineRunEventFragment } from \"./types/RunPipelineRunEventFragment\";\nimport { PipelineRunStatus } from \"../types/globalTypes\";\nimport { PipelineRunLogsSubscriptionStatusFragment } from \"./types/PipelineRunLogsSubscriptionStatusFragment\";\nimport { PipelineRunLogsSubscription } from \"./types/PipelineRunLogsSubscription\";\n\nexport enum LogLevel {\n  DEBUG = \"DEBUG\",\n  INFO = \"INFO\",\n  WARNING = \"WARNING\",\n  ERROR = \"ERROR\",\n  CRITICAL = \"CRITICAL\",\n  EVENT = \"EVENT\" // structured events\n}\n\nexport const GetDefaultLogFilter = () => {\n  const { q } = querystring.parse(window.location.search);\n\n  return {\n    levels: Object.assign(\n      Object.keys(LogLevel).reduce(\n        (dict, key) => ({ ...dict, [key]: true }),\n        {}\n      ),\n      { [LogLevel.DEBUG]: false }\n    ),\n    text: typeof q === \"string\" ? q : \"\",\n    since: 0\n  };\n};\n\nexport interface ILogFilter {\n  text: string;\n  levels: { [key: string]: boolean };\n  since: number;\n}\n\ninterface ILogsFilterProviderProps {\n  client: ApolloClient<any>;\n  runId: string;\n  filter: ILogFilter;\n  children: (props: {\n    allNodes: (RunPipelineRunEventFragment & { clientsideKey: string })[];\n    filteredNodes: (RunPipelineRunEventFragment & { clientsideKey: string })[];\n  }) => React.ReactChild;\n}\n\ninterface ILogsFilterProviderState {\n  nodes: (RunPipelineRunEventFragment & { clientsideKey: string })[];\n}\n\nexport class LogsProvider extends React.Component<\n  ILogsFilterProviderProps,\n  ILogsFilterProviderState\n> {\n  state: ILogsFilterProviderState = {\n    nodes: []\n  };\n\n  _subscription: DirectGraphQLSubscription<PipelineRunLogsSubscription>;\n\n  componentDidMount() {\n    this.subscribeToRun();\n  }\n\n  componentDidUpdate(prevProps: ILogsFilterProviderProps) {\n    if (prevProps.runId !== this.props.runId) {\n      this.subscribeToRun();\n    }\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromRun();\n  }\n\n  subscribeToRun() {\n    const { runId } = this.props;\n\n    if (this._subscription) {\n      this.unsubscribeFromRun();\n      this.setState({ nodes: [] });\n    }\n\n    if (!runId) {\n      return;\n    }\n\n    this._subscription = new DirectGraphQLSubscription<\n      PipelineRunLogsSubscription\n    >(\n      PIPELINE_RUN_LOGS_SUBSCRIPTION,\n      { runId: runId, after: null },\n      this.onHandleMessages\n    );\n  }\n\n  unsubscribeFromRun() {\n    if (this._subscription) {\n      this._subscription.close();\n    }\n  }\n\n  onHandleMessages = (\n    messages: PipelineRunLogsSubscription[],\n    isFirstResponse: boolean\n  ) => {\n    // Note: if the socket says this is the first response, it may be becacuse the connection\n    // was dropped and re-opened, so we reset our local state to an empty array.\n    const nextNodes = isFirstResponse ? [] : [...this.state.nodes];\n\n    let nextPipelineStatus: PipelineRunStatus | null = null;\n    for (const msg of messages) {\n      if (\n        msg.pipelineRunLogs.__typename === \"PipelineRunLogsSubscriptionFailure\"\n      ) {\n        break;\n      }\n\n      // append the nodes to our local array and give each of them a unique key\n      // so we can change the row indexes they're displayed at and still track their\n      // sizes, etc.\n      nextNodes.push(\n        ...msg.pipelineRunLogs.messages.map((m, idx) =>\n          Object.assign(m, { clientsideKey: `csk${nextNodes.length + idx}` })\n        )\n      );\n\n      // look for changes to the pipeline's overall run status and sync that to apollo\n      for (const { __typename } of msg.pipelineRunLogs.messages) {\n        if (__typename === \"PipelineProcessStartEvent\") {\n          nextPipelineStatus = PipelineRunStatus.STARTED;\n        } else if (__typename === \"PipelineSuccessEvent\") {\n          nextPipelineStatus = PipelineRunStatus.SUCCESS;\n        } else if (\n          __typename === \"PipelineFailureEvent\" ||\n          __typename === \"PipelineInitFailureEvent\"\n        ) {\n          nextPipelineStatus = PipelineRunStatus.FAILURE;\n        }\n      }\n    }\n\n    if (nextPipelineStatus) {\n      this.syncPipelineStatusToApolloCache(nextPipelineStatus);\n    }\n    this.setState({ nodes: nextNodes });\n  };\n\n  syncPipelineStatusToApolloCache(status: PipelineRunStatus) {\n    const local = this.props.client.readFragment<\n      PipelineRunLogsSubscriptionStatusFragment\n    >({\n      fragmentName: \"PipelineRunLogsSubscriptionStatusFragment\",\n      fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n      id: `PipelineRun.${this.props.runId}`\n    });\n\n    if (local) {\n      local.status = status;\n      if (\n        status === PipelineRunStatus.FAILURE ||\n        status === PipelineRunStatus.SUCCESS\n      ) {\n        local.canCancel = false;\n      }\n      this.props.client.writeFragment({\n        fragmentName: \"PipelineRunLogsSubscriptionStatusFragment\",\n        fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n        id: `PipelineRun.${this.props.runId}`,\n        data: local\n      });\n    }\n  }\n\n  render() {\n    const { filter } = this.props;\n    const { nodes } = this.state;\n\n    const textLower = filter.text.toLowerCase();\n\n    // step: sum_solid\n    const textStep =\n      textLower.startsWith(\"step:\") && filter.text.substr(5).trim();\n\n    // type: materialization or type: step start\n    const textType =\n      textLower.startsWith(\"type:\") &&\n      textLower.substr(5).replace(/[ _-]/g, \"\");\n\n    const filteredNodes = nodes.filter(node => {\n      const l = node.__typename === \"LogMessageEvent\" ? node.level : \"EVENT\";\n      if (!filter.levels[l]) return false;\n      if (filter.since && Number(node.timestamp) < filter.since) return false;\n\n      if (textStep) {\n        return node.step && node.step.key === textStep;\n      } else if (textType) {\n        return node.__typename.toLowerCase().includes(textType);\n      } else if (textLower) {\n        return node.message.toLowerCase().includes(textLower);\n      }\n      return true;\n    });\n\n    return this.props.children({ allNodes: nodes, filteredNodes });\n  }\n}\n\nexport const PIPELINE_RUN_LOGS_SUBSCRIPTION = gql`\n  subscription PipelineRunLogsSubscription($runId: ID!, $after: Cursor) {\n    pipelineRunLogs(runId: $runId, after: $after) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunPipelineRunEventFragment\n        }\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ${Run.fragments.RunPipelineRunEventFragment}\n`;\n\nexport const PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT = gql`\n  fragment PipelineRunLogsSubscriptionStatusFragment on PipelineRun {\n    runId\n    status\n    canCancel\n  }\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { LogLevel } from \"./LogsProvider\";\nimport { ColumnWidthsContext } from \"./LogsScrollingTableHeader\";\nimport { formatStepKey } from \"../Util\";\n\nconst bgcolorForLevel = (level: LogLevel) =>\n  ({\n    [LogLevel.DEBUG]: `transparent`,\n    [LogLevel.INFO]: `transparent`,\n    [LogLevel.WARNING]: `rgba(166, 121, 8, 0.05)`,\n    [LogLevel.ERROR]: `rgba(206, 17, 38, 0.05)`,\n    [LogLevel.CRITICAL]: `rgba(206, 17, 38, 0.05)`\n  }[level]);\n\nexport const Row = styled.div<{ level: LogLevel }>`\n  font-size: 0.75em;\n  width: 100%;\n  height: 100%;\n  max-height: 17em;\n  padding: 4px 8px;\n  word-break: break-word;\n  white-space: pre-wrap;\n  font-family: monospace;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  overflow: hidden;\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY3};\n  background: ${props => bgcolorForLevel(props.level)};\n  color: ${props =>\n    ({\n      [LogLevel.DEBUG]: Colors.GRAY3,\n      [LogLevel.INFO]: Colors.DARK_GRAY2,\n      [LogLevel.WARNING]: Colors.GOLD2,\n      [LogLevel.ERROR]: Colors.RED3,\n      [LogLevel.CRITICAL]: Colors.RED3\n    }[props.level])};\n`;\n\nexport const StructuredContent = styled.div`\n  background: white;\n  color: ${Colors.DARK_GRAY2};\n  box-sizing: border-box;\n  margin: -4px;\n  margin-bottom: -4px;\n  border-left: 1px solid ${Colors.LIGHT_GRAY4};\n  border-right: 1px solid ${Colors.LIGHT_GRAY4};\n  padding: 4px;\n  word-break: break-word;\n  white-space: pre-wrap;\n  font-family: monospace;\n  flex: 1;\n  align-self: stretch;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n`;\n\n// Step Key Column\n//\n// Renders the left column with the step key broken into hierarchical components.\n// Manually implements middle text truncation since we can count on monospace font\n// rendering being fairly consistent.\n//\nexport const SolidColumn = (props: { stepKey: string | false | null }) => {\n  const widths = React.useContext(ColumnWidthsContext);\n  const parts = formatStepKey(props.stepKey).split(\".\");\n  return (\n    <SolidColumnContainer style={{ width: widths.solid }}>\n      {props.stepKey\n        ? parts.map((p, idx) => (\n            <div\n              key={idx}\n              style={{\n                paddingLeft: Math.max(0, idx * 15 - 9),\n                paddingRight: 15,\n                fontWeight: idx === parts.length - 1 ? 600 : 300\n              }}\n            >\n              {idx > 0 ? \"↳\" : \"\"}\n              {p.length > 30 - idx * 2\n                ? `${p.substr(0, 16 - idx * 2)}…${p.substr(p.length - 14)}`\n                : p}\n            </div>\n          ))\n        : \"-\"}\n    </SolidColumnContainer>\n  );\n};\n\nconst SolidColumnContainer = styled.div`\n  width: 250px;\n  flex-shrink: 0;\n`;\n\n// Timestamp Column\n\nexport const TimestampColumn = (props: { time: string | false }) => {\n  const widths = React.useContext(ColumnWidthsContext);\n  return (\n    <TimestampColumnContainer style={{ width: widths.timestamp }}>\n      {props.time &&\n        new Date(Number(props.time))\n          .toISOString()\n          .replace(\"Z\", \"\")\n          .split(\"T\")\n          .pop()}\n    </TimestampColumnContainer>\n  );\n};\n\nconst TimestampColumnContainer = styled.div`\n  flex-shrink: 0;\n  text-align: right;\n  color: ${Colors.GRAY3};\n`;\n\nexport const EventTypeColumn: React.FunctionComponent<{}> = props => {\n  const widths = React.useContext(ColumnWidthsContext);\n  return (\n    <EventTypeColumnContainer style={{ width: widths.eventType }}>\n      {props.children}\n    </EventTypeColumnContainer>\n  );\n};\n\nexport const EventTypeColumnContainer = styled.div`\n  flex-shrink: 0;\n  color: ${Colors.GRAY3};\n`;\n","import * as React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Link } from \"react-router-dom\";\nimport { Text, Code, Colors } from \"@blueprintjs/core\";\n\nimport { titleOfIO } from \"./Util\";\nimport { SectionHeader } from \"./SidebarComponents\";\nimport { SolidColumn } from \"./runs/LogsRowComponents\";\n\nexport type SolidLinkInfo = {\n  solid: { name: string };\n  definition: { name: string };\n};\n\nexport interface SidebarSolidInvocationInfo {\n  handleID: string;\n  pipelineName?: string;\n}\n\nexport type SolidMappingTable = {\n  [key: string]: SolidLinkInfo[];\n};\n\nexport const ShowAllButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${Colors.BLUE3};\n  text-decoration: underline;\n  padding-top: 10px;\n  font-size: 0.9rem;\n`;\n\nexport const TypeWrapper = styled.div`\n  margin-bottom: 10px;\n`;\n\nexport const SolidLink = (props: SolidLinkInfo) => (\n  <Link to={`./${props.solid.name}`}>\n    <Code\n      style={{\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n        maxWidth: \"100%\"\n      }}\n    >\n      {titleOfIO(props)}\n    </Code>\n  </Link>\n);\n\nexport const SolidLinks = (props: { title: string; items: SolidLinkInfo[] }) =>\n  props.items && props.items.length ? (\n    <Text>\n      {props.title}\n      {props.items.map((i, idx) => (\n        <SolidLink key={idx} {...i} />\n      ))}\n    </Text>\n  ) : null;\n\nexport const Invocation = (props: {\n  invocation: SidebarSolidInvocationInfo;\n  onClick: () => void;\n}) => {\n  const { handleID, pipelineName } = props.invocation;\n  const handlePath = handleID.split(\".\");\n  return (\n    <InvocationContainer onClick={props.onClick}>\n      {pipelineName && (\n        <div style={{ color: Colors.BLUE1 }}>{pipelineName}</div>\n      )}\n      <SolidColumn stepKey={handlePath.join(\".\")} />\n    </InvocationContainer>\n  );\n};\n\nexport const DependencyRow = ({\n  from,\n  to\n}: {\n  from: SolidLinkInfo | string;\n  to: SolidLinkInfo | string;\n}) => {\n  return (\n    <tr>\n      <td\n        style={{\n          whiteSpace: \"nowrap\",\n          maxWidth: 0,\n          width: \"45%\"\n        }}\n      >\n        {typeof from === \"string\" ? (\n          <DependencyLocalIOName>{from}</DependencyLocalIOName>\n        ) : (\n          <SolidLink {...from} />\n        )}\n      </td>\n      <td>\n        <img alt=\"arrow\" src={require(\"./images/icon-dependency-arrow.svg\")} />\n      </td>\n      <td\n        style={{\n          textOverflow: \"ellipsis\",\n          overflow: \"hidden\",\n          whiteSpace: \"nowrap\",\n          maxWidth: 0,\n          width: \"60%\"\n        }}\n      >\n        {typeof to === \"string\" ? (\n          <DependencyLocalIOName>{to}</DependencyLocalIOName>\n        ) : (\n          <SolidLink {...to} />\n        )}\n      </td>\n    </tr>\n  );\n};\n\ninterface DependencyHeaderRowProps {\n  label: string;\n  style?: React.CSSProperties;\n}\n\nexport const DependencyHeaderRow: React.FunctionComponent<DependencyHeaderRowProps> = ({\n  label,\n  ...rest\n}) => (\n  <tr>\n    <DependencyHeaderCell {...rest}>{label}</DependencyHeaderCell>\n  </tr>\n);\n\nexport const ResourceHeader = styled(SectionHeader)`\n  font-size: 13px;\n`;\n\nexport const ResourceContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding-top: 15px;\n  & .bp3-icon {\n    padding-top: 7px;\n    padding-right: 10px;\n  }\n  &:first-child {\n    padding-top: 0;\n  }\n`;\n\nexport const DependencyLocalIOName = styled.div`\n  font-family: monospace;\n  font-size: smaller;\n  font-weight: 500;\n  color: ${Colors.BLACK};\n`;\n\nexport const DependencyTable = styled.table`\n  width: 100%;\n`;\n\nexport const DependencyHeaderCell = styled.td`\n  font-size: 0.7rem;\n  color: ${Colors.GRAY3};\n`;\n\nexport const InvocationContainer = styled.div`\n  margin: 0 -10px;\n  padding: 10px;\n  pointer: default;\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY2};\n  &:last-child {\n    border-bottom: none;\n  }\n  &:hover {\n    background: ${Colors.LIGHT_GRAY5};\n  }\n  font-family: monospace;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport TypeWithTooltip from \"./TypeWithTooltip\";\nimport { SidebarSection, SidebarTitle } from \"./SidebarComponents\";\nimport { SidebarSolidInvocationFragment } from \"./types/SidebarSolidInvocationFragment\";\nimport {\n  DependencyTable,\n  DependencyRow,\n  DependencyHeaderRow\n} from \"./SidebarSolidHelpers\";\nimport { Button } from \"@blueprintjs/core\";\nimport { SolidNameOrPath } from \"./PipelineExplorer\";\nimport { breakOnUnderscores } from \"./Util\";\n\ninterface ISidebarSolidInvocationProps {\n  solid: SidebarSolidInvocationFragment;\n  onEnterCompositeSolid?: (arg: SolidNameOrPath) => void;\n}\n\nexport class SidebarSolidInvocation extends React.Component<\n  ISidebarSolidInvocationProps\n> {\n  static fragments = {\n    SidebarSolidInvocationFragment: gql`\n      fragment SidebarSolidInvocationFragment on Solid {\n        name\n        inputs {\n          definition {\n            name\n            description\n            type {\n              ...RuntimeTypeWithTooltipFragment\n            }\n          }\n          dependsOn {\n            definition {\n              name\n            }\n            solid {\n              name\n            }\n          }\n        }\n        outputs {\n          definition {\n            name\n            description\n            type {\n              ...RuntimeTypeWithTooltipFragment\n            }\n          }\n          dependedBy {\n            definition {\n              name\n            }\n            solid {\n              name\n            }\n          }\n        }\n      }\n\n      ${TypeWithTooltip.fragments.RuntimeTypeWithTooltipFragment}\n    `\n  };\n\n  state = {\n    showingAllInvocations: false\n  };\n\n  public render() {\n    const { solid, onEnterCompositeSolid } = this.props;\n\n    return (\n      <div>\n        <SidebarSection title={\"Invocation\"}>\n          <SidebarTitle>{breakOnUnderscores(solid.name)}</SidebarTitle>\n          <DependencyTable>\n            <tbody>\n              {solid.inputs.some(o => o.dependsOn.length) && (\n                <DependencyHeaderRow label=\"Inputs\" />\n              )}\n              {solid.inputs.map(({ definition, dependsOn }) =>\n                dependsOn.map((source, idx) => (\n                  <DependencyRow key={idx} from={source} to={definition.name} />\n                ))\n              )}\n              {solid.outputs.some(o => o.dependedBy.length) && (\n                <DependencyHeaderRow\n                  label=\"Outputs\"\n                  style={{ paddingTop: 15 }}\n                />\n              )}\n              {solid.outputs.map(({ definition, dependedBy }) =>\n                dependedBy.map((target, idx) => (\n                  <DependencyRow key={idx} from={definition.name} to={target} />\n                ))\n              )}\n            </tbody>\n          </DependencyTable>\n          {onEnterCompositeSolid && (\n            <Button\n              icon=\"zoom-in\"\n              text=\"Expand Composite\"\n              style={{ marginTop: 15 }}\n              onClick={() => onEnterCompositeSolid({ name: solid.name })}\n            />\n          )}\n        </SidebarSection>\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { Button, Classes, Dialog } from \"@blueprintjs/core\";\nimport { IPluginSidebarProps } from \".\";\nimport { ROOT_SERVER_URI } from \"../DomUtils\";\n\nexport class SidebarComponent extends React.Component<IPluginSidebarProps> {\n  state = {\n    open: false\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  onClick = () => {\n    this.setState({\n      open: true\n    });\n  };\n\n  render() {\n    const metadata = this.props.definition.metadata;\n    const notebookPath = metadata.find(m => m.key === \"notebook_path\");\n    if (!notebookPath) return <span />;\n\n    return (\n      <div>\n        <Button icon=\"duplicate\" onClick={this.onClick}>\n          View Notebook\n        </Button>\n        <Dialog\n          icon=\"info-sign\"\n          onClose={() =>\n            this.setState({\n              open: false\n            })\n          }\n          style={{ width: \"80vw\", maxWidth: 900, height: 615 }}\n          title={notebookPath.value.split(\"/\").pop()}\n          usePortal={true}\n          isOpen={this.state.open}\n        >\n          <div className={Classes.DIALOG_BODY} style={{ margin: 0 }}>\n            <iframe\n              title={notebookPath.value}\n              src={`${ROOT_SERVER_URI}/dagit/notebook?path=${encodeURIComponent(\n                notebookPath.value\n              )}`}\n              style={{ border: 0, background: \"white\" }}\n              seamless={true}\n              width=\"100%\"\n              height={500}\n            />\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button onClick={() => this.setState({ open: false })}>\n                Close\n              </Button>\n            </div>\n          </div>\n        </Dialog>\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { configure, highlightBlock } from \"highlight.js\";\n\nimport \"highlight.js/styles/xcode.css\";\n\nexport class HighlightedCodeBlock extends React.Component<{\n  value: string;\n  languages: string[];\n  style?: React.CSSProperties;\n}> {\n  _el = React.createRef<HTMLPreElement>();\n\n  componentDidMount() {\n    if (this._el.current) {\n      configure({ languages: this.props.languages });\n      highlightBlock(this._el.current);\n    }\n  }\n\n  render() {\n    const { value, ...rest } = this.props;\n    return (\n      <pre ref={this._el} {...rest}>\n        {value}\n      </pre>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { Button, Classes, Dialog } from \"@blueprintjs/core\";\nimport { IPluginSidebarProps } from \".\";\nimport { HighlightedCodeBlock } from \"../HighlightedCodeBlock\";\n\nexport class SidebarComponent extends React.Component<IPluginSidebarProps> {\n  state = {\n    open: false\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  onClick = () => {\n    this.setState({\n      open: true\n    });\n  };\n\n  render() {\n    const metadata = this.props.definition.metadata;\n    const sql = metadata.find(m => m.key === \"sql\");\n    if (!sql) return <span />;\n\n    return (\n      <div>\n        <Button icon=\"duplicate\" onClick={this.onClick}>\n          View SQL\n        </Button>\n        <Dialog\n          icon=\"info-sign\"\n          onClose={() =>\n            this.setState({\n              open: false\n            })\n          }\n          style={{ width: \"80vw\", maxWidth: 900, height: 615 }}\n          title={`SQL: ${this.props.definition.name}`}\n          usePortal={true}\n          isOpen={this.state.open}\n        >\n          <div className={Classes.DIALOG_BODY} style={{ margin: 0 }}>\n            <HighlightedCodeBlock\n              languages={[\"sql\"]}\n              value={sql.value}\n              style={{\n                height: 510,\n                margin: 0,\n                overflow: \"scroll\",\n                fontSize: \"0.9em\"\n              }}\n            />\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button onClick={() => this.setState({ open: false })}>\n                Close\n              </Button>\n            </div>\n          </div>\n        </Dialog>\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { startCase } from \"lodash\";\nimport { Button, Classes, Dialog } from \"@blueprintjs/core\";\nimport { IPluginSidebarProps } from \".\";\n\nexport class SidebarComponent extends React.Component<IPluginSidebarProps> {\n  state = {\n    open: false\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"show-kind-info\", this.onClick);\n  }\n\n  onClick = () => {\n    this.setState({\n      open: true\n    });\n  };\n\n  render() {\n    const metadata = this.props.definition.metadata.sort((a, b) =>\n      a.key.localeCompare(b.key)\n    );\n\n    if (metadata.length === 0) {\n      return <span />;\n    }\n\n    return (\n      <div>\n        <Button icon=\"duplicate\" onClick={this.onClick}>\n          View Metadata\n        </Button>\n        <Dialog\n          title={`Metadata: ${this.props.definition.name}`}\n          isOpen={this.state.open}\n          onClose={() =>\n            this.setState({\n              open: false\n            })\n          }\n        >\n          <div\n            className={Classes.DIALOG_BODY}\n            style={{\n              maxHeight: 400,\n              overflow: \"scroll\"\n            }}\n          >\n            <table\n              className=\"bp3-html-table bp3-html-table-striped\"\n              style={{ width: \"100%\" }}\n            >\n              <thead>\n                <tr>\n                  <th>Key</th>\n                  <th>Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                {metadata.map(({ key, value }) => (\n                  <tr key={key}>\n                    <td>{startCase(key)}</td>\n                    <td>\n                      <code style={{ whiteSpace: \"pre-wrap\" }}>{value}</code>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button onClick={() => this.setState({ open: false })}>\n                Close\n              </Button>\n            </div>\n          </div>\n        </Dialog>\n      </div>\n    );\n  }\n}\n","import { SidebarSolidDefinitionFragment } from \"../types/SidebarSolidDefinitionFragment\";\n\nimport * as ipynb from \"./ipynb\";\nimport * as sql from \"./sql\";\nimport * as generic from \"./generic\";\n\nconst plugins = {\n  sql: sql,\n  ipynb: ipynb,\n  snowflake: sql\n};\n\nexport interface IPluginSidebarProps {\n  definition: SidebarSolidDefinitionFragment;\n}\n\nexport interface IPluginInterface {\n  SidebarComponent:\n    | React.ComponentClass<IPluginSidebarProps>\n    | React.SFC<IPluginSidebarProps>;\n}\n\nexport function pluginForMetadata(\n  metadata: { key: string; value: string }[]\n): IPluginInterface | null {\n  const kindMetadata = metadata.find(m => m.key === \"kind\");\n  if (!kindMetadata) return null;\n  return plugins[kindMetadata.value] || generic;\n}\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Code, Colors } from \"@blueprintjs/core\";\nimport TypeWithTooltip from \"./TypeWithTooltip\";\nimport { SolidTypeSignatureFragment } from \"./types/SolidTypeSignatureFragment\";\nimport { breakOnUnderscores } from \"./Util\";\n\ninterface ISolidTypeSignature {\n  definition: SolidTypeSignatureFragment;\n}\n\nexport default class SolidTypeSignature extends React.Component<\n  ISolidTypeSignature\n> {\n  static fragments = {\n    SolidTypeSignatureFragment: gql`\n      fragment SolidTypeSignatureFragment on ISolidDefinition {\n        outputDefinitions {\n          name\n          type {\n            ...RuntimeTypeWithTooltipFragment\n          }\n        }\n        inputDefinitions {\n          name\n          type {\n            ...RuntimeTypeWithTooltipFragment\n          }\n        }\n      }\n\n      ${TypeWithTooltip.fragments.RuntimeTypeWithTooltipFragment}\n    `\n  };\n\n  render() {\n    const { inputDefinitions, outputDefinitions } = this.props.definition;\n\n    const inputSide = inputDefinitions.map((input, i) => (\n      <span key={i}>\n        {breakOnUnderscores(input.name)}: <TypeWithTooltip type={input.type} />\n        {i < inputDefinitions.length - 1 ? \", \" : \"\"}\n      </span>\n    ));\n    const outputSide = outputDefinitions.map((output, i) => (\n      <span key={i}>\n        {breakOnUnderscores(output.name)}:{\" \"}\n        <TypeWithTooltip type={output.type} />\n        {i < outputDefinitions.length - 1 ? \", \" : \"\"}\n      </span>\n    ));\n    return (\n      <TypeSignature>\n        ({inputSide}) ⇒ ({outputSide})\n      </TypeSignature>\n    );\n  }\n}\n\nconst TypeSignature = styled(Code)`\n  && {\n    background: ${Colors.LIGHT_GRAY5};\n    font-size: 12px;\n    padding: 4px 10px;\n    box-shadow: none;\n    color: black;\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport { Icon, Colors } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { pluginForMetadata } from \"./plugins\";\nimport SolidTypeSignature from \"./SolidTypeSignature\";\nimport TypeWithTooltip from \"./TypeWithTooltip\";\nimport {\n  SidebarSection,\n  SidebarTitle,\n  SidebarSubhead,\n  SectionSmallHeader,\n  SectionItemContainer\n} from \"./SidebarComponents\";\nimport Description from \"./Description\";\nimport { ConfigTypeSchema } from \"./ConfigTypeSchema\";\nimport { SidebarSolidDefinitionFragment } from \"./types/SidebarSolidDefinitionFragment\";\nimport {\n  SolidMappingTable,\n  ResourceContainer,\n  ResourceHeader,\n  TypeWrapper,\n  SolidLinks,\n  Invocation,\n  ShowAllButton,\n  SidebarSolidInvocationInfo\n} from \"./SidebarSolidHelpers\";\nimport { breakOnUnderscores } from \"./Util\";\n\ninterface SidebarSolidDefinitionProps {\n  definition: SidebarSolidDefinitionFragment;\n  getInvocations?: (definitionName: string) => { handleID: string }[];\n  showingSubsolids: boolean;\n  onClickInvocation: (arg: SidebarSolidInvocationInfo) => void;\n}\n\nconst DEFAULT_INVOCATIONS_SHOWN = 20;\n\nexport class SidebarSolidDefinition extends React.Component<\n  SidebarSolidDefinitionProps,\n  { showingAllInvocations: boolean }\n> {\n  static fragments = {\n    SidebarSolidDefinitionFragment: gql`\n      fragment SidebarSolidDefinitionFragment on ISolidDefinition {\n        ...SolidTypeSignatureFragment\n        __typename\n        name\n        description\n        metadata {\n          key\n          value\n        }\n        requiredResources {\n          resourceKey\n        }\n        outputDefinitions {\n          name\n          description\n          type {\n            ...RuntimeTypeWithTooltipFragment\n          }\n        }\n        inputDefinitions {\n          name\n          description\n          type {\n            ...RuntimeTypeWithTooltipFragment\n          }\n        }\n        ... on SolidDefinition {\n          configField {\n            configType {\n              ...ConfigTypeSchemaFragment\n              recursiveConfigTypes {\n                ...ConfigTypeSchemaFragment\n              }\n            }\n          }\n        }\n        ... on CompositeSolidDefinition {\n          inputMappings {\n            definition {\n              name\n            }\n            mappedInput {\n              definition {\n                name\n              }\n              solid {\n                name\n              }\n            }\n          }\n          outputMappings {\n            definition {\n              name\n            }\n            mappedOutput {\n              definition {\n                name\n              }\n              solid {\n                name\n              }\n            }\n          }\n        }\n      }\n\n      ${TypeWithTooltip.fragments.RuntimeTypeWithTooltipFragment}\n      ${SolidTypeSignature.fragments.SolidTypeSignatureFragment}\n      ${ConfigTypeSchema.fragments.ConfigTypeSchemaFragment}\n    `\n  };\n\n  public render() {\n    const {\n      definition,\n      getInvocations,\n      showingSubsolids,\n      onClickInvocation\n    } = this.props;\n    const Plugin = pluginForMetadata(definition.metadata);\n    const isComposite = definition.__typename === \"CompositeSolidDefinition\";\n    const configField =\n      definition.__typename === \"SolidDefinition\"\n        ? definition.configField\n        : null;\n\n    const inputMappings: SolidMappingTable = {};\n    const outputMappings: SolidMappingTable = {};\n\n    if (\n      showingSubsolids &&\n      definition.__typename === \"CompositeSolidDefinition\"\n    ) {\n      definition.inputMappings.forEach(\n        m =>\n          (inputMappings[m.definition.name] = [\n            ...(inputMappings[m.definition.name] || []),\n            m.mappedInput\n          ])\n      );\n      definition.outputMappings.forEach(\n        m =>\n          (outputMappings[m.definition.name] = [\n            ...(outputMappings[m.definition.name] || []),\n            m.mappedOutput\n          ])\n      );\n    }\n\n    const hasRequiredResources = !!(\n      definition.requiredResources && definition.requiredResources.length\n    );\n\n    return (\n      <div>\n        <SidebarSection title={\"Definition\"}>\n          <SidebarSubhead>\n            {isComposite ? \"Composite Solid\" : \"Solid\"}\n          </SidebarSubhead>\n          <SidebarTitle>{breakOnUnderscores(definition.name)}</SidebarTitle>\n          <SolidTypeSignature definition={definition} />\n        </SidebarSection>\n        {definition.description && (\n          <SidebarSection title={\"Description\"}>\n            <Description description={definition.description} />\n          </SidebarSection>\n        )}\n        {definition.metadata && Plugin && Plugin.SidebarComponent && (\n          <SidebarSection title={\"Metadata\"}>\n            <Plugin.SidebarComponent definition={definition} />\n          </SidebarSection>\n        )}\n        {configField && (\n          <SidebarSection title={\"Config\"}>\n            <ConfigTypeSchema\n              type={configField.configType}\n              typesInScope={configField.configType.recursiveConfigTypes}\n            />\n          </SidebarSection>\n        )}\n        {hasRequiredResources && (\n          <SidebarSection title={\"Required Resources\"}>\n            {definition.requiredResources.sort().map(requirement => (\n              <ResourceContainer key={requirement.resourceKey}>\n                <Icon\n                  iconSize={14}\n                  icon={IconNames.LAYERS}\n                  color={Colors.DARK_GRAY2}\n                />\n                <ResourceHeader>{requirement.resourceKey}</ResourceHeader>\n              </ResourceContainer>\n            ))}\n          </SidebarSection>\n        )}\n        <SidebarSection title={\"Inputs\"}>\n          {definition.inputDefinitions.map((inputDef, idx) => (\n            <SectionItemContainer key={idx}>\n              <SectionSmallHeader>\n                {breakOnUnderscores(inputDef.name)}\n              </SectionSmallHeader>\n              <TypeWrapper>\n                <TypeWithTooltip type={inputDef.type} />\n              </TypeWrapper>\n              <Description description={inputDef.description} />\n              <SolidLinks\n                title=\"Mapped to:\"\n                items={inputMappings[inputDef.name]}\n              />\n            </SectionItemContainer>\n          ))}\n        </SidebarSection>\n        <SidebarSection title={\"Outputs\"}>\n          {definition.outputDefinitions.map((outputDef, idx) => (\n            <SectionItemContainer key={idx}>\n              <SectionSmallHeader>\n                {breakOnUnderscores(outputDef.name)}\n              </SectionSmallHeader>\n              <TypeWrapper>\n                <TypeWithTooltip type={outputDef.type} />\n              </TypeWrapper>\n              <SolidLinks\n                title=\"Mapped from:\"\n                items={outputMappings[outputDef.name]}\n              />\n              <Description description={outputDef.description} />\n            </SectionItemContainer>\n          ))}\n        </SidebarSection>\n        {getInvocations && (\n          <SidebarSection title={\"All Invocations\"}>\n            <InvocationList\n              invocations={getInvocations(definition.name)}\n              onClickInvocation={onClickInvocation}\n            />\n          </SidebarSection>\n        )}\n      </div>\n    );\n  }\n}\n\nconst InvocationList: React.FunctionComponent<{\n  invocations: SidebarSolidInvocationInfo[];\n  onClickInvocation: (arg: SidebarSolidInvocationInfo) => void;\n}> = ({ invocations, onClickInvocation }) => {\n  const [showAll, setShowAll] = React.useState<boolean>(false);\n  const displayed = showAll\n    ? invocations\n    : invocations.slice(0, DEFAULT_INVOCATIONS_SHOWN);\n\n  return (\n    <>\n      {displayed.map((invocation, idx) => (\n        <Invocation\n          key={idx}\n          invocation={invocation}\n          onClick={() => onClickInvocation(invocation)}\n        />\n      ))}\n      {displayed.length < invocations.length && (\n        <ShowAllButton onClick={() => setShowAll(true)}>\n          {`Show ${invocations.length - displayed.length} More Invocations`}\n        </ShowAllButton>\n      )}\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { SidebarSolidInvocation } from \"./SidebarSolidInvocation\";\nimport { SidebarSolidDefinition } from \"./SidebarSolidDefinition\";\nimport { SidebarTabbedContainerSolidQuery } from \"./types/SidebarTabbedContainerSolidQuery\";\nimport { SolidNameOrPath } from \"./PipelineExplorer\";\nimport { useQuery } from \"react-apollo\";\nimport Loading from \"./Loading\";\nimport gql from \"graphql-tag\";\n\ninterface SidebarSolidContainerProps {\n  handleID: string;\n  pipelineName: string;\n  showingSubsolids: boolean;\n  parentSolidHandleID?: string;\n  getInvocations?: (definitionName: string) => { handleID: string }[];\n  onEnterCompositeSolid: (arg: SolidNameOrPath) => void;\n  onClickSolid: (arg: SolidNameOrPath) => void;\n}\n\nexport const SidebarSolidContainer: React.FunctionComponent<SidebarSolidContainerProps> = ({\n  handleID,\n  pipelineName,\n  getInvocations,\n  showingSubsolids,\n  onEnterCompositeSolid,\n  onClickSolid\n}) => {\n  const queryResult = useQuery<SidebarTabbedContainerSolidQuery>(\n    SIDEBAR_TABBED_CONTAINER_SOLID_QUERY,\n    {\n      variables: { pipeline: pipelineName, handleID: handleID },\n      fetchPolicy: \"cache-and-network\"\n    }\n  );\n\n  return (\n    <Loading queryResult={queryResult}>\n      {({ pipeline }) =>\n        pipeline ? (\n          <>\n            <SidebarSolidInvocation\n              key={`${handleID}-inv`}\n              solid={pipeline!.solidHandle!.solid}\n              onEnterCompositeSolid={\n                pipeline!.solidHandle!.solid.definition.__typename ===\n                \"CompositeSolidDefinition\"\n                  ? onEnterCompositeSolid\n                  : undefined\n              }\n            />\n            <SidebarSolidDefinition\n              key={`${handleID}-def`}\n              showingSubsolids={showingSubsolids}\n              definition={pipeline!.solidHandle!.solid.definition}\n              getInvocations={getInvocations}\n              onClickInvocation={({ handleID }) =>\n                onClickSolid({ path: handleID.split(\".\") })\n              }\n            />\n          </>\n        ) : (\n          <span />\n        )\n      }\n    </Loading>\n  );\n};\n\nexport const SIDEBAR_TABBED_CONTAINER_SOLID_QUERY = gql`\n  query SidebarTabbedContainerSolidQuery(\n    $pipeline: String!\n    $handleID: String!\n  ) {\n    pipeline(params: { name: $pipeline }) {\n      solidHandle(handleID: $handleID) {\n        solid {\n          ...SidebarSolidInvocationFragment\n\n          definition {\n            __typename\n            ...SidebarSolidDefinitionFragment\n          }\n        }\n      }\n    }\n  }\n  ${SidebarSolidInvocation.fragments.SidebarSolidInvocationFragment}\n  ${SidebarSolidDefinition.fragments.SidebarSolidDefinitionFragment}\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors, Icon } from \"@blueprintjs/core\";\nimport {\n  SidebarTitle,\n  SidebarSubhead,\n  SectionInner,\n  SidebarSection,\n  SectionItemContainer,\n  SectionHeader\n} from \"./SidebarComponents\";\nimport Description from \"./Description\";\nimport { ConfigTypeSchema } from \"./ConfigTypeSchema\";\nimport { SidebarPipelineInfoFragment } from \"./types/SidebarPipelineInfoFragment\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { breakOnUnderscores } from \"./Util\";\n\nconst NO_DESCRIPTION = \"\";\n\ninterface ISidebarPipelineInfoProps {\n  pipeline: SidebarPipelineInfoFragment;\n}\n\nexport default class SidebarPipelineInfo extends React.Component<\n  ISidebarPipelineInfoProps\n> {\n  static fragments = {\n    SidebarPipelineInfoFragment: gql`\n      fragment SidebarPipelineInfoFragment on Pipeline {\n        name\n        description\n        modes {\n          name\n          description\n          resources {\n            name\n            description\n            configField {\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n          loggers {\n            name\n            description\n            configField {\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n\n      ${ConfigTypeSchema.fragments.ConfigTypeSchemaFragment}\n    `\n  };\n\n  render() {\n    const { pipeline } = this.props;\n\n    return (\n      <div>\n        <SectionInner>\n          <SidebarSubhead>Pipeline</SidebarSubhead>\n          <SidebarTitle>{breakOnUnderscores(pipeline.name)}</SidebarTitle>\n        </SectionInner>\n        <SidebarSection title={\"Description\"}>\n          <Description\n            description={pipeline ? pipeline.description : NO_DESCRIPTION}\n          />\n        </SidebarSection>\n        <SidebarSection title={\"Modes\"} collapsedByDefault={true}>\n          {pipeline.modes.map(mode => (\n            <SectionItemContainer key={mode.name}>\n              <SectionHeader>{mode.name}</SectionHeader>\n              <Description description={mode.description || NO_DESCRIPTION} />\n              {mode.resources.map(resource => (\n                <ContextResourceContainer key={resource.name}>\n                  <Icon\n                    iconSize={14}\n                    icon={IconNames.LAYERS}\n                    color={Colors.DARK_GRAY2}\n                  />\n                  <div>\n                    <ContextResourceHeader>\n                      {resource.name}\n                    </ContextResourceHeader>\n                    <Description\n                      description={resource.description || NO_DESCRIPTION}\n                    />\n                    {resource.configField && (\n                      <ConfigTypeSchema\n                        type={resource.configField.configType}\n                        typesInScope={\n                          resource.configField.configType.recursiveConfigTypes\n                        }\n                      />\n                    )}\n                  </div>\n                </ContextResourceContainer>\n              ))}\n              {mode.loggers.map(logger => (\n                <ContextLoggerContainer key={logger.name}>\n                  <Icon\n                    iconSize={14}\n                    icon={IconNames.LAYERS}\n                    color={Colors.DARK_GRAY2}\n                  />\n                  <div>\n                    <ContextLoggerHeader>{logger.name}</ContextLoggerHeader>\n                    <Description\n                      description={logger.description || NO_DESCRIPTION}\n                    />\n                    {logger.configField && (\n                      <ConfigTypeSchema\n                        type={logger.configField.configType}\n                        typesInScope={\n                          logger.configField.configType.recursiveConfigTypes\n                        }\n                      />\n                    )}\n                  </div>\n                </ContextLoggerContainer>\n              ))}\n            </SectionItemContainer>\n          ))}\n        </SidebarSection>\n      </div>\n    );\n  }\n}\n\nconst ContextResourceHeader = styled(SectionHeader)`\n  font-size: 13px;\n`;\n\nconst ContextResourceContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding-top: 15px;\n  & .bp3-icon {\n    padding-top: 7px;\n    padding-right: 10px;\n  }\n`;\n\nconst ContextLoggerHeader = styled(SectionHeader)`\n  font-size: 13px;\n`;\n\nconst ContextLoggerContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding-top: 15px;\n  & .bp3-icon {\n    padding-top: 7px;\n    padding-right: 10px;\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Icon, IconName, Colors } from \"@blueprintjs/core\";\nimport { Link } from \"react-router-dom\";\nimport { TypeExplorerContainer } from \"./typeexplorer/TypeExplorerContainer\";\nimport { TypeListContainer } from \"./typeexplorer/TypeListContainer\";\nimport { SidebarTabbedContainerPipelineFragment } from \"./types/SidebarTabbedContainerPipelineFragment\";\nimport { SidebarSolidContainer } from \"./SidebarSolidContainer\";\nimport SidebarPipelineInfo from \"./SidebarPipelineInfo\";\nimport { SolidNameOrPath } from \"./PipelineExplorer\";\n\ninterface ISidebarTabbedContainerProps {\n  types?: string;\n  typeExplorer?: string;\n  pipeline: SidebarTabbedContainerPipelineFragment;\n  solidHandleID?: string;\n  parentSolidHandleID?: string;\n  getInvocations?: (definitionName: string) => { handleID: string }[];\n  onEnterCompositeSolid: (arg: SolidNameOrPath) => void;\n  onClickSolid: (arg: SolidNameOrPath) => void;\n}\n\ninterface ITabInfo {\n  name: string;\n  icon: IconName;\n  key: string;\n  link: string;\n}\n\nconst TabInfo: Array<ITabInfo> = [\n  {\n    name: \"Info\",\n    icon: \"diagram-tree\",\n    key: \"info\",\n    link: \"?\"\n  },\n  {\n    name: \"Types\",\n    icon: \"manual\",\n    key: \"types\",\n    link: \"?types=true\"\n  }\n];\n\nexport default class SidebarTabbedContainer extends React.Component<\n  ISidebarTabbedContainerProps\n> {\n  static fragments = {\n    SidebarTabbedContainerPipelineFragment: gql`\n      fragment SidebarTabbedContainerPipelineFragment on Pipeline {\n        name\n        ...SidebarPipelineInfoFragment\n      }\n\n      ${SidebarPipelineInfo.fragments.SidebarPipelineInfoFragment}\n    `\n  };\n\n  render() {\n    const {\n      typeExplorer,\n      types,\n      pipeline,\n      solidHandleID,\n      getInvocations,\n      parentSolidHandleID,\n      onEnterCompositeSolid,\n      onClickSolid\n    } = this.props;\n\n    let content = <div />;\n    let activeTab = \"info\";\n\n    if (typeExplorer) {\n      activeTab = \"types\";\n      content = (\n        <TypeExplorerContainer\n          pipelineName={pipeline.name}\n          typeName={typeExplorer}\n        />\n      );\n    } else if (types) {\n      activeTab = \"types\";\n      content = <TypeListContainer pipelineName={pipeline.name} />;\n    } else if (solidHandleID) {\n      content = (\n        <SidebarSolidContainer\n          key={solidHandleID}\n          pipelineName={pipeline.name}\n          handleID={solidHandleID}\n          showingSubsolids={false}\n          getInvocations={getInvocations}\n          onEnterCompositeSolid={onEnterCompositeSolid}\n          onClickSolid={onClickSolid}\n        />\n      );\n    } else if (parentSolidHandleID) {\n      content = (\n        <SidebarSolidContainer\n          key={parentSolidHandleID}\n          pipelineName={pipeline.name}\n          handleID={parentSolidHandleID}\n          showingSubsolids={true}\n          getInvocations={getInvocations}\n          onEnterCompositeSolid={onEnterCompositeSolid}\n          onClickSolid={onClickSolid}\n        />\n      );\n    } else {\n      content = <SidebarPipelineInfo pipeline={pipeline} key={pipeline.name} />;\n    }\n\n    return (\n      <>\n        <Tabs>\n          {TabInfo.map(({ name, icon, key, link }) => (\n            <Link to={link} key={key}>\n              <Tab key={key} active={key === activeTab}>\n                <Icon icon={icon} style={{ marginRight: 5 }} />\n                {name}\n              </Tab>\n            </Link>\n          ))}\n        </Tabs>\n        {content}\n      </>\n    );\n  }\n}\n\nconst Tabs = styled.div`\n  width: 100%;\n  display: flex;\n  margin-top: 10px;\n  align-items: center;\n  justify-content: center;\n  border-bottom: 1px solid #ccc;\n`;\n\nconst Tab = styled.div<{ active: boolean }>`\n  color: ${p => (p.active ? Colors.COBALT3 : Colors.GRAY2)}\n  border-top: 3px solid transparent;\n  border-bottom: 3px solid ${p => (p.active ? Colors.COBALT3 : \"transparent\")};\n  text-decoration: none;\n  white-space: nowrap;\n  min-width: 40px;\n  padding: 0 10px;\n  display: flex;\n  height: 36px;\n  align-items: center;\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\nimport Color from \"color\";\nimport styled from \"styled-components/macro\";\nimport { History } from \"history\";\nimport { Icon, Colors, InputGroup } from \"@blueprintjs/core\";\nimport { Route } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport * as querystring from \"query-string\";\n\nimport { PipelineExplorerFragment } from \"./types/PipelineExplorerFragment\";\nimport { PipelineGraphContainer } from \"./graph/PipelineGraphContainer\";\nimport PipelineGraph from \"./graph/PipelineGraph\";\nimport { SplitPanelChildren } from \"./SplitPanelChildren\";\nimport SidebarTabbedContainer from \"./SidebarTabbedContainer\";\nimport { PipelineExplorerSolidHandleFragment } from \"./types/PipelineExplorerSolidHandleFragment\";\nimport { PipelineExplorerParentSolidHandleFragment } from \"./types/PipelineExplorerParentSolidHandleFragment\";\nimport { SolidJumpBar, PipelineJumpBar } from \"./PipelineJumpComponents\";\nimport { SolidQueryInput } from \"./SolidQueryInput\";\nimport { filterSolidsByQuery } from \"./SolidQueryImpl\";\n\ninterface PipelineExplorerProps {\n  history: History;\n  path: string[];\n  visibleSolidsQuery: string;\n  pipeline: PipelineExplorerFragment;\n  handles: PipelineExplorerSolidHandleFragment[];\n  selectedHandle?: PipelineExplorerSolidHandleFragment;\n  parentHandle?: PipelineExplorerParentSolidHandleFragment;\n  getInvocations?: (definitionName: string) => { handleID: string }[];\n}\n\ninterface PipelineExplorerState {\n  highlighted: string;\n}\n\nexport type SolidNameOrPath = { name: string } | { path: string[] };\n\nexport default class PipelineExplorer extends React.Component<\n  PipelineExplorerProps,\n  PipelineExplorerState\n> {\n  static fragments = {\n    PipelineExplorerFragment: gql`\n      fragment PipelineExplorerFragment on Pipeline {\n        name\n        description\n        ...SidebarTabbedContainerPipelineFragment\n      }\n      ${SidebarTabbedContainer.fragments.SidebarTabbedContainerPipelineFragment}\n    `,\n    PipelineExplorerSolidHandleFragment: gql`\n      fragment PipelineExplorerSolidHandleFragment on SolidHandle {\n        handleID\n        solid {\n          name\n          ...PipelineGraphSolidFragment\n        }\n      }\n      ${PipelineGraph.fragments.PipelineGraphSolidFragment}\n    `,\n    PipelineExplorerParentSolidHandleFragment: gql`\n      fragment PipelineExplorerParentSolidHandleFragment on SolidHandle {\n        handleID\n        solid {\n          name\n          ...PipelineGraphParentSolidFragment\n          ...SolidQueryInputSolidFragment\n        }\n      }\n      ${PipelineGraph.fragments.PipelineGraphParentSolidFragment}\n      ${SolidQueryInput.fragments.SolidQueryInputSolidFragment}\n    `\n  };\n\n  pathOverlayEl = React.createRef<HTMLDivElement>();\n\n  state = {\n    highlighted: \"\"\n  };\n\n  handleQueryChange = (query: string) => {\n    const { history, pipeline, path } = this.props;\n    history.replace(`/pipeline/${pipeline.name}:${query}/${path.join(\"/\")}`);\n  };\n\n  handleAdjustPath = (fn: (solidNames: string[]) => void) => {\n    const { history, pipeline, path, visibleSolidsQuery } = this.props;\n    const next = [...path];\n    const retValue = fn(next);\n    if (retValue !== undefined) {\n      throw new Error(\n        \"handleAdjustPath function is expected to mutate the array\"\n      );\n    }\n    history.push(\n      `/pipeline/${pipeline.name}:${visibleSolidsQuery}/${next.join(\"/\")}`\n    );\n  };\n\n  // Note: this method handles relative solid paths, eg: {path: ['..', 'OtherSolid']}.\n  // This is important because the DAG component tree doesn't always have access to a handleID,\n  // and we sometimes want to be able to jump to a solid in the parent layer.\n  //\n  handleClickSolid = (arg: SolidNameOrPath) => {\n    this.handleAdjustPath(solidNames => {\n      if (\"name\" in arg) {\n        solidNames[solidNames.length - 1] = arg.name;\n      } else {\n        if (arg.path[0] !== \"..\") {\n          solidNames.length = 0;\n        }\n        if (arg.path[0] === \"..\" && solidNames[solidNames.length - 1] !== \"\") {\n          solidNames.pop(); // remove the last path component indicating selection\n        }\n        while (arg.path[0] === \"..\") {\n          arg.path.shift();\n          solidNames.pop();\n        }\n        solidNames.push(...arg.path);\n      }\n    });\n  };\n\n  handleEnterCompositeSolid = (arg: SolidNameOrPath) => {\n    // To animate the rect of the composite solid expanding correctly, we need\n    // to select it before entering it so we can draw the \"initial state\" of the\n    // labeled rectangle.\n    this.handleClickSolid(arg);\n\n    window.requestAnimationFrame(() => {\n      this.handleAdjustPath(solidNames => {\n        const last = \"name\" in arg ? arg.name : arg.path[arg.path.length - 1];\n        solidNames[solidNames.length - 1] = last;\n        solidNames.push(\"\");\n      });\n    });\n  };\n\n  handleLeaveCompositeSolid = () => {\n    this.handleAdjustPath(solidNames => {\n      solidNames.pop();\n    });\n  };\n\n  handleClickBackground = () => {\n    this.handleClickSolid({ name: \"\" });\n  };\n\n  public render() {\n    const {\n      path,\n      history,\n      pipeline,\n      parentHandle,\n      visibleSolidsQuery\n    } = this.props;\n    const { highlighted } = this.state;\n\n    const solids = this.props.handles.map(h => h.solid);\n    const solidsQueryEnabled = !parentHandle;\n    const queryResultSolids = solidsQueryEnabled\n      ? filterSolidsByQuery(solids, visibleSolidsQuery)\n      : { all: solids, focus: [] };\n\n    const highlightedSolids = queryResultSolids.all.filter(s =>\n      s.name.includes(highlighted)\n    );\n\n    let selectedHandle = this.props.selectedHandle;\n    if (\n      selectedHandle &&\n      !queryResultSolids.all.some(s => s.name === selectedHandle!.solid.name)\n    ) {\n      selectedHandle = undefined;\n    }\n\n    const backgroundColor = parentHandle\n      ? Colors.LIGHT_GRAY3\n      : Colors.LIGHT_GRAY5;\n\n    const backgroundTranslucent = Color(backgroundColor)\n      .fade(0.6)\n      .toString();\n\n    return (\n      <PipelinesContainer>\n        <SplitPanelChildren\n          identifier=\"explorer\"\n          leftInitialPercent={70}\n          left={\n            <>\n              <PathOverlay\n                style={{ background: backgroundTranslucent }}\n                ref={this.pathOverlayEl}\n              >\n                <PipelineJumpBar\n                  selectedPipelineName={pipeline.name}\n                  onChange={name => history.push(`/pipeline/${name}:/`)}\n                />\n                <Icon icon=\"chevron-right\" />\n                {path.slice(0, path.length - 1).map((name, idx) => (\n                  <React.Fragment key={idx}>\n                    <Link\n                      style={{ padding: 3 }}\n                      to={`/pipeline/${\n                        pipeline.name\n                      }:${visibleSolidsQuery}/${path\n                        .slice(0, idx + 1)\n                        .join(\"/\")}`}\n                    >\n                      {name}\n                    </Link>\n                    <Icon icon=\"chevron-right\" />\n                  </React.Fragment>\n                ))}\n                <SolidJumpBar\n                  solids={queryResultSolids.all}\n                  selectedSolid={selectedHandle && selectedHandle.solid}\n                  onChange={solid =>\n                    this.handleClickSolid({ name: solid.name })\n                  }\n                />\n              </PathOverlay>\n              {solidsQueryEnabled && (\n                <SolidQueryInput\n                  solids={solids}\n                  value={visibleSolidsQuery}\n                  onChange={this.handleQueryChange}\n                />\n              )}\n\n              <SearchOverlay style={{ background: backgroundTranslucent }}>\n                <SolidHighlightInput\n                  type=\"text\"\n                  name=\"highlighted\"\n                  leftIcon=\"search\"\n                  value={highlighted}\n                  placeholder=\"Highlight...\"\n                  onChange={(e: React.ChangeEvent<any>) =>\n                    this.setState({ highlighted: e.target.value })\n                  }\n                />\n              </SearchOverlay>\n              {queryResultSolids.all.length === 0 &&\n                !visibleSolidsQuery.length && <LargeDAGNotice />}\n              <PipelineGraphContainer\n                pipelineName={pipeline.name}\n                backgroundColor={backgroundColor}\n                solids={queryResultSolids.all}\n                focusSolids={queryResultSolids.focus}\n                highlightedSolids={highlightedSolids}\n                selectedHandle={selectedHandle}\n                parentHandle={parentHandle}\n                onClickSolid={this.handleClickSolid}\n                onClickBackground={this.handleClickBackground}\n                onEnterCompositeSolid={this.handleEnterCompositeSolid}\n                onLeaveCompositeSolid={this.handleLeaveCompositeSolid}\n              />\n            </>\n          }\n          right={\n            <RightInfoPanel>\n              <Route\n                // eslint-disable-next-line react/no-children-prop\n                children={({ location }: { location: any }) => (\n                  <SidebarTabbedContainer\n                    pipeline={pipeline}\n                    solidHandleID={selectedHandle && selectedHandle.handleID}\n                    parentSolidHandleID={parentHandle && parentHandle.handleID}\n                    getInvocations={this.props.getInvocations}\n                    onEnterCompositeSolid={this.handleEnterCompositeSolid}\n                    onClickSolid={this.handleClickSolid}\n                    {...querystring.parse(location.search || \"\")}\n                  />\n                )}\n              />\n            </RightInfoPanel>\n          }\n        />\n      </PipelinesContainer>\n    );\n  }\n}\n\nconst PipelinesContainer = styled.div`\n  flex: 1 1;\n  display: flex;\n  width: 100%;\n  min-width: 0;\n`;\n\nconst RightInfoPanel = styled.div`\n  // Fixes major perofmance hit. To reproduce, add enough content to\n  // the sidebar that it scrolls (via overflow-y below) and then try\n  // to pan the DAG.\n  position: relative;\n\n  height: 100%;\n  overflow-y: scroll;\n  background: ${Colors.WHITE};\n`;\n\nconst SearchOverlay = styled.div`\n  z-index: 2;\n  padding: 7px 5px;\n  display: inline-flex;\n  align-items: stretch;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nconst PathOverlay = styled.div`\n  z-index: 2;\n  padding: 7px;\n  padding-left: 10px;\n  max-width: 80%;\n  display: inline-flex;\n  align-items: center;\n  position: absolute;\n  left: 0;\n`;\n\nconst SolidHighlightInput = styled(InputGroup)`\n  margin-left: 7px;\n  font-size: 14px;\n  width: 220px;\n`;\n\nconst LargeDAGNotice = () => (\n  <LargeDAGContainer>\n    <LargeDAGInstructionBox>\n      <p>\n        This is a large DAG that may be difficult to visualize. Type{\" \"}\n        <code>*</code> in the subset box below to render the entire thing, or\n        type a solid name and use:\n      </p>\n      <ul style={{ marginBottom: 0 }}>\n        <li>\n          <code>+</code> to expand a single layer before or after the solid.\n        </li>\n        <li>\n          <code>*</code> to expand recursively before or after the solid.\n        </li>\n        <li>\n          <code>AND</code> to render another disconnected fragment.\n        </li>\n      </ul>\n    </LargeDAGInstructionBox>\n    <Icon icon=\"arrow-down\" iconSize={40} />\n  </LargeDAGContainer>\n);\n\nconst LargeDAGContainer = styled.div`\n  width: 50vw;\n  position: absolute;\n  transform: translateX(-50%);\n  left: 50%;\n  bottom: 60px;\n  z-index: 2;\n  max-width: 600px;\n  text-align: center;\n  .bp3-icon {\n    color: ${Colors.LIGHT_GRAY1};\n  }\n`;\n\nconst LargeDAGInstructionBox = styled.div`\n  padding: 15px 20px;\n  border: 1px solid #fff5c3;\n  margin-bottom: 20px;\n  color: ${Colors.DARK_GRAY3};\n  background: #fffbe5;\n  text-align: left;\n  line-height: 1.4rem;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  code {\n    background: #f8ebad;\n    font-weight: 500;\n    padding: 0 4px;\n  }\n`;\n","import * as React from \"react\";\nimport { match } from \"react-router\";\nimport gql from \"graphql-tag\";\nimport { History } from \"history\";\nimport { useQuery } from \"react-apollo\";\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport Loading from \"./Loading\";\nimport PipelineExplorer from \"./PipelineExplorer\";\nimport {\n  PipelineExplorerRootQuery,\n  PipelineExplorerRootQueryVariables\n} from \"./types/PipelineExplorerRootQuery\";\n\ninterface IPipelineExplorerRootProps {\n  location: { pathname: string };\n  match: match<{ 0: string }>;\n  history: History<any>;\n}\n\nconst PipelineExplorerRoot: React.FunctionComponent<IPipelineExplorerRootProps> = props => {\n  const [pipelineSelector, ...pathSolids] = props.match.params[\"0\"].split(\"/\");\n  const [pipelineName, query] = [...pipelineSelector.split(\":\"), \"\"];\n\n  const parentNames = pathSolids.slice(0, pathSolids.length - 1);\n  const selectedName = pathSolids[pathSolids.length - 1];\n\n  const queryResult = useQuery<\n    PipelineExplorerRootQuery,\n    PipelineExplorerRootQueryVariables\n  >(PIPELINE_EXPLORER_ROOT_QUERY, {\n    fetchPolicy: \"cache-and-network\",\n    partialRefetch: true,\n    variables: {\n      pipeline: pipelineName,\n      parentHandleID: parentNames.join(\".\")\n    }\n  });\n\n  return (\n    <Loading<PipelineExplorerRootQuery> queryResult={queryResult}>\n      {({ pipelineOrError }) => {\n        switch (pipelineOrError.__typename) {\n          case \"PipelineNotFoundError\":\n            return (\n              <NonIdealState\n                icon={IconNames.FLOW_BRANCH}\n                title=\"Pipeline Not Found\"\n                description={pipelineOrError.message}\n              />\n            );\n          case \"InvalidSubsetError\":\n          case \"PythonError\":\n            return <NonIdealState icon={IconNames.ERROR} title=\"Query Error\" />;\n          default:\n            const pipeline = pipelineOrError;\n            const displayedHandles = pipeline.solidHandles;\n            const parentSolidHandle = pipelineOrError.solidHandle;\n            return (\n              <PipelineExplorer\n                history={props.history}\n                path={pathSolids}\n                visibleSolidsQuery={query}\n                pipeline={pipelineOrError}\n                handles={displayedHandles}\n                parentHandle={parentSolidHandle ? parentSolidHandle : undefined}\n                selectedHandle={displayedHandles.find(\n                  h => h.solid.name === selectedName\n                )}\n                getInvocations={definitionName =>\n                  displayedHandles\n                    .filter(s => s.solid.definition.name === definitionName)\n                    .map(s => ({ handleID: s.handleID }))\n                }\n              />\n            );\n        }\n      }}\n    </Loading>\n  );\n};\n\nexport const PIPELINE_EXPLORER_ROOT_QUERY = gql`\n  query PipelineExplorerRootQuery(\n    $pipeline: String!\n    $parentHandleID: String!\n  ) {\n    pipelineOrError(params: { name: $pipeline }) {\n      ... on PipelineReference {\n        name\n      }\n      ... on Pipeline {\n        ...PipelineExplorerFragment\n\n        solidHandle(handleID: $parentHandleID) {\n          ...PipelineExplorerParentSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $parentHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...PipelineExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n    }\n  }\n  ${PipelineExplorer.fragments.PipelineExplorerFragment}\n  ${PipelineExplorer.fragments.PipelineExplorerSolidHandleFragment}\n  ${PipelineExplorer.fragments.PipelineExplorerParentSolidHandleFragment}\n`;\n\nexport default PipelineExplorerRoot;\n","import * as React from \"react\";\n\nimport { match } from \"react-router\";\nimport { useApolloClient, useQuery } from \"react-apollo\";\n\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { Run } from \"./Run\";\nimport { RunRootQuery } from \"./types/RunRootQuery\";\nimport gql from \"graphql-tag\";\n\ninterface IRunRootProps {\n  match: match<{ runId: string; pipelineName?: string }>;\n}\n\nexport const RunRoot: React.FunctionComponent<IRunRootProps> = props => {\n  const { runId } = props.match.params;\n  const client = useApolloClient();\n  const { data } = useQuery<RunRootQuery>(RUN_ROOT_QUERY, {\n    fetchPolicy: \"cache-and-network\",\n    partialRefetch: true,\n    variables: { runId }\n  });\n\n  if (!data || !data.pipelineRunOrError) {\n    return <Run client={client} run={undefined} />;\n  }\n\n  if (data.pipelineRunOrError.__typename !== \"PipelineRun\") {\n    return (\n      <NonIdealState\n        icon={IconNames.SEND_TO_GRAPH}\n        title=\"No Run\"\n        description={\n          \"The run with this ID does not exist or has been cleaned up.\"\n        }\n      />\n    );\n  }\n\n  return <Run client={client} run={data.pipelineRunOrError} />;\n};\n\nexport const RUN_ROOT_QUERY = gql`\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on PipelineRun {\n        pipeline {\n          __typename\n          ... on PipelineReference {\n            name\n          }\n        }\n        ...RunFragment\n      }\n    }\n  }\n\n  ${Run.fragments.RunFragment}\n`;\n","import { Colors } from \"@blueprintjs/core\";\nimport styled from \"styled-components/macro\";\n\nexport const Header = styled.div`\n  color: ${Colors.BLACK};\n  font-size: 1.1rem;\n  margin-bottom: 10px;\n`;\n\nexport const Legend = styled.div`\n  display: flex;\n  padding: 2px 10px;\n  text-decoration: none;\n`;\nexport const LegendColumn = styled.div`\n  flex: 1;\n  color: #8a9ba8;\n  padding: 7px 10px;\n  text-transform: uppercase;\n  font-size: 11px;\n`;\n\nexport const RowContainer = styled.div`\n  display: flex;\n  background: ${Colors.WHITE};\n  color: ${Colors.DARK_GRAY5};\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY1};\n  margin-bottom: 9px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  padding: 2px 10px;\n  text-decoration: none;\n`;\nexport const RowColumn = styled.div`\n  flex: 1;\n  padding: 7px 10px;\n  border-right: 1px solid ${Colors.LIGHT_GRAY3};\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  div {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  &:last-child {\n    border-right: none;\n  }\n`;\nexport const ScrollContainer = styled.div`\n  background-color: rgb(245, 248, 250);\n  padding: 20px;\n  overflow: auto;\n  min-height: 100%;\n  width: 100%;\n`;\nexport const Details = styled.div`\n  font-size: 0.8rem;\n  margin-top: 4px;\n`;\n","import * as React from \"react\";\nimport * as qs from \"query-string\";\nimport * as yaml from \"yaml\";\nimport gql from \"graphql-tag\";\nimport {\n  Button,\n  Colors,\n  Icon,\n  Menu,\n  MenuItem,\n  Popover,\n  MenuDivider,\n  Tooltip,\n  NonIdealState,\n  Tag,\n  Intent\n} from \"@blueprintjs/core\";\nimport {\n  Details,\n  Legend,\n  LegendColumn,\n  RowColumn,\n  RowContainer\n} from \"../ListComponents\";\nimport {\n  RunStatus,\n  titleForRun,\n  handleExecutionResult,\n  START_PIPELINE_EXECUTION_MUTATION,\n  DELETE_MUTATION,\n  CANCEL_MUTATION\n} from \"./RunUtils\";\nimport { formatElapsedTime, unixTimestampToString } from \"../Util\";\nimport { SharedToaster } from \"../DomUtils\";\n\nimport { HighlightedCodeBlock } from \"../HighlightedCodeBlock\";\nimport { Link } from \"react-router-dom\";\nimport { RunTableRunFragment } from \"./types/RunTableRunFragment\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport { useMutation } from \"react-apollo\";\nimport { RUNS_ROOT_QUERY, RunsQueryVariablesContext } from \"./RunsRoot\";\nimport PythonErrorInfo from \"../PythonErrorInfo\";\n\ninterface RunTableProps {\n  runs: RunTableRunFragment[];\n}\n\nconst TOOLTIP_MESSAGE_PIPELINE_MISSING =\n  `This pipeline is not present in the currently loaded repository, ` +\n  `so dagit can't browse the pipeline solids, but you can still view the logs.`;\n\nexport class RunTable extends React.Component<RunTableProps> {\n  static fragments = {\n    RunTableRunFragment: gql`\n      fragment RunTableRunFragment on PipelineRun {\n        runId\n        status\n        stepKeysToExecute\n        canCancel\n        mode\n        environmentConfigYaml\n        pipeline {\n          __typename\n\n          ... on PipelineReference {\n            name\n          }\n          ... on Pipeline {\n            solids {\n              name\n            }\n          }\n        }\n        stats {\n          __typename\n          ... on PipelineRunStatsSnapshot {\n            stepsSucceeded\n            stepsFailed\n            startTime\n            endTime\n            expectations\n            materializations\n          }\n          ...PythonErrorFragment\n        }\n        tags {\n          key\n          value\n        }\n      }\n\n      ${PythonErrorInfo.fragments.PythonErrorFragment}\n    `\n  };\n\n  render() {\n    if (this.props.runs.length === 0) {\n      return (\n        <div style={{ marginTop: 100 }}>\n          <NonIdealState\n            icon=\"history\"\n            title=\"Pipeline Runs\"\n            description=\"No runs to display. Use the Execute tab to start a pipeline.\"\n          />\n        </div>\n      );\n    }\n    return (\n      <div>\n        <Legend>\n          <LegendColumn style={{ maxWidth: 30 }}></LegendColumn>\n          <LegendColumn style={{ flex: 2.4 }}>Run</LegendColumn>\n          <LegendColumn>Pipeline</LegendColumn>\n          <LegendColumn style={{ flex: 1 }}>Execution Params</LegendColumn>\n          <LegendColumn style={{ flex: 1.8 }}>Timing</LegendColumn>\n          <LegendColumn style={{ maxWidth: 50 }}></LegendColumn>\n        </Legend>\n        {this.props.runs.map(run => (\n          <RunRow run={run} key={run.runId} />\n        ))}\n      </div>\n    );\n  }\n}\n\nconst RunRow: React.FunctionComponent<{ run: RunTableRunFragment }> = ({\n  run\n}) => {\n  let details;\n  let time;\n  if (run.stats.__typename === \"PipelineRunStatsSnapshot\") {\n    details = (\n      <Details>\n        <Link\n          to={`/runs/${run.pipeline.name}/${run.runId}?q=type:step_success`}\n        >{`${run.stats.stepsSucceeded} steps succeeded, `}</Link>\n        <Link\n          to={`/runs/${run.pipeline.name}/${run.runId}?q=type:step_failure`}\n        >\n          {`${run.stats.stepsFailed} steps failed, `}{\" \"}\n        </Link>\n        <Link\n          to={`/runs/${run.pipeline.name}/${run.runId}?q=type:materialization`}\n        >{`${run.stats.materializations} materializations`}</Link>\n        ,{\" \"}\n        <Link\n          to={`/runs/${run.pipeline.name}/${run.runId}?q=type:expectation`}\n        >{`${run.stats.expectations} expectations passed`}</Link>\n      </Details>\n    );\n    time = (\n      <>\n        {run.stats.startTime ? (\n          <div style={{ marginBottom: 4 }}>\n            <Icon icon=\"calendar\" />{\" \"}\n            {unixTimestampToString(run.stats.startTime)}\n            <Icon\n              icon=\"arrow-right\"\n              style={{ marginLeft: 10, marginRight: 10 }}\n            />\n            {unixTimestampToString(run.stats.endTime)}\n          </div>\n        ) : run.status === \"FAILURE\" ? (\n          <div style={{ marginBottom: 4 }}> Failed to start</div>\n        ) : (\n          <div style={{ marginBottom: 4 }}>\n            <Icon icon=\"calendar\" /> Starting...\n          </div>\n        )}\n        <RunTime startUnix={run.stats.startTime} endUnix={run.stats.endTime} />\n      </>\n    );\n  } else {\n    details = (\n      <Popover\n        content={<PythonErrorInfo error={run.stats} />}\n        targetTagName=\"div\"\n      >\n        <Details>\n          <Icon icon=\"error\" /> Failed to load stats\n        </Details>\n      </Popover>\n    );\n    time = (\n      <Popover content={<PythonErrorInfo error={run.stats} />}>\n        <div>\n          <Icon icon=\"error\" /> Failed to load times\n        </div>\n      </Popover>\n    );\n  }\n\n  return (\n    <RowContainer key={run.runId} style={{ paddingRight: 3 }}>\n      <RowColumn style={{ maxWidth: 30, paddingLeft: 0, textAlign: \"center\" }}>\n        <RunStatus status={run.status} />\n      </RowColumn>\n      <RowColumn style={{ flex: 2.4 }}>\n        <Link to={`/runs/${run.pipeline.name}/${run.runId}`}>\n          {titleForRun(run)}\n        </Link>\n        {details}\n      </RowColumn>\n      <RowColumn>\n        {run.pipeline.__typename === \"Pipeline\" ? (\n          <Link to={`/pipeline/${run.pipeline.name}/`}>\n            <Icon icon=\"diagram-tree\" /> {run.pipeline.name}\n          </Link>\n        ) : (\n          <>\n            <Icon icon=\"diagram-tree\" color={Colors.GRAY3} />\n            &nbsp;\n            <Tooltip content={TOOLTIP_MESSAGE_PIPELINE_MISSING}>\n              {run.pipeline.name}\n            </Tooltip>\n          </>\n        )}\n      </RowColumn>\n      <RowColumn>\n        <div>\n          <div>{`Mode: ${run.mode}`}</div>\n\n          {run.stepKeysToExecute && (\n            <div>\n              {run.stepKeysToExecute.length === 1\n                ? `Step: ${run.stepKeysToExecute.join(\"\")}`\n                : `${run.stepKeysToExecute.length} Steps`}\n            </div>\n          )}\n          <div>\n            {run.tags.map((t, idx) => {\n              // Manually hide 'dagster/schedule_id` tags\n              if (t.key === \"dagster/schedule_id\") {\n                return null;\n              }\n\n              return (\n                <Tooltip\n                  content={`${t.key}=${t.value}`}\n                  key={idx}\n                  wrapperTagName=\"div\"\n                  targetTagName=\"div\"\n                >\n                  <Tag style={{ margin: 1 }}>{`${t.key}=${t.value}`}</Tag>\n                </Tooltip>\n              );\n            })}\n          </div>\n        </div>\n      </RowColumn>\n      <RowColumn style={{ flex: 1.8, borderRight: 0 }}>{time}</RowColumn>\n      <RowColumn style={{ maxWidth: 50 }}>\n        <RunActionsMenu run={run} />\n      </RowColumn>\n    </RowContainer>\n  );\n};\n\nconst RunActionsMenu: React.FunctionComponent<{\n  run: RunTableRunFragment;\n}> = ({ run }) => {\n  const variables = React.useContext(RunsQueryVariablesContext);\n  const [reexecute] = useMutation(START_PIPELINE_EXECUTION_MUTATION);\n  const [cancel] = useMutation(CANCEL_MUTATION, {\n    refetchQueries: [{ query: RUNS_ROOT_QUERY, variables }]\n  });\n  const [destroy] = useMutation(DELETE_MUTATION, {\n    refetchQueries: [{ query: RUNS_ROOT_QUERY, variables }]\n  });\n\n  return (\n    <Popover\n      content={\n        <Menu>\n          <MenuItem\n            text=\"View Configuration...\"\n            icon=\"share\"\n            onClick={() =>\n              showCustomAlert({\n                title: \"Config\",\n                body: (\n                  <HighlightedCodeBlock\n                    value={run.environmentConfigYaml}\n                    languages={[\"yaml\"]}\n                  />\n                )\n              })\n            }\n          />\n          <MenuDivider />\n\n          <MenuItem\n            text=\"Open in Execute Tab...\"\n            disabled={run.pipeline.__typename !== \"Pipeline\"}\n            icon=\"edit\"\n            target=\"_blank\"\n            href={`/playground/setup?${qs.stringify({\n              mode: run.mode,\n              pipeline: run.pipeline.name,\n              config: run.environmentConfigYaml,\n              solidSubset:\n                run.pipeline.__typename === \"Pipeline\"\n                  ? run.pipeline.solids.map(s => s.name)\n                  : []\n            })}`}\n          />\n          <MenuItem\n            text=\"Re-execute\"\n            disabled={run.pipeline.__typename !== \"Pipeline\"}\n            icon=\"repeat\"\n            onClick={async () => {\n              const result = await reexecute({\n                variables: {\n                  executionParams: {\n                    mode: run.mode,\n                    environmentConfigData: yaml.parse(\n                      run.environmentConfigYaml\n                    ),\n                    selector: {\n                      name: run.pipeline.name,\n                      solidSubset:\n                        run.pipeline.__typename === \"Pipeline\"\n                          ? run.pipeline.solids.map(s => s.name)\n                          : []\n                    }\n                  }\n                }\n              });\n              handleExecutionResult(run.pipeline.name, result, {\n                openInNewWindow: false\n              });\n            }}\n          />\n          <MenuItem\n            text=\"Cancel\"\n            icon=\"stop\"\n            disabled={!run.canCancel}\n            onClick={async () => {\n              const result = await cancel({ variables: { runId: run.runId } });\n              showToastFor(\n                result.data.cancelPipelineExecution,\n                \"Run cancelled.\"\n              );\n            }}\n          />\n          <MenuDivider />\n          <MenuItem\n            text=\"Delete\"\n            icon=\"trash\"\n            disabled={run.canCancel}\n            onClick={async () => {\n              const result = await destroy({ variables: { runId: run.runId } });\n              showToastFor(result.data.deletePipelineRun, \"Run deleted.\");\n            }}\n          />\n        </Menu>\n      }\n      position={\"bottom\"}\n    >\n      <Button minimal={true} icon=\"more\" />\n    </Popover>\n  );\n};\n\nclass RunTime extends React.Component<{\n  startUnix: number | null;\n  endUnix: number | null;\n}> {\n  _interval?: NodeJS.Timer;\n  _timeout?: NodeJS.Timer;\n\n  componentDidMount() {\n    if (this.props.endUnix) return;\n\n    // align to the next second and then update every second so the elapsed\n    // time \"ticks\" up. Our render method uses Date.now(), so all we need to\n    // do is force another React render. We could clone the time into React\n    // state but that is a bit messier.\n    setTimeout(() => {\n      this.forceUpdate();\n      this._interval = setInterval(() => this.forceUpdate(), 1000);\n    }, Date.now() % 1000);\n  }\n\n  componentWillUnmount() {\n    if (this._timeout) clearInterval(this._timeout);\n    if (this._interval) clearInterval(this._interval);\n  }\n\n  render() {\n    const start = this.props.startUnix ? this.props.startUnix * 1000 : 0;\n    const end = this.props.endUnix ? this.props.endUnix * 1000 : Date.now();\n\n    return (\n      <div>\n        <Icon icon=\"time\" /> {start ? formatElapsedTime(end - start) : \"\"}\n      </div>\n    );\n  }\n}\n\nfunction showToastFor(\n  possibleError: { __typename: string; message?: string },\n  successMessage: string\n) {\n  if (\"message\" in possibleError) {\n    SharedToaster.show({\n      message: possibleError.message,\n      icon: \"error\",\n      intent: Intent.DANGER\n    });\n  } else {\n    SharedToaster.show({\n      message: successMessage,\n      icon: \"confirm\",\n      intent: Intent.SUCCESS\n    });\n  }\n}\n","import React from \"react\";\nimport { TagInput, Popover, Menu, MenuItem, Spinner } from \"@blueprintjs/core\";\nimport styled from \"styled-components/macro\";\n\nexport interface SuggestionProvider {\n  token: string;\n  values: () => string[];\n}\n\ninterface Suggestion {\n  text: string;\n  final: boolean;\n}\n\ninterface ActiveSuggestionInfo {\n  text: string;\n  idx: number;\n}\n\nexport interface TokenizingFieldValue {\n  token?: string;\n  value: string;\n}\n\ninterface TokenizingFieldProps {\n  values: TokenizingFieldValue[];\n  maxValues?: number;\n  onChange: (values: TokenizingFieldValue[]) => void;\n  suggestionProviders: SuggestionProvider[];\n  suggestionProvidersFilter?: (\n    suggestionProvider: SuggestionProvider[],\n    values: TokenizingFieldValue[]\n  ) => SuggestionProvider[];\n  placeholder?: string;\n  loading?: boolean;\n}\n\nfunction findProviderByToken(token: string, providers: SuggestionProvider[]) {\n  return providers.find(p => p.token.toLowerCase() === token.toLowerCase());\n}\n\nexport function tokenizedValuesFromString(\n  str: string,\n  providers: SuggestionProvider[]\n) {\n  const tokens = str.split(\",\");\n  return tokens.map(token => tokenizedValueFromString(token, providers));\n}\n\nexport function tokenizedValueFromString(\n  str: string,\n  providers: SuggestionProvider[]\n) {\n  const parts = str.split(\":\");\n  if (parts.length === 2 && findProviderByToken(parts[0], providers)) {\n    return { token: parts[0], value: parts[1] };\n  }\n  return { value: str };\n}\n\nexport function stringFromValue(value: TokenizingFieldValue[]) {\n  return value\n    .filter(v => v.value !== \"\")\n    .map(v => (v.token ? `${v.token}:${v.value}` : v.value))\n    .join(\",\");\n}\n\n/** Provides a text field with typeahead autocompletion for key value pairs,\nwhere the key is one of a known set of \"suggestion provider tokens\". Provide\none or more SuggestionProviders to build the tree of autocompletions. The\ninput also allows for freeform typing (`value` items with no token value) */\nexport const TokenizingField: React.FunctionComponent<TokenizingFieldProps> = ({\n  suggestionProviders,\n  suggestionProvidersFilter,\n  values,\n  maxValues,\n  onChange,\n  placeholder,\n  loading\n}) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [active, setActive] = React.useState<ActiveSuggestionInfo | null>(null);\n  const [typed, setTyped] = React.useState<string>(\"\");\n  const atMaxValues =\n    maxValues !== undefined && values.filter(v => v.token).length >= maxValues;\n\n  const filteredSuggestionProviders = suggestionProvidersFilter\n    ? suggestionProvidersFilter(suggestionProviders, values)\n    : suggestionProviders;\n\n  // Build the set of suggestions that should be displayed for the current input value.\n  // Note: \"typed\" is the text that has not yet been submitted, separate from values[].\n  const parts = typed.split(\":\");\n  const lastPart = parts[parts.length - 1].toLowerCase();\n  let suggestions: Suggestion[] = [];\n\n  const suggestionMatchesTypedText = (s: Suggestion) =>\n    !lastPart ||\n    s.text\n      .toLowerCase()\n      .split(\":\")\n      .some(c => c.includes(lastPart));\n\n  const availableSuggestionsForProvider = (provider: SuggestionProvider) => {\n    const suggestionNotUsed = (v: string) =>\n      !values.some(e => e.token === provider.token && e.value === v);\n\n    return provider\n      .values()\n      .filter(suggestionNotUsed)\n      .map(v => ({ text: `${provider.token}:${v}`, final: true }))\n      .filter(suggestionMatchesTypedText);\n  };\n\n  if (parts.length === 1) {\n    // Suggest providers (eg: `pipeline:`) so users can discover the search space\n    suggestions = filteredSuggestionProviders\n      .map(s => ({ text: `${s.token}:`, final: false }))\n      .filter(suggestionMatchesTypedText);\n\n    // Suggest value completions so users can type \"airline_\" without the \"pipeline\"\n    // prefix and get the correct suggestion.\n    if (typed.length > 0) {\n      for (const p of filteredSuggestionProviders) {\n        suggestions.push(...availableSuggestionsForProvider(p));\n      }\n    }\n  }\n\n  if (parts.length === 2) {\n    // Suggest values from the chosen provider (eg: `pipeline:abc`)\n    const provider = findProviderByToken(parts[0], filteredSuggestionProviders);\n    suggestions = provider ? availableSuggestionsForProvider(provider) : [];\n  }\n\n  // Truncate suggestions to the ones currently matching the typed text,\n  // and always sort them in alphabetical order.\n  suggestions = suggestions.sort((a, b) => a.text.localeCompare(b.text));\n\n  // We need to manage selection in the dropdown by ourselves. To ensure the\n  // best behavior we store the active item's index and text (the text allows\n  // us to relocate it if it's moved and the index allows us to keep selection\n  // at the same location if the previous item is gone.)\n\n  // This hook keeps the active row state in sync with the suggestions, which\n  // are derived from the current input value.\n\n  React.useEffect(() => {\n    // If suggestions are present, autoselect the first one so the user can press\n    // enter to complete their search. (Esc + enter is how you enter your raw text.)\n    if (!active && suggestions.length) {\n      setActive({ text: suggestions[0].text, idx: 0 });\n      return;\n    }\n    if (!active) {\n      return;\n    }\n    if (suggestions.length === 0) {\n      setActive(null);\n      return;\n    }\n\n    // Relocate the currently active item in the latest suggestions list\n    const pos = suggestions.findIndex(a => a.text === active.text);\n\n    // The new index is the index of the active item, or whatever item\n    // is now at it's location if it's gone, bounded to the array.\n    let nextIdx = pos !== -1 ? pos : active.idx;\n    nextIdx = Math.max(0, Math.min(suggestions.length - 1, nextIdx));\n    const nextText = suggestions[nextIdx] && suggestions[nextIdx].text;\n\n    if (nextIdx !== active.idx || nextText !== active.text) {\n      setActive({ text: nextText, idx: nextIdx });\n    }\n  }, [active, suggestions]);\n\n  const onConfirmSuggestion = (suggestion: Suggestion) => {\n    if (atMaxValues) return;\n\n    if (suggestion.final) {\n      // The user has finished a key-value pair\n      onConfirmText(suggestion.text);\n      setTyped(\"\");\n      setActive(null);\n      setOpen(false);\n    } else {\n      // The user has finished a key\n      setTyped(suggestion.text);\n    }\n  };\n\n  const onConfirmText = (str: string) => {\n    if (atMaxValues) return;\n    if (str.endsWith(\":\")) return;\n    if (str === \"\") return;\n\n    onChange([\n      ...values,\n      tokenizedValueFromString(str, filteredSuggestionProviders)\n    ]);\n    setTyped(\"\");\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<any>) => {\n    if (atMaxValues && e.key !== \"Delete\" && e.key !== \"Backspace\") {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n    // Enter and Return confirm the currently selected suggestion or\n    // confirm the freeform text you've typed if no suggestions are shown.\n    if (e.key === \"Enter\" || e.key === \"Return\" || e.key === \"Tab\") {\n      if (active) {\n        const picked = suggestions.find(s => s.text === active.text);\n        if (!picked) throw new Error(\"Selection out of sync with suggestions\");\n        onConfirmSuggestion(picked);\n        e.preventDefault();\n        e.stopPropagation();\n      } else if (typed.length) {\n        onConfirmText(typed);\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      return;\n    }\n\n    // Typing space confirms your freeform text\n    if (e.key === \" \") {\n      e.preventDefault();\n      onConfirmText(typed);\n      return;\n    }\n\n    // Escape closes the options. The options re-open if you type another char or click.\n    if (e.key === \"Escape\") {\n      setActive(null);\n      setOpen(false);\n      return;\n    }\n\n    if (!open && e.key !== \"Delete\" && e.key !== \"Backspace\") {\n      setOpen(true);\n    }\n\n    // The up/down arrow keys shift selection in the dropdown.\n    // Note: The first down arrow press activates the first item.\n    const shift = { ArrowDown: 1, ArrowUp: -1 }[e.key];\n    if (shift && suggestions.length > 0) {\n      e.preventDefault();\n      let idx = (active ? active.idx : -1) + shift;\n      idx = Math.max(0, Math.min(idx, suggestions.length - 1));\n      setActive({ text: suggestions[idx].text, idx });\n    }\n  };\n\n  return (\n    <Popover\n      minimal={true}\n      isOpen={open && suggestions.length > 0 && !atMaxValues}\n      position={\"bottom\"}\n      content={\n        suggestions.length > 0 ? (\n          <StyledMenu>\n            {suggestions.slice(0, 20).map((suggestion, idx) => (\n              <StyledMenuItem\n                key={suggestion.text}\n                text={suggestion.text}\n                shouldDismissPopover={false}\n                active={active ? active.idx === idx : false}\n                onMouseDown={(e: React.MouseEvent<any>) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  onConfirmSuggestion(suggestion);\n                  setActive(null);\n                }}\n              />\n            ))}\n          </StyledMenu>\n        ) : (\n          <div />\n        )\n      }\n    >\n      <StyledTagInput\n        values={values.map(v => (v.token ? `${v.token}:${v.value}` : v.value))}\n        inputValue={typed}\n        onRemove={(_, idx) => {\n          const next = [...values];\n          next.splice(idx, 1);\n          onChange(next);\n        }}\n        onInputChange={e => setTyped(e.currentTarget.value)}\n        inputProps={{\n          onFocus: () => setOpen(true),\n          onBlur: () => setOpen(false)\n        }}\n        onAdd={() => false}\n        onKeyDown={onKeyDown}\n        tagProps={{ minimal: true }}\n        placeholder={placeholder || \"Filter...\"}\n        rightElement={\n          loading ? (\n            <div style={{ padding: 3 }}>\n              <Spinner size={17} />\n            </div>\n          ) : (\n            undefined\n          )\n        }\n      />\n    </Popover>\n  );\n};\n\nconst StyledTagInput = styled(TagInput)`\n  width: 400px;\n  input {\n    font-size: 12px;\n  }\n`;\n\nconst StyledMenu = styled(Menu)`\n  width: 400px;\n`;\n\nconst StyledMenuItem = styled(MenuItem)`\n  font-size: 13px;\n  line-height: 15px;\n`;\n","import * as React from \"react\";\n\nimport Loading from \"../Loading\";\nimport * as querystring from \"query-string\";\nimport { RouteComponentProps } from \"react-router\";\nimport { RunTable } from \"./RunTable\";\nimport { RunsRootQuery, RunsRootQueryVariables } from \"./types/RunsRootQuery\";\nimport { RunsSearchSpaceQuery } from \"./types/RunsSearchSpaceQuery\";\n\nimport gql from \"graphql-tag\";\nimport { __RouterContext as RouterContext } from \"react-router\";\nimport { useQuery, QueryResult } from \"react-apollo\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport { NonIdealState, Button } from \"@blueprintjs/core\";\nimport { ScrollContainer, Header } from \"../ListComponents\";\nimport {\n  TokenizingField,\n  TokenizingFieldValue,\n  SuggestionProvider,\n  tokenizedValuesFromString,\n  stringFromValue\n} from \"../TokenizingField\";\nimport styled from \"styled-components/macro\";\nimport { PipelineRunsFilter, PipelineRunStatus } from \"../types/globalTypes\";\n\nconst PAGE_SIZE = 50;\n\nexport const RunsQueryVariablesContext = React.createContext<\n  RunsRootQueryVariables\n>({ filter: {} });\n\nfunction searchSuggestionsForRuns(\n  result?: QueryResult<RunsSearchSpaceQuery>\n): SuggestionProvider[] {\n  const tags = (result && result.data && result.data.pipelineRunTags) || [];\n  const pipelineNames =\n    (result?.data?.pipelinesOrError?.__typename === \"PipelineConnection\" &&\n      result.data.pipelinesOrError.nodes.map(n => n.name)) ||\n    [];\n\n  return [\n    {\n      token: \"id\",\n      values: () => []\n    },\n    {\n      token: \"status\",\n      values: () => [\"NOT_STARTED\", \"STARTED\", \"SUCCESS\", \"FAILURE\", \"MANAGED\"]\n    },\n    {\n      token: \"pipeline\",\n      values: () => pipelineNames\n    },\n    {\n      token: \"tag\",\n      values: () => {\n        const all: string[] = [];\n        tags\n          .sort((a, b) => a.key.localeCompare(b.key))\n          .forEach(t => t.values.forEach(v => all.push(`${t.key}=${v}`)));\n        return all;\n      }\n    }\n  ];\n}\n\nfunction runsFilterForSearchTokens(search: TokenizingFieldValue[]) {\n  if (!search[0]) return {};\n\n  const obj: PipelineRunsFilter = {};\n\n  for (const item of search) {\n    if (item.token === \"pipeline\") {\n      obj.pipelineName = item.value;\n    } else if (item.token === \"id\") {\n      obj.runId = item.value;\n    } else if (item.token === \"status\") {\n      obj.status = item.value as PipelineRunStatus;\n    } else if (item.token === \"tag\") {\n      const [key, value] = item.value.split(\"=\");\n      if (obj.tags) {\n        obj.tags.push({ key, value });\n      } else {\n        obj.tags = [{ key, value }];\n      }\n    }\n  }\n\n  return obj;\n}\n\nexport const RunsRoot: React.FunctionComponent<RouteComponentProps> = ({\n  location\n}) => {\n  const { history } = React.useContext(RouterContext);\n  const qs = querystring.parse(location.search);\n\n  const suggestions = searchSuggestionsForRuns(\n    useQuery<RunsSearchSpaceQuery>(RUNS_SEARCH_SPACE_QUERY, {\n      fetchPolicy: \"cache-and-network\"\n    })\n  );\n\n  const [cursorStack, setCursorStack] = React.useState<string[]>([]);\n  const cursor = (qs.cursor as string) || undefined;\n\n  const setCursor = (cursor: string | undefined) => {\n    history.push({ search: `?${querystring.stringify({ ...qs, cursor })}` });\n  };\n  const popCursor = () => {\n    const nextStack = [...cursorStack];\n    setCursor(nextStack.pop());\n    setCursorStack(nextStack);\n  };\n  const pushCursor = (nextCursor: string) => {\n    if (cursor) setCursorStack([...cursorStack, cursor]);\n    setCursor(nextCursor);\n  };\n\n  const search = tokenizedValuesFromString((qs.q as string) || \"\", suggestions);\n  const setSearch = (search: TokenizingFieldValue[]) => {\n    // Note: changing search also clears the cursor so you're back on page 1\n    setCursorStack([]);\n    const params = { ...qs, q: stringFromValue(search), cursor: undefined };\n    history.push({ search: `?${querystring.stringify(params)}` });\n  };\n\n  const queryVars: RunsRootQueryVariables = {\n    cursor: cursor,\n    limit: PAGE_SIZE + 1,\n    filter: runsFilterForSearchTokens(search)\n  };\n  const queryResult = useQuery<RunsRootQuery, RunsRootQueryVariables>(\n    RUNS_ROOT_QUERY,\n    {\n      fetchPolicy: \"cache-and-network\",\n      pollInterval: 15 * 1000,\n      partialRefetch: true,\n      variables: queryVars\n    }\n  );\n\n  const suggestionProvidersFilter = (\n    suggestionProviders: SuggestionProvider[],\n    values: TokenizingFieldValue[]\n  ) => {\n    const tokens: string[] = [];\n    for (const { token } of values) {\n      if (token) {\n        tokens.push(token);\n      }\n    }\n\n    // If id is set, then no other filters can be set\n    if (tokens.includes(\"id\")) {\n      return [];\n    }\n\n    // Can only have one filter value for pipeline, status, or id\n    const limitedTokens = new Set<string>([\"id\", \"pipeline\", \"status\"]);\n    const presentLimitedTokens = tokens.filter(token =>\n      limitedTokens.has(token)\n    );\n\n    return suggestionProviders.filter(\n      provider => !presentLimitedTokens.includes(provider.token)\n    );\n  };\n\n  return (\n    <RunsQueryVariablesContext.Provider value={queryVars}>\n      <ScrollContainer>\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"baseline\",\n            justifyContent: \"space-between\"\n          }}\n        >\n          <Header>{`Runs`}</Header>\n          <Filters>\n            <TokenizingField\n              values={search}\n              onChange={search => setSearch(search)}\n              suggestionProviders={suggestions}\n              suggestionProvidersFilter={suggestionProvidersFilter}\n              loading={queryResult.loading}\n            />\n          </Filters>\n        </div>\n\n        <Loading queryResult={queryResult}>\n          {({ pipelineRunsOrError }) => {\n            if (pipelineRunsOrError.__typename !== \"PipelineRuns\") {\n              return (\n                <NonIdealState\n                  icon={IconNames.ERROR}\n                  title=\"Query Error\"\n                  description={pipelineRunsOrError.message}\n                />\n              );\n            }\n\n            const runs = pipelineRunsOrError.results;\n            const displayed = runs.slice(0, PAGE_SIZE);\n            const hasPrevPage = !!cursor;\n            const hasNextPage = runs.length === PAGE_SIZE + 1;\n            return (\n              <>\n                <RunTable runs={displayed} />\n                <div style={{ textAlign: \"center\" }}>\n                  <Button\n                    style={{\n                      visibility: hasPrevPage ? \"initial\" : \"hidden\",\n                      marginRight: 4\n                    }}\n                    icon={IconNames.ARROW_LEFT}\n                    onClick={() => popCursor()}\n                  >\n                    Prev Page\n                  </Button>\n                  <Button\n                    style={{\n                      visibility: hasNextPage ? \"initial\" : \"hidden\",\n                      marginLeft: 4\n                    }}\n                    rightIcon={IconNames.ARROW_RIGHT}\n                    onClick={() =>\n                      pushCursor(displayed[displayed.length - 1].runId)\n                    }\n                  >\n                    Next Page\n                  </Button>\n                </div>\n              </>\n            );\n          }}\n        </Loading>\n      </ScrollContainer>\n    </RunsQueryVariablesContext.Provider>\n  );\n};\n\nexport const RUNS_SEARCH_SPACE_QUERY = gql`\n  query RunsSearchSpaceQuery {\n    pipelinesOrError {\n      __typename\n      ... on PipelineConnection {\n        nodes {\n          name\n        }\n      }\n    }\n    pipelineRunTags {\n      key\n      values\n    }\n  }\n`;\n\nexport const RUNS_ROOT_QUERY = gql`\n  query RunsRootQuery(\n    $limit: Int\n    $cursor: String\n    $filter: PipelineRunsFilter!\n  ) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n\n  ${RunTable.fragments.RunTableRunFragment}\n`;\n\nconst Filters = styled.div`\n  float: right;\n  display: flex;\n  align-items: center;\n  margin-bottom: 14px;\n`;\n","import React from \"react\";\nimport gql from \"graphql-tag\";\nimport { SolidCardSolidDefinitionFragment } from \"./types/SolidCardSolidDefinitionFragment\";\nimport { layoutSolid } from \"../graph/getFullSolidLayout\";\nimport SolidNode from \"../graph/SolidNode\";\nimport styled from \"styled-components/macro\";\n\ninterface SolidCardProps {\n  definition: SolidCardSolidDefinitionFragment;\n}\n\nexport class SolidCard extends React.Component<SolidCardProps> {\n  static fragments = {\n    SolidCardSolidDefinitionFragment: gql`\n      fragment SolidCardSolidDefinitionFragment on ISolidDefinition {\n        ...SolidNodeDefinitionFragment\n        __typename\n        name\n        description\n        metadata {\n          key\n          value\n        }\n        inputDefinitions {\n          name\n        }\n        outputDefinitions {\n          name\n        }\n      }\n\n      ${SolidNode.fragments.SolidNodeDefinitionFragment}\n    `\n  };\n\n  render() {\n    const { name, inputDefinitions, outputDefinitions } = this.props.definition;\n    const layout = layoutSolid(\n      {\n        name: name,\n        inputs: inputDefinitions.map(d => ({\n          definition: d,\n          dependsOn: []\n        })),\n        outputs: outputDefinitions.map(d => ({\n          definition: d,\n          dependedBy: []\n        }))\n      },\n      { x: 0, y: 0 }\n    );\n\n    return (\n      <SolidCardContainer>\n        <SVGContainer\n          width={layout.boundingBox.width}\n          height={layout.boundingBox.height}\n        >\n          <SolidNode\n            invocation={undefined}\n            definition={this.props.definition}\n            minified={false}\n            onClick={() => {}}\n            onDoubleClick={() => {}}\n            onEnterComposite={() => {}}\n            onHighlightEdges={() => {}}\n            layout={layout}\n            selected={false}\n            focused={false}\n            highlightedEdges={[]}\n            dim={false}\n          />\n        </SVGContainer>\n      </SolidCardContainer>\n    );\n  }\n}\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n  display: block;\n`;\n\nconst SolidCardContainer = styled.div`\n  flex: 1;\n  padding: 20px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  max-width: 450px;\n`;\n","import * as React from \"react\";\nimport * as querystring from \"query-string\";\n\nimport Loading from \"../Loading\";\nimport { RouteComponentProps } from \"react-router\";\n\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"react-apollo\";\nimport styled from \"styled-components/macro\";\nimport { SolidCard } from \"./SolidCard\";\nimport {\n  SolidsRootQuery,\n  SolidsRootQuery_usedSolids\n} from \"./types/SolidsRootQuery\";\nimport { UsedSolidDetailsQuery } from \"./types/UsedSolidDetailsQuery\";\nimport { SplitPanelChildren } from \"../SplitPanelChildren\";\nimport { Colors, NonIdealState } from \"@blueprintjs/core\";\nimport { SidebarSolidDefinition } from \"../SidebarSolidDefinition\";\nimport SolidTypeSignature from \"../SolidTypeSignature\";\nimport {\n  SuggestionProvider,\n  TokenizingFieldValue,\n  tokenizedValuesFromString,\n  stringFromValue,\n  TokenizingField\n} from \"../TokenizingField\";\nimport { SidebarSolidInvocationInfo } from \"../SidebarSolidHelpers\";\n\nfunction flatUniq(arrs: string[][]) {\n  const results: { [key: string]: boolean } = {};\n  for (const arr of arrs) {\n    for (const item of arr) {\n      results[item] = true;\n    }\n  }\n  return Object.keys(results).sort((a, b) => a.localeCompare(b));\n}\n\nfunction searchSuggestionsForSolids(\n  solids: SolidsRootQuery_usedSolids[]\n): SuggestionProvider[] {\n  return [\n    {\n      token: \"name\",\n      values: () => solids.map(s => s.definition.name)\n    },\n    {\n      token: \"pipeline\",\n      values: () =>\n        flatUniq(solids.map(s => s.invocations.map(i => i.pipeline.name)))\n    },\n    {\n      token: \"input\",\n      values: () =>\n        flatUniq(\n          solids.map(s =>\n            s.definition.inputDefinitions.map(d => d.type.displayName)\n          )\n        )\n    },\n    {\n      token: \"output\",\n      values: () =>\n        flatUniq(\n          solids.map(s =>\n            s.definition.outputDefinitions.map(d => d.type.displayName)\n          )\n        )\n    }\n  ];\n}\n\nfunction filterSolidsWithSearch(\n  solids: SolidsRootQuery_usedSolids[],\n  search: TokenizingFieldValue[]\n) {\n  return solids.filter(s => {\n    for (const item of search) {\n      if (\n        (item.token === \"name\" || item.token === undefined) &&\n        !s.definition.name.startsWith(item.value)\n      ) {\n        return false;\n      }\n      if (\n        item.token === \"pipeline\" &&\n        !s.invocations.some(i => i.pipeline.name === item.value)\n      ) {\n        return false;\n      }\n      if (\n        item.token === \"input\" &&\n        !s.definition.inputDefinitions.some(i =>\n          i.type.displayName.startsWith(item.value)\n        )\n      ) {\n        return false;\n      }\n      if (\n        item.token === \"output\" &&\n        !s.definition.outputDefinitions.some(i =>\n          i.type.displayName.startsWith(item.value)\n        )\n      ) {\n        return false;\n      }\n    }\n    return true;\n  });\n}\n\nexport const SolidsRoot: React.FunctionComponent<RouteComponentProps> = route => {\n  const queryResult = useQuery<SolidsRootQuery>(SOLIDS_ROOT_QUERY);\n  return (\n    <Loading queryResult={queryResult}>\n      {({ usedSolids }) => (\n        <SolidsRootWithData usedSolids={usedSolids} route={route} />\n      )}\n    </Loading>\n  );\n};\n\nconst SolidsRootWithData: React.FunctionComponent<{\n  route: RouteComponentProps;\n  usedSolids: SolidsRootQuery_usedSolids[];\n}> = ({ route: { location, match, history }, usedSolids }) => {\n  const { q, typeExplorer } = querystring.parse(location.search);\n  const suggestions = searchSuggestionsForSolids(usedSolids);\n  const search = tokenizedValuesFromString((q as string) || \"\", suggestions);\n  const filtered = filterSolidsWithSearch(usedSolids, search);\n  const selected = usedSolids.find(\n    s => s.definition.name === match.params[\"name\"]\n  );\n\n  const onSearch = (search: TokenizingFieldValue[]) => {\n    history.push({\n      search: `?${querystring.stringify({ q: stringFromValue(search) })}`\n    });\n  };\n\n  const onClickSolid = (defName: string) => {\n    history.push(`/solids/${defName}?${querystring.stringify({ q })}`);\n  };\n\n  React.useEffect(() => {\n    // If the user has typed in a search that brings us to a single result, autoselect it\n    if (filtered.length === 1 && (!selected || filtered[0] !== selected)) {\n      onClickSolid(filtered[0].definition.name);\n    }\n\n    // If the user has clicked a type, translate it into a search\n    if (typeof typeExplorer === \"string\") {\n      onSearch([...search, { token: \"input\", value: typeExplorer }]);\n    }\n  });\n\n  return (\n    <Wrapper>\n      <SplitPanelChildren\n        identifier={\"solids\"}\n        leftInitialPercent={40}\n        leftMinWidth={420}\n        left={\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"100%\"\n            }}\n          >\n            <div\n              style={{\n                padding: \"15px 10px\",\n                borderBottom: `1px solid ${Colors.LIGHT_GRAY2}`\n              }}\n            >\n              <TokenizingField\n                values={search}\n                onChange={search => onSearch(search)}\n                suggestionProviders={suggestions}\n                placeholder={\"Filter by name or input/output type...\"}\n              />\n            </div>\n            <SolidListScrollContainer>\n              {filtered\n                .sort((a, b) =>\n                  a.definition.name.localeCompare(b.definition.name)\n                )\n                .map(s => (\n                  <SolidListItem\n                    key={s.definition.name}\n                    selected={s === selected}\n                    onClick={() => onClickSolid(s.definition.name)}\n                  >\n                    <SolidName>{s.definition.name}</SolidName>\n                    <SolidTypeSignature definition={s.definition} />\n                  </SolidListItem>\n                ))}\n            </SolidListScrollContainer>\n          </div>\n        }\n        right={\n          selected ? (\n            <SolidDetailScrollContainer>\n              <UsedSolidDetails\n                name={selected.definition.name}\n                onClickInvocation={({ pipelineName, handleID }) =>\n                  history.push(\n                    `/pipeline/${pipelineName}/${handleID.split(\".\").join(\"/\")}`\n                  )\n                }\n              />\n            </SolidDetailScrollContainer>\n          ) : (\n            <NonIdealState\n              title=\"No solid selected\"\n              description=\"Select a solid to see its definition and invocations.\"\n            />\n          )\n        }\n      />\n    </Wrapper>\n  );\n};\n\nconst UsedSolidDetails: React.FunctionComponent<{\n  name: string;\n  onClickInvocation: (arg: SidebarSolidInvocationInfo) => void;\n}> = ({ name, onClickInvocation }) => {\n  const queryResult = useQuery<UsedSolidDetailsQuery>(\n    USED_SOLID_DETAILS_QUERY,\n    {\n      variables: { name }\n    }\n  );\n\n  return (\n    <Loading queryResult={queryResult}>\n      {({ usedSolid }) => {\n        if (!usedSolid) {\n          return null;\n        }\n\n        return (\n          <>\n            <SolidCard definition={usedSolid.definition} />\n            <SidebarSolidDefinition\n              definition={usedSolid.definition}\n              showingSubsolids={false}\n              onClickInvocation={onClickInvocation}\n              getInvocations={() => {\n                return usedSolid.invocations.map(i => ({\n                  handleID: i.solidHandle.handleID,\n                  pipelineName: i.pipeline.name\n                }));\n              }}\n            />\n          </>\n        );\n      }}\n    </Loading>\n  );\n};\n\nexport const SOLIDS_ROOT_QUERY = gql`\n  query SolidsRootQuery {\n    usedSolids {\n      __typename\n      definition {\n        name\n        ...SolidTypeSignatureFragment\n      }\n      invocations {\n        __typename\n        pipeline {\n          name\n        }\n      }\n    }\n  }\n\n  ${SolidTypeSignature.fragments.SolidTypeSignatureFragment}\n`;\n\nexport const USED_SOLID_DETAILS_QUERY = gql`\n  query UsedSolidDetailsQuery($name: String!) {\n    usedSolid(name: $name) {\n      __typename\n      definition {\n        ...SolidCardSolidDefinitionFragment\n        ...SidebarSolidDefinitionFragment\n      }\n      invocations {\n        __typename\n        pipeline {\n          name\n        }\n        solidHandle {\n          handleID\n        }\n      }\n    }\n  }\n\n  ${SolidCard.fragments.SolidCardSolidDefinitionFragment}\n  ${SidebarSolidDefinition.fragments.SidebarSolidDefinitionFragment}\n`;\n\nconst SolidListItem = styled.div<{ selected: boolean }>`\n  background: ${({ selected }) => (selected ? Colors.BLUE3 : Colors.WHITE)};\n  color: ${({ selected }) => (selected ? Colors.WHITE : Colors.DARK_GRAY3)};\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  padding: 10px 15px;\n  user-select: none;\n  border-bottom: 1px solid ${Colors.LIGHT_GRAY2};\n  & > code.bp3-code {\n    color: ${({ selected }) => (selected ? Colors.WHITE : Colors.DARK_GRAY3)};\n    background: transparent;\n    padding: 5px 0 0 0;\n  }\n`;\n\nconst SolidListScrollContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n`;\n\nconst SolidDetailScrollContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n`;\n\nconst SolidName = styled.div`\n  flex: 1;\n  font-weight: 600;\n`;\n\nconst Wrapper = styled.div`\n  flex: 1 1;\n  display: flex;\n  flex-direction: row;\n  top: 0;\n`;\n","import * as React from \"react\";\nimport * as qs from \"query-string\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport {\n  Button,\n  Classes,\n  Colors,\n  Switch,\n  Icon,\n  Menu,\n  MenuItem,\n  MenuDivider,\n  Popover,\n  Tooltip,\n  Tag,\n  Intent\n} from \"@blueprintjs/core\";\nimport { HighlightedCodeBlock } from \"../HighlightedCodeBlock\";\nimport { RowColumn, RowContainer } from \"../ListComponents\";\nimport { RunStatus, titleForRun } from \"../runs/RunUtils\";\nimport { ScheduleFragment } from \"./types/ScheduleFragment\";\nimport { ScheduleStatus, ScheduleAttemptStatus } from \"../types/globalTypes\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport cronstrue from \"cronstrue\";\nimport gql from \"graphql-tag\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport styled from \"styled-components/macro\";\nimport { unixTimestampToString } from \"../Util\";\nimport { copyValue } from \"../DomUtils\";\n\nconst NUM_RUNS_TO_DISPLAY = 10;\n\nexport const ScheduleRow: React.FunctionComponent<{\n  schedule: ScheduleFragment;\n}> = ({ schedule }) => {\n  const {\n    id,\n    status,\n    scheduleDefinition,\n    logsPath,\n    attempts,\n    attemptsCount\n  } = schedule;\n  const {\n    name,\n    cronSchedule,\n    executionParamsString,\n    environmentConfigYaml\n  } = scheduleDefinition;\n  const executionParams = JSON.parse(executionParamsString);\n  const pipelineName = executionParams.selector.name;\n  const mode = executionParams.mode;\n\n  const [startSchedule] = useMutation(START_SCHEDULE_MUTATION);\n  const [stopSchedule] = useMutation(STOP_SCHEDULE_MUTATION);\n  const match = useRouteMatch(\"/schedules/:scheduleName\");\n\n  const mostRecentAttempt = attempts.length > 0 ? attempts[0] : null;\n  const mostRecentAttemptLogError = mostRecentAttempt\n    ? JSON.parse(mostRecentAttempt.jsonResult)\n    : null;\n\n  const getNaturalLanguageCronString = (cronSchedule: string) => {\n    try {\n      return cronstrue.toString(cronSchedule);\n    } catch {\n      return \"Invalid cron string\";\n    }\n  };\n\n  const displayName = match ? (\n    <ScheduleName>{name}</ScheduleName>\n  ) : (\n    <Link to={`/schedules/${name}`}>\n      <ScheduleName>{name}</ScheduleName>\n    </Link>\n  );\n\n  return (\n    <RowContainer key={name}>\n      <RowColumn style={{ maxWidth: 60, paddingLeft: 0, textAlign: \"center\" }}>\n        <Switch\n          checked={status === ScheduleStatus.RUNNING}\n          large={true}\n          innerLabelChecked=\"on\"\n          innerLabel=\"off\"\n          onChange={() => {\n            if (status === ScheduleStatus.RUNNING) {\n              stopSchedule({\n                variables: { scheduleName: name },\n                optimisticResponse: {\n                  stopRunningSchedule: {\n                    __typename: \"RunningScheduleResult\",\n                    schedule: {\n                      id: id,\n                      __typename: \"RunningSchedule\",\n                      status: ScheduleStatus.STOPPED\n                    }\n                  }\n                }\n              });\n            } else {\n              startSchedule({\n                variables: { scheduleName: name },\n                optimisticResponse: {\n                  startSchedule: {\n                    __typename: \"RunningScheduleResult\",\n                    schedule: {\n                      id: id,\n                      __typename: \"RunningSchedule\",\n                      status: ScheduleStatus.RUNNING\n                    }\n                  }\n                }\n              });\n            }\n          }}\n        />\n      </RowColumn>\n      <RowColumn style={{ flex: 1.4 }}>{displayName}</RowColumn>\n      <RowColumn>\n        <Link to={`/pipeline/${pipelineName}/`}>\n          <Icon icon=\"diagram-tree\" /> {pipelineName}\n        </Link>\n      </RowColumn>\n      <RowColumn\n        style={{\n          maxWidth: 150\n        }}\n      >\n        {cronSchedule ? (\n          <Tooltip\n            className={Classes.TOOLTIP_INDICATOR}\n            position={\"top\"}\n            content={cronSchedule}\n          >\n            {getNaturalLanguageCronString(cronSchedule)}\n          </Tooltip>\n        ) : (\n          \"-\"\n        )}\n      </RowColumn>\n      <RowColumn style={{ flex: 1 }}>\n        {attempts && attempts.length > 0\n          ? attempts.slice(0, NUM_RUNS_TO_DISPLAY).map((attempt, i) => (\n              <div\n                style={{\n                  display: \"inline-block\",\n                  cursor: \"pointer\",\n                  marginRight: 5\n                }}\n                key={i}\n              >\n                {attempt.run ? (\n                  <Link\n                    to={`/runs/${attempt.run.pipeline.name}/${attempt.run.runId}`}\n                  >\n                    <Tooltip\n                      position={\"top\"}\n                      content={titleForRun(attempt.run)}\n                      wrapperTagName=\"div\"\n                      targetTagName=\"div\"\n                    >\n                      <RunStatus status={attempt.run.status} />\n                    </Tooltip>\n                  </Link>\n                ) : (\n                  <span\n                    onClick={() =>\n                      showCustomAlert({\n                        title: \"Schedule Response\",\n                        body: (\n                          <>\n                            <HighlightedCodeBlock\n                              value={JSON.stringify(\n                                JSON.parse(attempt.jsonResult),\n                                null,\n                                2\n                              )}\n                              languages={[\"json\"]}\n                            />\n                          </>\n                        )\n                      })\n                    }\n                  >\n                    <Tooltip\n                      position={\"top\"}\n                      content=\"View scheduling error\"\n                      wrapperTagName=\"div\"\n                      targetTagName=\"div\"\n                    >\n                      <AttemptStatus status={attempt.status} />\n                    </Tooltip>\n                  </span>\n                )}\n              </div>\n            ))\n          : \"-\"}\n        {attemptsCount > NUM_RUNS_TO_DISPLAY && (\n          <Link\n            to={`/schedules/${encodeURIComponent(\n              schedule.scheduleDefinition.name\n            )}`}\n            style={{ verticalAlign: \"top\" }}\n          >\n            {\" \"}\n            +{attemptsCount - NUM_RUNS_TO_DISPLAY} more\n          </Link>\n        )}\n      </RowColumn>\n      <RowColumn style={{ flex: 1 }}>\n        {mostRecentAttempt\n          ? unixTimestampToString(mostRecentAttempt.time)\n          : \"-\"}\n\n        {mostRecentAttempt &&\n          mostRecentAttempt.status === ScheduleAttemptStatus.ERROR && (\n            <ErrorTag>\n              <Tag intent={Intent.WARNING}>\n                Latest run failed:\n                <ButtonLink\n                  onClick={() =>\n                    showCustomAlert({\n                      title: \"Error\",\n                      body: (\n                        <>\n                          <ErrorHeader>\n                            {mostRecentAttemptLogError.__typename}\n                          </ErrorHeader>\n                          <ErrorWrapper>\n                            <HighlightedCodeBlock\n                              value={JSON.stringify(\n                                mostRecentAttemptLogError,\n                                null,\n                                2\n                              )}\n                              languages={[\"json\"]}\n                            />\n                          </ErrorWrapper>\n                        </>\n                      )\n                    })\n                  }\n                >\n                  View Error\n                </ButtonLink>\n              </Tag>\n            </ErrorTag>\n          )}\n      </RowColumn>\n      <RowColumn\n        style={{\n          display: \"flex\",\n          alignItems: \"flex-start\",\n          flex: 1\n        }}\n      >\n        <div style={{ flex: 1 }}>\n          <div>{`Mode: ${mode}`}</div>\n        </div>\n        <Popover\n          content={\n            <Menu>\n              <MenuItem\n                text=\"View Configuration...\"\n                icon=\"share\"\n                onClick={() =>\n                  showCustomAlert({\n                    title: \"Config\",\n                    body: (\n                      <HighlightedCodeBlock\n                        value={environmentConfigYaml}\n                        languages={[\"yaml\"]}\n                      />\n                    )\n                  })\n                }\n              />\n              <MenuItem\n                text=\"Open in Execute Tab...\"\n                icon=\"edit\"\n                target=\"_blank\"\n                href={`/playground/setup?${qs.stringify({\n                  mode: executionParams.mode,\n                  config: environmentConfigYaml,\n                  solidSubset: executionParams.selector.solidSubset,\n                  pipeline: executionParams.selector.name\n                })}`}\n              />\n              <MenuDivider />\n              <MenuItem\n                text=\"Copy Path to Debug Logs\"\n                icon=\"clipboard\"\n                onClick={(e: React.MouseEvent<any>) => copyValue(e, logsPath)}\n              />\n            </Menu>\n          }\n          position={\"bottom\"}\n        >\n          <Button minimal={true} icon=\"chevron-down\" />\n        </Popover>\n      </RowColumn>\n    </RowContainer>\n  );\n};\n\nexport const ScheduleRowFragment = gql`\n  fragment ScheduleFragment on RunningSchedule {\n    id\n    scheduleDefinition {\n      name\n      executionParamsString\n      environmentConfigYaml\n      cronSchedule\n    }\n    logsPath\n    attempts(limit: $limit) {\n      run {\n        runId\n        pipeline {\n          name\n        }\n        status\n      }\n      time\n      jsonResult\n      status\n    }\n    attemptsCount\n    status\n  }\n`;\n\nconst ScheduleName = styled.pre`\n  margin: 0;\n`;\n\nconst ErrorHeader = styled.h3`\n  color: #b05c47;\n  font-weight: 400;\n  margin: 0.5em 0 0.25em;\n`;\n\nconst ErrorWrapper = styled.pre`\n  background-color: rgba(206, 17, 38, 0.05);\n  border: 1px solid #d17257;\n  border-radius: 3px;\n  max-width: 90vw;\n  padding: 1em 2em;\n`;\n\nconst ErrorTag = styled.div`\n  display: block;\n  margin-top: 5px;\n`;\n\nconst ButtonLink = styled.button`\n  color: #ffffff;\n  margin-left: 10px;\n  font-size: 12px;\n  background: none !important;\n  border: none;\n  padding: 0!important;\n  font-family: inherit;\n  cursor: pointer;\n  text-decoration: underline;\n  &: hover {\n    color: #cccccc;\n  }\n}\n`;\n\nconst START_SCHEDULE_MUTATION = gql`\n  mutation StartSchedule($scheduleName: String!) {\n    startSchedule(scheduleName: $scheduleName) {\n      schedule {\n        id\n        status\n      }\n    }\n  }\n`;\n\nconst STOP_SCHEDULE_MUTATION = gql`\n  mutation StopSchedule($scheduleName: String!) {\n    stopRunningSchedule(scheduleName: $scheduleName) {\n      schedule {\n        id\n        status\n      }\n    }\n  }\n`;\n\nexport const AttemptStatus = styled.div<{ status: ScheduleAttemptStatus }>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  align-self: center;\n  transition: background 200ms linear;\n  background: ${({ status }) =>\n    ({\n      [ScheduleAttemptStatus.SUCCESS]: Colors.GREEN2,\n      [ScheduleAttemptStatus.ERROR]: Colors.RED3,\n      [ScheduleAttemptStatus.SKIPPED]: Colors.GOLD3\n    }[status])};\n  &:hover {\n    background: ${({ status }) =>\n      ({\n        [ScheduleAttemptStatus.SUCCESS]: Colors.GREEN2,\n        [ScheduleAttemptStatus.ERROR]: Colors.RED3,\n        [ScheduleAttemptStatus.SKIPPED]: Colors.GOLD3\n      }[status])};\n  }\n`;\n","import * as React from \"react\";\n\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport {\n  Header,\n  Legend,\n  LegendColumn,\n  ScrollContainer\n} from \"../ListComponents\";\nimport { Query, QueryResult } from \"react-apollo\";\nimport {\n  SchedulesRootQuery,\n  SchedulesRootQuery_scheduler_Scheduler_runningSchedules\n} from \"./types/SchedulesRootQuery\";\nimport Loading from \"../Loading\";\nimport gql from \"graphql-tag\";\n\nimport { ScheduleRow, ScheduleRowFragment } from \"./ScheduleRow\";\n\nconst NUM_RUNS_TO_DISPLAY = 10;\n\nexport default class SchedulesRoot extends React.Component {\n  render() {\n    return (\n      <Query\n        query={SCHEDULES_ROOT_QUERY}\n        variables={{\n          limit: NUM_RUNS_TO_DISPLAY\n        }}\n        fetchPolicy=\"cache-and-network\"\n        pollInterval={15 * 1000}\n        partialRefetch={true}\n      >\n        {(queryResult: QueryResult<SchedulesRootQuery, any>) => (\n          <Loading queryResult={queryResult}>\n            {result => {\n              const { scheduler } = result;\n\n              if (scheduler.__typename === \"SchedulerNotDefinedError\") {\n                return (\n                  <ScrollContainer>\n                    <div style={{ marginTop: 100 }}>\n                      <NonIdealState\n                        icon=\"calendar\"\n                        title=\"Scheduler\"\n                        description=\"A scheduler is not defined for this repository.\"\n                      />\n                    </div>\n                  </ScrollContainer>\n                );\n              } else if (scheduler.__typename === \"PythonError\") {\n                return (\n                  <ScrollContainer>\n                    <div style={{ marginTop: 100 }}>\n                      <NonIdealState\n                        icon=\"error\"\n                        title=\"PythonError\"\n                        description={scheduler.message}\n                      />\n                    </div>\n                    <pre>{scheduler.stack}</pre>\n                  </ScrollContainer>\n                );\n              } else if (scheduler.runningSchedules.length === 0) {\n                return (\n                  <ScrollContainer>\n                    <div style={{ marginTop: 100 }}>\n                      <NonIdealState\n                        icon=\"calendar\"\n                        title=\"Scheduler\"\n                        description=\"No schedules to display.\"\n                      />\n                    </div>\n                  </ScrollContainer>\n                );\n              }\n\n              const sortedRunningSchedules = scheduler.runningSchedules.sort(\n                (a, b) =>\n                  a.scheduleDefinition.name.localeCompare(\n                    b.scheduleDefinition.name\n                  )\n              );\n\n              return (\n                <>\n                  <ScrollContainer>\n                    <ScheduleTable schedules={sortedRunningSchedules} />\n                  </ScrollContainer>\n                </>\n              );\n            }}\n          </Loading>\n        )}\n      </Query>\n    );\n  }\n}\n\ninterface ScheduleTableProps {\n  schedules: SchedulesRootQuery_scheduler_Scheduler_runningSchedules[];\n}\n\nconst ScheduleTable: React.FunctionComponent<ScheduleTableProps> = props => {\n  return (\n    <div>\n      <Header>{`Schedule (${props.schedules.length})`}</Header>\n      {props.schedules.length > 0 && (\n        <Legend>\n          <LegendColumn\n            style={{ maxWidth: 60, paddingRight: 2 }}\n          ></LegendColumn>\n          <LegendColumn style={{ flex: 1.4 }}>Schedule Name</LegendColumn>\n          <LegendColumn>Pipeline</LegendColumn>\n          <LegendColumn style={{ maxWidth: 150 }}>Schedule</LegendColumn>\n          <LegendColumn style={{ flex: 1 }}>Recent Attempts</LegendColumn>\n          <LegendColumn style={{ flex: 1 }}>Last Attempt</LegendColumn>\n          <LegendColumn style={{ flex: 1 }}>Execution Params</LegendColumn>\n        </Legend>\n      )}\n      {props.schedules.map(schedule => (\n        <ScheduleRow schedule={schedule} key={schedule.id} />\n      ))}\n    </div>\n  );\n};\n\nexport const SCHEDULES_ROOT_QUERY = gql`\n  query SchedulesRootQuery($limit: Int!) {\n    scheduler {\n      __typename\n      ... on SchedulerNotDefinedError {\n        message\n      }\n      ... on Scheduler {\n        runningSchedules {\n          ...ScheduleFragment\n        }\n      }\n      ... on SchedulerNotDefinedError {\n        message\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n\n  ${ScheduleRowFragment}\n`;\n","import * as React from \"react\";\n\nimport {\n  Header,\n  ScrollContainer,\n  RowColumn,\n  RowContainer\n} from \"../ListComponents\";\nimport { Query, QueryResult } from \"react-apollo\";\nimport {\n  ScheduleRootQuery,\n  ScheduleRootQuery_scheduleOrError_RunningSchedule_attemptList\n} from \"./types/ScheduleRootQuery\";\nimport Loading from \"../Loading\";\nimport gql from \"graphql-tag\";\nimport { match } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { ScheduleRow, ScheduleRowFragment, AttemptStatus } from \"./ScheduleRow\";\n\nimport { HighlightedCodeBlock } from \"../HighlightedCodeBlock\";\nimport { showCustomAlert } from \"../CustomAlertProvider\";\nimport { unixTimestampToString } from \"../Util\";\nimport { RunStatus } from \"../runs/RunUtils\";\nimport styled from \"styled-components/macro\";\n\nconst NUM_RUNS_TO_DISPLAY = 10;\nconst NUM_ATTEMPTS_TO_DISPLAY = 25;\n\ninterface IScheduleRootProps {\n  match: match<{ scheduleName: string }>;\n}\n\nexport class ScheduleRoot extends React.Component<IScheduleRootProps> {\n  render() {\n    const { scheduleName } = this.props.match.params;\n\n    return (\n      <Query\n        query={SCHEDULE_ROOT_QUERY}\n        variables={{\n          scheduleName,\n          limit: NUM_RUNS_TO_DISPLAY,\n          attemptsLimit: NUM_ATTEMPTS_TO_DISPLAY\n        }}\n        fetchPolicy=\"cache-and-network\"\n        pollInterval={15 * 1000}\n        partialRefetch={true}\n      >\n        {(queryResult: QueryResult<ScheduleRootQuery, any>) => (\n          <Loading queryResult={queryResult}>\n            {result => {\n              const { scheduleOrError } = result;\n\n              if (scheduleOrError.__typename === \"RunningSchedule\") {\n                return (\n                  <ScrollContainer>\n                    <Header>Schedules</Header>\n                    <ScheduleRow schedule={scheduleOrError} />\n                    <AttemptsTable attemptList={scheduleOrError.attemptList} />\n                  </ScrollContainer>\n                );\n              } else {\n                return null;\n              }\n            }}\n          </Loading>\n        )}\n      </Query>\n    );\n  }\n}\n\ninterface AttemptsTableProps {\n  attemptList: ScheduleRootQuery_scheduleOrError_RunningSchedule_attemptList[];\n}\n\nconst AttemptsTable: React.FunctionComponent<AttemptsTableProps> = ({\n  attemptList\n}) => {\n  if (!attemptList || !attemptList.length) {\n    return null;\n  }\n  return (\n    <>\n      <Header>Attempts</Header>\n      {attemptList.map((attempt, i) => (\n        <RowContainer key={i} style={{ marginBottom: 0, boxShadow: \"none\" }}>\n          <RowColumn\n            style={{\n              maxWidth: 30,\n              borderRight: 0,\n              padding: 7\n            }}\n          >\n            {attempt.run ? (\n              <RunStatus status={attempt.run.status} />\n            ) : (\n              <AttemptStatus status={attempt.status} />\n            )}\n          </RowColumn>\n          <RowColumn style={{ textAlign: \"left\", borderRight: 0 }}>\n            {attempt.run ? (\n              <div>\n                <Link to={`/runs/all/${attempt.run.runId}`}>\n                  {attempt.run.runId}\n                </Link>\n              </div>\n            ) : (\n              <div>\n                <ButtonLink\n                  onClick={() =>\n                    showCustomAlert({\n                      title: \"Schedule Response\",\n                      body: (\n                        <>\n                          <HighlightedCodeBlock\n                            value={JSON.stringify(\n                              JSON.parse(attempt.jsonResult),\n                              null,\n                              2\n                            )}\n                            languages={[\"json\"]}\n                          />\n                        </>\n                      )\n                    })\n                  }\n                >\n                  {\" \"}\n                  View error\n                </ButtonLink>\n              </div>\n            )}\n          </RowColumn>\n          <RowColumn\n            style={{ maxWidth: 200, paddingLeft: 0, textAlign: \"left\" }}\n          >\n            {unixTimestampToString(attempt.time)}\n          </RowColumn>\n        </RowContainer>\n      ))}\n    </>\n  );\n};\n\nexport const SCHEDULE_ROOT_QUERY = gql`\n  query ScheduleRootQuery(\n    $scheduleName: String!\n    $limit: Int!\n    $attemptsLimit: Int!\n  ) {\n    scheduleOrError(scheduleName: $scheduleName) {\n      ... on RunningSchedule {\n        ...ScheduleFragment\n        id\n        scheduleDefinition {\n          name\n        }\n        attemptList: attempts(limit: $attemptsLimit) {\n          time\n          jsonResult\n          status\n          run {\n            runId\n            status\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n\n  ${ScheduleRowFragment}\n`;\n\nconst ButtonLink = styled.button`\n  color: #106ba3;\n  margin-left: 10px;\n  font-size: 14px;\n  background: none !important;\n  border: none;\n  padding: 0 !important;\n  font-family: inherit;\n  cursor: pointer;\n  &: hover {\n    text-decoration: underline;\n  }\n}\n`;\n","import * as React from \"react\";\nimport { useQuery, useMutation, useApolloClient } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components/macro\";\nimport { Colors, Button, Icon, Tooltip, Intent } from \"@blueprintjs/core\";\nimport { WebsocketStatusContext } from \"./WebsocketStatus\";\nimport { ProcessStatusQuery } from \"./types/ProcessStatusQuery\";\nimport { ShortcutHandler } from \"./ShortcutHandler\";\nimport { SharedToaster } from \"./DomUtils\";\n\nexport const ProcessStatus: React.FunctionComponent = () => {\n  const apollo = useApolloClient();\n  const socketState = React.useContext(WebsocketStatusContext);\n  const [reload] = useMutation(RELOAD_DAGIT_MUTATION);\n  const [reloadStatus, setReloadStatus] = React.useState<\n    \"none\" | \"closing\" | \"waiting\"\n  >(\"none\");\n\n  const { data } = useQuery<ProcessStatusQuery>(PROCESS_STATUS_QUERY, {\n    fetchPolicy: \"cache-and-network\"\n  });\n\n  React.useEffect(() => {\n    if (socketState === WebSocket.CLOSED && reloadStatus === \"closing\") {\n      setReloadStatus(\"waiting\");\n    }\n    if (socketState === WebSocket.OPEN && reloadStatus === \"waiting\") {\n      setReloadStatus(\"none\");\n\n      // clears and re-fetches all the queries bound to the UI\n      apollo.resetStore();\n\n      // let the user know that something happened, since the refresh above is invisible\n      // unless the user changed something shown in the current view.\n      SharedToaster.show({\n        message: \"Repository Metadata Reloaded\",\n        timeout: 3000,\n        icon: \"refresh\",\n        intent: Intent.SUCCESS\n      });\n    }\n  }, [socketState, reloadStatus, apollo]);\n\n  if (!data) {\n    return <span />;\n  }\n\n  const onClick = () => {\n    setReloadStatus(\"closing\");\n    reload();\n  };\n  return (\n    <Label>\n      {data.reloadSupported && (\n        <ShortcutHandler\n          onShortcut={onClick}\n          shortcutLabel={`⌥R`}\n          shortcutFilter={e => e.keyCode === 82 && e.altKey}\n        >\n          <Tooltip\n            className=\"bp3-dark\"\n            hoverOpenDelay={500}\n            content={\n              <div style={{ maxWidth: 300 }}>\n                Re-launch the web process and reload the UI to reflect the\n                latest metadata, including DAG structure, solid names, type\n                names, etc.\n                <br />\n                <br />\n                Executing a pipeline run always uses the latest code on disk.\n              </div>\n            }\n          >\n            <Button\n              icon={<Icon icon=\"refresh\" iconSize={12} />}\n              disabled={reloadStatus !== \"none\"}\n              onClick={onClick}\n            />\n          </Tooltip>\n        </ShortcutHandler>\n      )}\n      <div style={{ height: 14 }} />\n      {data.instance && data.instance.info ? (\n        <Tooltip\n          hoverOpenDelay={500}\n          content={\n            <div style={{ whiteSpace: \"pre-wrap\" }}>{data.instance.info}</div>\n          }\n        >\n          {data.version}\n        </Tooltip>\n      ) : (\n        data.version\n      )}\n    </Label>\n  );\n};\n\nexport const PROCESS_STATUS_QUERY = gql`\n  query ProcessStatusQuery {\n    version\n    reloadSupported\n    instance {\n      info\n    }\n  }\n`;\n\nconst RELOAD_DAGIT_MUTATION = gql`\n  mutation ReloadDagitMutation {\n    reloadDagit\n  }\n`;\n\nconst Label = styled.span`\n  color: ${Colors.LIGHT_GRAY1};\n  font-size: 0.8rem;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n","import * as React from \"react\";\n\nimport { Colors, Icon } from \"@blueprintjs/core\";\n\nimport { Link } from \"react-router-dom\";\nimport { Route } from \"react-router\";\nimport { ProcessStatus } from \"./ProcessStatus\";\nimport { WebsocketStatus } from \"./WebsocketStatus\";\nimport navBarImage from \"./images/nav-logo-icon.png\";\nimport styled from \"styled-components/macro\";\nimport { PipelineNamesContext } from \"./PipelineNamesContext\";\nimport { ShortcutHandler } from \"./ShortcutHandler\";\n\nconst LAST_PIPELINE = \"last-pipeline\";\nconst KEYCODE_FOR_1 = 49;\n\nexport const LeftNav = () => {\n  const pipelineNames = React.useContext(PipelineNamesContext);\n\n  return (\n    <Route\n      path=\"/:tab?/:pipelineSelector?\"\n      render={({ match: { params }, history }) => {\n        const { tab } = params;\n\n        // When you click the Pipeline tab, navigate to the last pipeline you've\n        // viewed by storing a small amount of state in localStorage.\n        if (tab === \"pipeline\") {\n          localStorage.setItem(LAST_PIPELINE, params.pipelineSelector);\n        }\n\n        let pipelineSelector = localStorage.getItem(LAST_PIPELINE);\n        if (!pipelineSelector) {\n          pipelineSelector = `${pipelineNames[0]}:`;\n        }\n        if (\n          pipelineNames &&\n          !pipelineNames.includes(pipelineSelector.split(\":\")[0])\n        ) {\n          pipelineSelector = `${pipelineNames[0]}:`;\n        }\n\n        const TABS = [\n          {\n            to: `/pipeline/${pipelineSelector}/`,\n            tab: `pipeline`,\n            icon: <Icon icon=\"diagram-tree\" iconSize={30} />,\n            label: \"Pipelines\"\n          },\n          {\n            to: `/solids`,\n            tab: `solids`,\n            icon: <Icon icon=\"git-commit\" iconSize={30} />,\n            label: \"Solids\"\n          },\n          {\n            to: `/runs`,\n            tab: `runs`,\n            icon: <Icon icon=\"history\" iconSize={30} />,\n            label: \"Runs\"\n          },\n          {\n            to: `/playground`,\n            tab: `playground`,\n            icon: <Icon icon=\"manually-entered-data\" iconSize={30} />,\n            label: \"Playground\"\n          },\n          {\n            to: `/schedules`,\n            tab: `schedules`,\n            icon: <Icon icon=\"calendar\" iconSize={30} />,\n            label: \"Schedules\"\n          }\n        ];\n\n        return (\n          <Tabs>\n            <LogoContainer onClick={() => history.push(\"/\")}>\n              <img src={navBarImage} style={{ height: 40 }} alt=\"logo\" />\n              <LogoWebsocketStatus />\n            </LogoContainer>\n            {TABS.map((t, i) => (\n              <ShortcutHandler\n                key={t.tab}\n                onShortcut={() => history.push(t.to)}\n                shortcutLabel={`⌥${i + 1}`}\n                shortcutFilter={e =>\n                  e.keyCode === KEYCODE_FOR_1 + i && e.altKey\n                }\n              >\n                <Tab to={t.to} className={tab === t.tab ? \"active\" : \"\"}>\n                  {t.icon}\n                  <TabLabel>{t.label}</TabLabel>\n                </Tab>\n              </ShortcutHandler>\n            ))}\n            <div style={{ flex: 1 }} />\n            <ProcessStatus />\n          </Tabs>\n        );\n      }}\n    />\n  );\n};\n\nconst LogoWebsocketStatus = styled(WebsocketStatus)`\n  position: absolute;\n  top: 28px;\n  right: 12px;\n`;\n\nconst Tabs = styled.div`\n  width: 74px;\n  height: 100%;\n  display: flex;\n  flex-shrink: 0;\n  flex-direction: column;\n  justify-content: center;\n  background: ${Colors.DARK_GRAY2};\n  border-right: 1px solid ${Colors.DARK_GRAY5};\n  padding: 14px 0;\n`;\n\nconst Tab = styled(Link)`\n  color: ${Colors.LIGHT_GRAY1};\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 4px 0;\n  margin: 8px 0;\n  align-items: center;\n  outline: 0;\n  &:hover {\n    color: ${Colors.WHITE};\n    text-decoration: none;\n  }\n  &.active {\n    color: ${Colors.WHITE};\n    border-left: 4px solid ${Colors.COBALT3};\n  }\n`;\n\nconst TabLabel = styled.div`\n  font-size: 11px;\n  margin-top: 6px;\n  text-decoration: none;\n  white-space: nowrap;\n  text-decoration: none;\n`;\n\nconst LogoContainer = styled.div`\n  padding: 0 16px;\n  margin-bottom: 10px;\n  position: relative;\n  cursor: pointer;\n  &:hover {\n    img {\n      filter: brightness(110%);\n    }\n  }\n`;\n","import * as React from \"react\";\n\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\n\nimport CustomAlertProvider from \"./CustomAlertProvider\";\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { PipelineExecutionRoot } from \"./execute/PipelineExecutionRoot\";\nimport { PipelineExecutionSetupRoot } from \"./execute/PipelineExecutionSetupRoot\";\nimport { PipelineNamesContext } from \"./PipelineNamesContext\";\nimport PipelineExplorerRoot from \"./PipelineExplorerRoot\";\nimport PythonErrorInfo from \"./PythonErrorInfo\";\nimport { RootPipelinesQuery } from \"./types/RootPipelinesQuery\";\nimport { RunRoot } from \"./runs/RunRoot\";\nimport { RunsRoot } from \"./runs/RunsRoot\";\nimport { SolidsRoot } from \"./solids/SolidsRoot\";\nimport SchedulesRoot from \"./schedules/SchedulesRoot\";\nimport { ScheduleRoot } from \"./schedules/ScheduleRoot\";\nimport { LeftNav } from \"./LeftNav\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"react-apollo\";\n\nfunction extractData(result?: RootPipelinesQuery) {\n  if (!result || !result.pipelinesOrError) {\n    return { pipelines: [], error: null };\n  }\n  if (result.pipelinesOrError.__typename === \"PipelineConnection\") {\n    return {\n      pipelines: result.pipelinesOrError.nodes.map(p => p.name),\n      error: null\n    };\n  } else {\n    return { pipelines: [], error: result.pipelinesOrError };\n  }\n}\n\nconst AppRoutes = () => (\n  <Switch>\n    <Route path=\"/runs/all/:runId\" component={RunRoot} />\n    <Route path=\"/runs/:pipelineName/:runId\" component={RunRoot} />\n    <Route path=\"/runs\" component={RunsRoot} exact={true} />\n    <Route path=\"/solids/:name?\" component={SolidsRoot} />\n\n    <Route path=\"/playground/setup\" component={PipelineExecutionSetupRoot} />\n    <Route path=\"/playground\" component={PipelineExecutionRoot} />\n    {/* Capture solid subpath in a regex match */}\n    <Route path=\"/pipeline/(/?.*)\" component={PipelineExplorerRoot} />\n\n    <Route path=\"/schedules\" component={SchedulesRoot} />\n    <Route path=\"/schedules/:scheduleName\" component={ScheduleRoot} />\n\n    <PipelineNamesContext.Consumer>\n      {names =>\n        names.length ? (\n          <Redirect to={`/pipeline/${names[0]}/`} />\n        ) : (\n          <Route render={() => <NonIdealState title=\"No pipelines\" />} />\n        )\n      }\n    </PipelineNamesContext.Consumer>\n  </Switch>\n);\n\nexport const App: React.FunctionComponent = () => {\n  const result = useQuery<RootPipelinesQuery>(ROOT_PIPELINES_QUERY, {\n    fetchPolicy: \"cache-and-network\"\n  });\n  const { pipelines, error } = extractData(result.data);\n\n  return (\n    <BrowserRouter>\n      {error ? (\n        <PythonErrorInfo\n          contextMsg={`${error.__typename} encountered when loading pipelines:`}\n          error={error}\n          centered={true}\n        />\n      ) : (\n        <PipelineNamesContext.Provider value={pipelines}>\n          <div style={{ display: \"flex\", height: \"100%\" }}>\n            <LeftNav />\n            <AppRoutes />\n            <CustomAlertProvider />\n          </div>\n        </PipelineNamesContext.Provider>\n      )}\n    </BrowserRouter>\n  );\n};\n\nexport const ROOT_PIPELINES_QUERY = gql`\n  query RootPipelinesQuery {\n    pipelinesOrError {\n      __typename\n      ...PythonErrorFragment\n      ... on PipelineConnection {\n        nodes {\n          name\n        }\n      }\n    }\n  }\n\n  ${PythonErrorInfo.fragments.PythonErrorFragment}\n`;\n","import {\n  InMemoryCache,\n  IntrospectionFragmentMatcher,\n  defaultDataIdFromObject\n} from \"apollo-cache-inmemory\";\n// this is a require cause otherwise it breaks\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { __schema } = require(\"./filteredSchema.generated.json\");\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData: {\n    __schema\n  }\n});\n\nconst AppCache = new InMemoryCache({\n  addTypename: true,\n  fragmentMatcher,\n  cacheRedirects: {\n    Query: {\n      pipeline: (_, args, { getCacheKey }) => {\n        return getCacheKey({ __typename: \"Pipeline\", name: args.name });\n      },\n      type: (_, args) => {\n        // That's \"IdValue\" from 'apollo-utilities'.\n        // Magical thing to make it work with interfaces, getCacheKey gets\n        // incorrect typename and breaks\n        return {\n          type: \"id\",\n          generated: true,\n          id: `Type.${args.typeName}`\n        };\n      }\n    }\n  },\n  dataIdFromObject: (object: any) => {\n    if (object.name && object.__typename === \"Pipeline\") {\n      return `${object.__typename}.${object.name}`;\n    } else if (object.runId && object.__typename === \"PipelineRun\") {\n      return `${object.__typename}.${object.runId}`;\n    } else if (\n      object.name &&\n      (object.__typename === \"RegularType\" ||\n        object.__typename === \"CompositeType\")\n    ) {\n      return `Type.${object.name}`;\n    } else {\n      return defaultDataIdFromObject(object);\n    }\n  }\n});\n\nexport default AppCache;\n","import * as React from \"react\";\nimport { Toaster, Position, Intent } from \"@blueprintjs/core\";\nimport { ErrorResponse, onError } from \"apollo-link-error\";\nimport { GraphQLError } from \"graphql\";\nimport { showCustomAlert } from \"./CustomAlertProvider\";\n\ninterface DagsterGraphQLError extends GraphQLError {\n  stack_trace: string[];\n}\ninterface DagsterErrorResponse extends ErrorResponse {\n  graphQLErrors?: ReadonlyArray<DagsterGraphQLError>;\n}\n\nconst ErrorToaster = Toaster.create({ position: Position.TOP_RIGHT });\n\nexport const AppErrorLink = () => {\n  return onError((response: DagsterErrorResponse) => {\n    if (response.graphQLErrors) {\n      response.graphQLErrors.map(error => {\n        const message = error.path ? (\n          <div>\n            Unexpected GraphQL error\n            <AppStackTraceLink error={error} />\n          </div>\n        ) : (\n          `[GraphQL error] ${error.message}`\n        );\n        if (error.path) {\n        }\n        ErrorToaster.show({ message, intent: Intent.DANGER });\n        console.error(\"[GraphQL error]\", error);\n        return null;\n      });\n    }\n    if (response.networkError) {\n      ErrorToaster.show({\n        message: `[Network error] ${response.networkError.message}`,\n        intent: Intent.DANGER\n      });\n      console.error(\"[Network error]\", response.networkError);\n    }\n  });\n};\n\nconst AppStackTraceLink = ({ error }: { error: DagsterGraphQLError }) => {\n  const title = \"Error\";\n  const stackTraceContent = error.stack_trace ? (\n    <>\n      {\"\\n\\n\"}\n      Stack Trace:\n      {\"\\n\"}\n      {error.stack_trace.join(\"\")}\n    </>\n  ) : null;\n  const instructions = (\n    <div\n      style={{\n        fontFamily: \"Open Sans, sans-serif\",\n        fontSize: 16,\n        marginBottom: 30\n      }}\n    >\n      You hit an unexpected error while fetching data from Dagster.\n      <br />\n      <br />\n      If you have a minute, consider reporting this error either by{\" \"}\n      <a\n        href=\"https://github.com/dagster-io/dagster/issues/\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        filing a Github issue\n      </a>{\" \"}\n      or by{\" \"}\n      <a\n        href=\"https://dagster.slack.com/archives/CCCR6P2UR\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        messaging in the Dagster slack\n      </a>\n      . Use the <code>&quot;Copy&quot;</code> button below to include error\n      information that is helpful for the core development team to diagnose what\n      is happening and to improve Dagster in recovering from unexpected errors.\n    </div>\n  );\n\n  const body = (\n    <div>\n      {instructions}\n      <div\n        className=\"errorInfo\"\n        style={{\n          backgroundColor: \"rgba(206, 17, 38, 0.05)\",\n          border: \"1px solid #d17257\",\n          borderRadius: 3,\n          maxWidth: \"90vw\",\n          maxHeight: \"80vh\",\n          padding: \"1em 2em\",\n          overflow: \"auto\",\n          color: \"rgb(41, 50, 56)\",\n          fontFamily: \"Consolas, Menlo, monospace\",\n          fontSize: \"0.85em\",\n          whiteSpace: \"pre\",\n          overflowX: \"auto\"\n        }}\n      >\n        Message: {error.message}\n        {\"\\n\\n\"}\n        Path: {JSON.stringify(error.path)}\n        {\"\\n\\n\"}\n        Locations: {JSON.stringify(error.locations)}\n        {stackTraceContent}\n      </div>\n    </div>\n  );\n\n  return (\n    <span\n      style={{ cursor: \"pointer\", textDecoration: \"underline\", marginLeft: 30 }}\n      onClick={() =>\n        showCustomAlert({ title, body, copySelector: \".errorInfo\" })\n      }\n    >\n      View error info\n    </span>\n  );\n};\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createGlobalStyle } from \"styled-components/macro\";\nimport ApolloClient from \"apollo-client\";\nimport { ApolloLink } from \"apollo-link\";\nimport { ApolloProvider } from \"react-apollo\";\nimport { SubscriptionClient } from \"subscriptions-transport-ws\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { WebsocketStatusProvider } from \"./WebsocketStatus\";\nimport { App } from \"./App\";\nimport AppCache from \"./AppCache\";\n\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/table/lib/css/table.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport { patchCopyToRemoveZeroWidthUnderscores } from \"./Util\";\nimport { WEBSOCKET_URI } from \"./DomUtils\";\nimport { AppErrorLink } from \"./AppError\";\n\n// The solid sidebar and other UI elements insert zero-width spaces so solid names\n// break on underscores rather than arbitrary characters, but we need to remove these\n// when you copy-paste so they don't get pasted into editors, etc.\npatchCopyToRemoveZeroWidthUnderscores();\n\nconst GlobalStyle = createGlobalStyle`\n  * {\n    box-sizing: border-box;\n  }\n\n  html, body, #root {\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    display: flex;\n    flex: 1 1;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: sans-serif;\n  }\n`;\n\nconst websocketClient = new SubscriptionClient(WEBSOCKET_URI, {\n  reconnect: true,\n  lazy: true\n});\n\nconst client = new ApolloClient({\n  cache: AppCache,\n  link: ApolloLink.from([AppErrorLink(), new WebSocketLink(websocketClient)])\n});\n\nReactDOM.render(\n  <WebsocketStatusProvider websocket={websocketClient}>\n    <GlobalStyle />\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>\n  </WebsocketStatusProvider>,\n  document.getElementById(\"root\") as HTMLElement\n);\n","import styled from \"styled-components/macro\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { IStepState } from \"../RunMetadataProvider\";\n\nexport const ExecutionStateDot = styled.div<{ state: IStepState }>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  transition: background 200ms linear;\n  background: ${({ state }) =>\n    ({\n      [IStepState.WAITING]: Colors.GRAY1,\n      [IStepState.RUNNING]: Colors.GRAY3,\n      [IStepState.SUCCEEDED]: Colors.GREEN2,\n      [IStepState.SKIPPED]: Colors.GOLD3,\n      [IStepState.FAILED]: Colors.RED3\n    }[state])};\n  &:hover {\n    background: ${({ state }) =>\n      ({\n        [IStepState.WAITING]: Colors.GRAY1,\n        [IStepState.RUNNING]: Colors.GRAY3,\n        [IStepState.SUCCEEDED]: Colors.GREEN2,\n        [IStepState.SKIPPED]: Colors.GOLD3,\n        [IStepState.FAILED]: Colors.RED5\n      }[state])};\n  }\n`;\n","import * as React from \"react\";\nimport { Colors, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport gql from \"graphql-tag\";\nimport styled, { createGlobalStyle } from \"styled-components/macro\";\nimport { Spinner, Intent } from \"@blueprintjs/core\";\nimport Ansi from \"ansi-to-react\";\nimport { IStepState } from \"../RunMetadataProvider\";\nimport { ExecutionStateDot } from \"./ExecutionStateDot\";\nimport { ROOT_SERVER_URI } from \"../DomUtils\";\nimport { ComputeLogContentFileFragment } from \"./types/ComputeLogContentFileFragment\";\n\ninterface IComputeLogContentProps {\n  runState: IStepState;\n  onRequestClose: () => void;\n  stdout: ComputeLogContentFileFragment;\n  stderr: ComputeLogContentFileFragment;\n  maxBytes: number;\n}\n\nconst TRUNCATE_PREFIX = \"\\u001b[33m...logs truncated...\\u001b[39m\\n\";\nconst SCROLLER_LINK_TIMEOUT_MS = 3000;\n\nexport class ComputeLogContent extends React.Component<\n  IComputeLogContentProps\n> {\n  static fragments = {\n    ComputeLogContentFragment: gql`\n      fragment ComputeLogContentFileFragment on ComputeLogFile {\n        path\n        cursor\n        data\n        downloadUrl\n      }\n    `\n  };\n\n  private timeout: number;\n  private stdout = React.createRef<ScrollContainer>();\n  private stderr = React.createRef<ScrollContainer>();\n\n  state = {\n    selected: \"stderr\",\n    showScrollToTop: false\n  };\n\n  close = (e: React.SyntheticEvent) => {\n    e.stopPropagation();\n    this.props.onRequestClose();\n  };\n\n  onScrollUp = (position: number) => {\n    this.cancelHide();\n\n    if (!position) {\n      this.hide();\n    } else {\n      this.setState({ showScrollToTop: true });\n      this.scheduleHide();\n    }\n  };\n\n  onScrollDown = (_position: number) => {\n    this.hide();\n  };\n\n  hide = () => {\n    this.setState({ showScrollToTop: false });\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = 0;\n    }\n  };\n\n  scheduleHide = () => {\n    this.timeout = window.setTimeout(this.hide, SCROLLER_LINK_TIMEOUT_MS);\n  };\n\n  cancelHide = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = 0;\n    }\n  };\n\n  scrollToTop = () => {\n    const { selected } = this.state;\n    const ref = selected === \"stdout\" ? this.stdout : this.stderr;\n    ref.current && ref.current.scrollToTop();\n  };\n\n  getDownloadUrl() {\n    const { stdout, stderr } = this.props;\n    const { selected } = this.state;\n    const logData = selected === \"stdout\" ? stdout : stderr;\n    const { downloadUrl } = logData;\n    const isRelativeUrl = (x?: string) => x && x.startsWith(\"/\");\n    return isRelativeUrl(downloadUrl)\n      ? ROOT_SERVER_URI + downloadUrl\n      : downloadUrl;\n  }\n\n  renderScrollToTop() {\n    const { showScrollToTop } = this.state;\n\n    if (!showScrollToTop) {\n      return null;\n    }\n\n    return (\n      <ScrollToast>\n        <ScrollToTop\n          onClick={() => this.scrollToTop()}\n          onMouseOver={this.cancelHide}\n          onMouseOut={this.scheduleHide}\n        >\n          <Icon icon={IconNames.ARROW_UP} style={{ marginRight: 10 }} />\n          Scroll to top\n        </ScrollToTop>\n      </ScrollToast>\n    );\n  }\n\n  renderStatus() {\n    const { runState } = this.props;\n    if (runState === IStepState.RUNNING) {\n      return <Spinner intent={Intent.NONE} size={11} />;\n    }\n    return (\n      <ExecutionStateDot\n        state={runState}\n        title={`${runState[0].toUpperCase()}${runState.substr(1)}`}\n      />\n    );\n  }\n\n  renderContent(ioType: string, content: string) {\n    const isTruncated =\n      Buffer.byteLength(content, \"utf8\") >= this.props.maxBytes;\n\n    if (isTruncated) {\n      const nextLine = content.indexOf(\"\\n\") + 1;\n      const truncated =\n        nextLine < content.length ? content.slice(nextLine) : content;\n      content = TRUNCATE_PREFIX + truncated;\n    }\n\n    const warning = isTruncated ? (\n      <FileWarning>\n        <Icon\n          icon={IconNames.WARNING_SIGN}\n          style={{ marginRight: 10, color: Colors.ORANGE5 }}\n        />\n        This log has exceeded the 5MB limit.{\" \"}\n        <a href={this.getDownloadUrl()} download>\n          Download the full log file\n        </a>\n        .\n      </FileWarning>\n    ) : null;\n\n    const ref = ioType === \"stdout\" ? this.stdout : this.stderr;\n    const isSelected = this.state.selected === ioType;\n    return (\n      <FileContent isSelected={isSelected}>\n        {warning}\n        <RelativeContainer>\n          <LogContent\n            isSelected={isSelected}\n            content={content}\n            onScrollUp={this.onScrollUp}\n            onScrollDown={this.onScrollDown}\n            ref={ref}\n          />\n        </RelativeContainer>\n      </FileContent>\n    );\n  }\n\n  select = (selected: string) => {\n    this.setState({ selected });\n    this.hide();\n  };\n\n  render() {\n    const { stdout, stderr } = this.props;\n    const { selected } = this.state;\n\n    const logData = selected === \"stdout\" ? stdout : stderr;\n    if (!logData) {\n      return null;\n    }\n\n    return (\n      <Container>\n        <FileContainer>\n          <FileHeader>\n            <Row>\n              <Tab\n                selected={selected === \"stderr\"}\n                onClick={() => this.select(\"stderr\")}\n              >\n                stderr\n              </Tab>\n              <Tab\n                selected={selected === \"stdout\"}\n                onClick={() => this.select(\"stdout\")}\n              >\n                stdout\n              </Tab>\n            </Row>\n            <Row>\n              {this.renderStatus()}\n              <Link\n                aria-label=\"Download link\"\n                className=\"bp3-button bp3-minimal bp3-icon-download\"\n                href={this.getDownloadUrl()}\n                download\n              >\n                <LinkText>Download {selected}</LinkText>\n              </Link>\n              <button\n                onClick={this.close}\n                className=\"bp3-dialog-close-button bp3-button bp3-minimal bp3-icon-cross\"\n              ></button>\n            </Row>\n          </FileHeader>\n          {this.renderScrollToTop()}\n          {this.renderContent(\"stdout\", (stdout && stdout.data) || \"\")}\n          {this.renderContent(\"stderr\", (stderr && stderr.data) || \"\")}\n          <FileFooter>{logData.path}</FileFooter>\n        </FileContainer>\n      </Container>\n    );\n  }\n}\n\ninterface IScrollContainerProps {\n  content: string;\n  isSelected?: boolean;\n  className?: string;\n  onScrollUp?: (position: number) => void;\n  onScrollDown?: (position: number) => void;\n}\n\nclass ScrollContainer extends React.Component<IScrollContainerProps> {\n  private container = React.createRef<HTMLDivElement>();\n  private lastScroll = 0;\n\n  componentDidMount() {\n    this.scrollToBottom();\n    if (this.container.current) {\n      this.container.current.focus();\n      this.container.current.addEventListener(\"scroll\", this.onScroll);\n    }\n  }\n\n  getSnapshotBeforeUpdate() {\n    if (!this.container.current) {\n      return false;\n    }\n    const { scrollHeight, scrollTop, offsetHeight } = this.container.current;\n    const shouldScroll = offsetHeight + scrollTop >= scrollHeight;\n    return shouldScroll;\n  }\n\n  componentDidUpdate(_props: any, _state: any, shouldScroll: boolean) {\n    if (shouldScroll) {\n      this.scrollToBottom();\n    }\n    if (this.props.isSelected && !_props.isSelected) {\n      this.container.current && this.container.current.focus();\n    }\n  }\n\n  onScroll = () => {\n    if (!this.container.current || !this.props.isSelected) {\n      return;\n    }\n    const { onScrollUp, onScrollDown } = this.props;\n\n    const { scrollHeight, scrollTop, offsetHeight } = this.container.current;\n    const position = scrollTop / (scrollHeight - offsetHeight);\n    if (this.container.current.scrollTop < this.lastScroll) {\n      onScrollUp && onScrollUp(position);\n    } else {\n      onScrollDown && onScrollDown(position);\n    }\n    this.lastScroll = this.container.current.scrollTop;\n  };\n\n  focus() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.focus();\n  }\n\n  scrollToBottom() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = node.scrollHeight - node.offsetHeight;\n  }\n\n  scrollToTop() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = 0;\n    node.focus();\n  }\n\n  render() {\n    const { content, className } = this.props;\n\n    if (!content) {\n      return (\n        <div className={className} ref={this.container}>\n          <ContentContainer\n            style={{ justifyContent: \"center\", alignItems: \"center\" }}\n          >\n            No output\n          </ContentContainer>\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className={className}\n        style={{ outline: \"none\" }}\n        ref={this.container}\n        tabIndex={0}\n      >\n        <ContentContainer>\n          <LineNumbers content={content} />\n          <Content>\n            <SolarizedColors />\n            <Ansi linkify={false} useClasses>\n              {content}\n            </Ansi>\n          </Content>\n        </ContentContainer>\n      </div>\n    );\n  }\n}\n\nconst LineNumbers = (props: IScrollContainerProps) => {\n  const { content } = props;\n  if (!content) {\n    return null;\n  }\n  const matches = content.match(/\\n/g);\n  const count = matches ? matches.length : 0;\n  return (\n    <LineNumberContainer>\n      {Array.from(Array(count), (_, i) => (\n        <div key={i}>{String(i + 1)}</div>\n      ))}\n    </LineNumberContainer>\n  );\n};\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  margin-left: 5px;\n  align-items: center;\n`;\nconst LinkText = styled.span`\n  height: 1px;\n  width: 1px;\n  position: absolute;\n  overflow: hidden;\n  top: -10px;\n`;\nconst Link = styled.a`\n  margin-left: 10px;\n  ::before {\n    margin: 0 !important;\n  }\n`;\nconst Container = styled.div`\n  background-color: #333333;\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n`;\nconst FileContainer = styled.div`\n  flex: 1;\n  height: 100%;\n  position: relative;\n  &:first-child {\n    border-right: 0.5px solid #5c7080;\n  }\n`;\nconst FileHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  background-color: #444444;\n  border-bottom: 0.5px solid #5c7080;\n  color: ${({ color }) => color || \"#ffffff\"};\n  font-weight: 600;\n  padding: 0 10px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n`;\nconst FileFooter = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 30px;\n  border-top: 0.5px solid #5c7080;\n  color: #aaaaaa;\n  padding: 2px 5px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 0.85em;\n`;\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  min-height: 100%;\n`;\nconst Content = styled.div`\n  padding: 10px;\n`;\nconst LineNumberContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  border-right: 1px solid #5c7080;\n  padding: 10px 10px 10px 20px;\n  margin-right: 5px;\n  background-color: #333333;\n  opacity: 0.8;\n  color: #858585;\n  min-height: 100%;\n`;\nconst SolarizedColors = createGlobalStyle`\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n`;\nconst Tab = styled.div`\n  background-color: ${({ selected }: { selected: boolean }) =>\n    selected ? \"#333333\" : \"#444444\"};\n  cursor: pointer;\n  height: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 150px;\n  margin-right: 1px;\n  margin-bottom: ${({ selected }: { selected: boolean }) =>\n    selected ? \"-10px\" : \"-9px\"};\n  border-top-right-radius: 5px;\n  border-top-left-radius: 5px;\n  border-top: 0.5px solid\n    ${({ selected }: { selected: boolean }) =>\n      selected ? \"#5c7080\" : \"transparent\"};\n  border-left: 0.5px solid\n    ${({ selected }: { selected: boolean }) =>\n      selected ? \"#5c7080\" : \"transparent\"};\n  border-right: 0.5px solid\n    ${({ selected }: { selected: boolean }) =>\n      selected ? \"#5c7080\" : \"transparent\"};\n  &:hover {\n    border-top: 0.5px solid #5c7080;\n    border-left: 0.5px solid #5c7080;\n    border-right: 0.5px solid #5c7080;\n    height: ${({ selected }: { selected: boolean }) =>\n      selected ? \"30px\" : \"28px\"};\n  }\n`;\n\nconst FileContent = styled.div`\n  position: absolute;\n  top: 40px;\n  bottom: 30px;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  ${({ isSelected }: { isSelected: boolean }) =>\n    isSelected ? null : \"visibility: hidden;\"}\n`;\nconst RelativeContainer = styled.div`\n  flex: 1;\n  position: relative;\n`;\nconst LogContent = styled(ScrollContainer)`\n  color: #eeeeee;\n  font-family: Consolas, Menlo, monospace;\n  white-space: pre;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\nconst FileWarning = styled.div`\n  background-color: #fffae3;\n  padding: 10px 20px;\n  margin: 20px 70px;\n  border-radius: 5px;\n`;\nconst ScrollToast = styled.div`\n  position: absolute;\n  top: 40px;\n  height: 30px;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  z-index: 1;\n`;\nconst ScrollToTop = styled.div`\n  background-color: black;\n  padding: 10px 20px;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  color: white;\n  border-bottom: 0.5px solid #5c7080;\n  border-left: 0.5px solid #5c7080;\n  border-right: 0.5px solid #5c7080;\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n","import * as React from \"react\";\nimport gql from \"graphql-tag\";\n\nimport { RunMetadataProviderMessageFragment } from \"./types/RunMetadataProviderMessageFragment\";\nimport { TempMetadataEntryFragment } from \"./types/TempMetadataEntryFragment\";\n\nexport enum IStepState {\n  WAITING = \"waiting\",\n  RUNNING = \"running\",\n  SUCCEEDED = \"succeeded\",\n  SKIPPED = \"skipped\",\n  FAILED = \"failed\"\n}\n\nexport enum IExpectationResultStatus {\n  PASSED = \"Passed\",\n  FAILED = \"Failed\"\n}\n\nexport enum IStepDisplayIconType {\n  SUCCESS = \"dot-success\",\n  FAILURE = \"dot-failure\",\n  PENDING = \"dot-pending\",\n  FILE = \"file\",\n  LINK = \"link\",\n  NONE = \"none\"\n}\n\nexport enum IStepDisplayActionType {\n  OPEN_IN_TAB = \"open-in-tab\",\n  COPY = \"copy\",\n  SHOW_IN_MODAL = \"show-in-modal\",\n  NONE = \"none\"\n}\n\ninterface IDisplayEventItem {\n  text: string; // shown in gray on the left\n  action: IStepDisplayActionType;\n  actionText: string; // shown after `text`, optionally with a click action\n  actionValue: string; // value passed to the click action\n}\n\nexport interface IStepDisplayEvent {\n  icon: IStepDisplayIconType;\n  text: string;\n  items: IDisplayEventItem[];\n}\n\nexport interface IExpectationResult extends IStepDisplayEvent {\n  status: IExpectationResultStatus;\n}\n\nexport interface IMaterialization extends IStepDisplayEvent {}\n\nexport interface IStepMetadata {\n  state: IStepState;\n  start?: number;\n  finish?: number;\n  transitionedAt: number;\n  expectationResults: IExpectationResult[];\n  materializations: IMaterialization[];\n}\n\nexport interface IRunMetadataDict {\n  startingProcessAt?: number;\n  startedProcessAt?: number;\n  startedPipelineAt?: number;\n  exitedAt?: number;\n  processId?: number;\n  initFailed?: boolean;\n  steps: {\n    [stepKey: string]: IStepMetadata;\n  };\n}\n\nfunction itemsForMetadataEntries(\n  metadataEntries: TempMetadataEntryFragment[]\n): IDisplayEventItem[] {\n  const items = [];\n  for (const metadataEntry of metadataEntries) {\n    switch (metadataEntry.__typename) {\n      case \"EventPathMetadataEntry\":\n        items.push({\n          text: metadataEntry.label,\n          actionText: \"[Copy Path]\",\n          action: IStepDisplayActionType.COPY,\n          actionValue: metadataEntry.path\n        });\n        break;\n      case \"EventJsonMetadataEntry\":\n        items.push({\n          text: metadataEntry.label,\n          actionText: \"[Show Metadata]\",\n          action: IStepDisplayActionType.SHOW_IN_MODAL,\n          // take JSON string, parse, and then pretty print\n          actionValue: JSON.stringify(\n            JSON.parse(metadataEntry.jsonString),\n            null,\n            2\n          )\n        });\n\n        break;\n      case \"EventUrlMetadataEntry\":\n        items.push({\n          text: metadataEntry.label,\n          actionText: \"[Open URL]\",\n          action: IStepDisplayActionType.OPEN_IN_TAB,\n          actionValue: metadataEntry.url\n        });\n\n        break;\n      case \"EventTextMetadataEntry\":\n        items.push({\n          text: metadataEntry.label,\n          actionText: metadataEntry.text,\n          action: IStepDisplayActionType.NONE,\n          actionValue: \"\"\n        });\n\n        break;\n      case \"EventMarkdownMetadataEntry\":\n        items.push({\n          text: metadataEntry.label,\n          actionText: \"[Show Metadata]\",\n          action: IStepDisplayActionType.SHOW_IN_MODAL,\n          actionValue: metadataEntry.mdStr\n        });\n\n        break;\n    }\n  }\n\n  return items;\n}\n\nexport function extractMetadataFromLogs(\n  logs: RunMetadataProviderMessageFragment[]\n): IRunMetadataDict {\n  const metadata: IRunMetadataDict = {\n    steps: {}\n  };\n\n  logs.forEach(log => {\n    if (log.__typename === \"PipelineProcessStartEvent\") {\n      metadata.startingProcessAt = Number.parseInt(log.timestamp);\n    }\n    if (log.__typename === \"PipelineProcessStartedEvent\") {\n      metadata.startedProcessAt = Number.parseInt(log.timestamp);\n      metadata.processId = log.processId;\n    }\n    if (log.__typename === \"PipelineStartEvent\") {\n      metadata.startedPipelineAt = Number.parseInt(log.timestamp);\n    }\n    if (log.__typename === \"PipelineInitFailureEvent\") {\n      metadata.initFailed = true;\n      metadata.exitedAt = Number.parseInt(log.timestamp);\n    }\n    if (\n      log.__typename === \"PipelineFailureEvent\" ||\n      log.__typename === \"PipelineSuccessEvent\"\n    ) {\n      metadata.exitedAt = Number.parseInt(log.timestamp);\n    }\n\n    if (log.step) {\n      const timestamp = Number.parseInt(log.timestamp, 10);\n      const stepKey = log.step.key;\n      const step = metadata.steps[stepKey] || {\n        state: IStepState.WAITING,\n        start: undefined,\n        elapsed: undefined,\n        transitionedAt: 0,\n        expectationResults: [],\n        materializations: []\n      };\n\n      if (log.__typename === \"ExecutionStepStartEvent\") {\n        if (step.state === IStepState.WAITING) {\n          step.state = IStepState.RUNNING;\n          step.transitionedAt = timestamp;\n          step.start = timestamp;\n        } else {\n          // we have already received a success / skipped / failure event\n          // and this message is out of order.\n        }\n      } else if (log.__typename === \"ExecutionStepSuccessEvent\") {\n        step.state = IStepState.SUCCEEDED;\n        step.transitionedAt = timestamp;\n        step.finish = timestamp;\n      } else if (log.__typename === \"ExecutionStepSkippedEvent\") {\n        step.state = IStepState.SKIPPED;\n        step.transitionedAt = timestamp;\n      } else if (log.__typename === \"ExecutionStepFailureEvent\") {\n        step.state = IStepState.FAILED;\n        step.transitionedAt = timestamp;\n        step.finish = timestamp;\n      } else if (log.__typename === \"StepMaterializationEvent\") {\n        step.materializations.push({\n          icon: IStepDisplayIconType.LINK,\n          text: log.materialization.label || \"Materialization\",\n          items: itemsForMetadataEntries(log.materialization.metadataEntries)\n        });\n      } else if (log.__typename === \"StepExpectationResultEvent\") {\n        step.expectationResults.push({\n          status: log.expectationResult.success\n            ? IExpectationResultStatus.PASSED\n            : IExpectationResultStatus.FAILED,\n          icon: log.expectationResult.success\n            ? IStepDisplayIconType.SUCCESS\n            : IStepDisplayIconType.FAILURE,\n          text: log.expectationResult.label,\n          items: itemsForMetadataEntries(log.expectationResult.metadataEntries)\n        });\n      }\n\n      metadata.steps[stepKey] = step;\n    }\n  });\n  return metadata;\n}\n\ninterface IRunMetadataProviderProps {\n  logs: RunMetadataProviderMessageFragment[];\n  children: (metadata: IRunMetadataDict) => React.ReactElement<any>;\n}\n\nexport class RunMetadataProvider extends React.Component<\n  IRunMetadataProviderProps\n> {\n  static fragments = {\n    RunMetadataProviderMessageFragment: gql`\n      fragment TempMetadataEntryFragment on EventMetadataEntry {\n        label\n        description\n        ... on EventPathMetadataEntry {\n          path\n        }\n        ... on EventJsonMetadataEntry {\n          jsonString\n        }\n        ... on EventUrlMetadataEntry {\n          url\n        }\n        ... on EventTextMetadataEntry {\n          text\n        }\n        ... on EventMarkdownMetadataEntry {\n          mdStr\n        }\n      }\n\n      fragment RunMetadataProviderMessageFragment on PipelineRunEvent {\n        __typename\n        ... on MessageEvent {\n          message\n          timestamp\n          step {\n            key\n          }\n        }\n        ... on PipelineProcessStartedEvent {\n          processId\n        }\n        ... on PipelineProcessStartEvent {\n          pipelineName\n          runId\n        }\n        ... on StepMaterializationEvent {\n          step {\n            key\n          }\n          materialization {\n            label\n            description\n            metadataEntries {\n              ...TempMetadataEntryFragment\n            }\n          }\n        }\n        ... on StepExpectationResultEvent {\n          expectationResult {\n            success\n            label\n            description\n            metadataEntries {\n              ...TempMetadataEntryFragment\n            }\n          }\n        }\n      }\n    `\n  };\n\n  render() {\n    return this.props.children(extractMetadataFromLogs(this.props.logs));\n  }\n}\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"cc31aa073bf383fee64e.worker.js\");\n};","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/icon-file.c38e7cf0.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-link.0a65b356.svg\";","import { Toaster, Position, Intent } from \"@blueprintjs/core\";\n\n// The address to the dagit server (eg: http://localhost:5000) based\n// on our current \"GRAPHQL_URI\" env var. Note there is no trailing slash.\nexport const ROOT_SERVER_URI = (process.env.REACT_APP_GRAPHQL_URI || \"\")\n  .replace(\"wss://\", \"https://\")\n  .replace(\"ws://\", \"http://\")\n  .replace(\"/graphql\", \"\");\n\nexport const WEBSOCKET_URI =\n  process.env.REACT_APP_GRAPHQL_URI ||\n  `${document.location.protocol === \"https:\" ? \"wss\" : \"ws\"}://${\n    document.location.host\n  }/graphql`;\n\nexport const SharedToaster = Toaster.create(\n  { position: Position.TOP },\n  document.body\n);\n\nexport async function copyValue(event: React.MouseEvent<any>, value: string) {\n  event.preventDefault();\n\n  const el = document.createElement(\"textarea\");\n  document.body.appendChild(el);\n  el.value = value;\n  el.select();\n  document.execCommand(\"copy\");\n  el.remove();\n\n  SharedToaster.show({\n    message: \"Copied to clipboard!\",\n    icon: \"clipboard\",\n    intent: Intent.NONE\n  });\n}\n","module.exports = __webpack_public_path__ + \"static/media/icon-dependency-arrow.9468a8eb.svg\";"],"sourceRoot":""}